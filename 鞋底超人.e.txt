 ' 文件类型：Windows窗口程序

 ' 程序名称：
 ' 程序描述：
 ' 程序作者：
 ' 邮政编码：
 ' 联系地址：
 ' 联系电话：
 ' 传真号码：
 ' 电子信箱：
 ' 主页地址：
 ' 版权声明：
 ' 版本号：1.0
 ' 创建号：0.0

窗口 _启动窗口 ' 在程序启动后自动调入本窗口
    左边 = 50
    顶边 = 50
    宽度 = 646
    高度 = 512
    鼠标指针 = { 0,0,0,0 }
    标记 = “”
    可视 = 真
    禁止 = 假
    边框 = 2
    底图方式 = 1
    底色 = -16777216 '  0xFF000000
    最大化按钮 = 假
    最小化按钮 = 假
    控制按钮 = 真
    位置 = 1
    可否移动 = 真
    背景音乐播放次数 = 0
    回车下移焦点 = 假
    Esc键关闭 = 真
    F1键打开帮助 = 假
    帮助标志值 = 0
    在任务栏中显示 = 真
    随意移动 = 假
    外形 = 0
    总在最前 = 假
    保持标题栏激活 = 假
    底图 =  ' 空
    图标 =  ' 空
    背景音乐 =  ' 空
    标题 = “鞋底超人”
    帮助文件名 = “”





 ' 所需要的支持库：
 ' krnln d09f2340818511d396f6aaf844c7e325 4 4 系统核心支持库
 ' EdirectX 81690053A86045bf9E362F5DE0BC4095 1 5 DirectX支持库



 ' 所需要的模块
 ' 高精度等待 D:\E语言学习之旅\我的个人作品\自主网游\我の游戏梦 我の蓝精灵\高精度等待.ec


数据类型 精灵对象, , 
    .成员 精灵标签, 整数型, , , 
    .成员 横坐标X, 整数型, , , 
    .成员 纵坐标Y, 整数型, , , 
    .成员 图片复制方法, 短整数型, , , 0=透空块复制   1=水平透空块复制 2=透明透空块复制
    .成员 矩形区域, 未知类型0x2000D, , , 
    .成员 透明度, 整数型, , , 

数据类型 鞋底超人游戏专用数据, , 
    .成员 小人移动速度, 短整数型, , , 
    .成员 脚CPU动作, 短整数型, , , 
    .成员 脚移动速度, 短整数型, , , 
    .成员 脚当前状态, 短整数型, , , 
    .成员 小人是否跳起, 逻辑型, , , 
    .成员 小人跳动距离, 短整数型, , , 
    .成员 小人跳动方向, 短整数型, , , 
    .成员 脚踩下速度, 短整数型, , , 
    .成员 脚停顿时间, 整数型, , , 
    .成员 画踩扁小人, 短整数型, , , 

.全局变量 电视屏幕, 未知类型0x20007, , , 
.全局变量 缓冲页面, 未知类型0x2000B, , , 

.窗口程序集 游戏系统程序集, , , 

.程序集变量 游戏进程, 刷新类, , , 
.子程序 __启动窗口_创建完毕, 空白型, , 
创建视频模式 ()
.如果真 (不等于 (未知函数_67174548 (20), 真))
    信息框 (“初始化输入设备失败！”, 相加 (0, #错误图标), “错误：”)
.如果真结束
进程指定 ()
游戏进程.初始化 ()
赋值 (.时钟周期, 16)
_启动窗口.激活 ()

.子程序 进程指定, 空白型, , 
.局部变量 零食, 鞋底超人游戏类, , , 

赋值 (游戏进程, 零食)

.子程序 创建视频模式, 空白型, 公开, 0=窗口模式
.参数 视频模式, 短整数型, 可空, 

.如果 (等于 (视频模式, 0))
    .如果真 (不等于 (电视屏幕.未知支持库函数_64 (_启动窗口.取窗口句柄 (), _启动窗口.取用户区宽度 (), _启动窗口.取用户区高度 ()), 真))
        信息框 (“创建窗口模式发生错误！”, 相加 (0, #错误图标), “错误：”)
        销毁 ()
        结束 ()
    .如果真结束
    
.否则
    .如果真 (不等于 (电视屏幕.未知支持库函数_63 (_启动窗口.取窗口句柄 (), _启动窗口.取用户区宽度 (), _启动窗口.取用户区高度 (), 32, 真), 真))
        信息框 (“创建全屏模式发生错误！”, 相加 (0, #错误图标), “错误：”)
        销毁 ()
        结束 ()
    .如果真结束
    赋值 (., 0)
.如果结束
赋值 (缓冲页面, 电视屏幕.未知支持库函数_83 ())

.子程序 _进程时钟_周期事件, 空白型, , 
游戏进程.Main ()


.子程序 __启动窗口_被激活, 空白型, , 
真.未知支持库函数_35 (真, 假)

.子程序 __启动窗口_将被销毁, 空白型, , 
结束 ()

.子程序 __启动窗口_被取消激活, 空白型, , 
假.未知支持库函数_35 (假, 假)

.子程序 初始化输入设备, 逻辑型, , 
.参数 刷新时间, 整数型, , 

.局部变量 是否成功, 逻辑型, , , 

赋值 (是否成功, 真)
.如果真 (不等于 (取窗口句柄 ().未知支持库函数_14 (), 真))
    赋值 (是否成功, 假)
.如果真结束
.如果真 (不等于 (刷新时间.未知支持库函数_38 (), 真))
    赋值 (是否成功, 假)
.如果真结束
返回 (是否成功)

.类模块 鞋底超人游戏类, 刷新类, , 

.程序集变量 精灵图片库, 未知类型0x2000B, , "0", 
.程序集变量 游戏数据, 鞋底超人游戏专用数据, , , 
.程序集变量 精灵对象, 精灵对象, , "0", 
.子程序 _初始化, 空白型, , 当基于本类的对象被创建后，此方法会被自动调用


.子程序 _销毁, 空白型, , 当基于本类的对象被销毁前，此方法会被自动调用


.子程序 初始化, 空白型, 公开, 
.局部变量 i, 整数型, , , 
.局部变量 零食, 未知类型0x2000B, , , 

清除数组 (精灵图片库)
.计次循环首 (8, i) ' 载入游戏中的精灵图片（注：精灵（4）这张图片在游戏中没有用到！只是备用的。）
    .如果真 (等于 (零食.未知支持库函数_111 (电视屏幕, 相加 (取运行目录 (), “\数据库E3\精灵 (”, 到文本 (i), “).bmp”), ), 假))
        .如果真 (等于 (信息框 (相加 (“加载图片[”, 取运行目录 (), “\数据库E3\精灵 (”, 到文本 (i), “).bmp”, “]失败！”, #换行符, #换行符, “                            是否结束游戏进程？”), 相加 (0, #错误图标, #是否钮), “错误报告:”), #是钮))
            结束 ()
        .如果真结束
        
    .如果真结束
    零食.未知支持库函数_157 ()
     ' 加入成员 (精灵图片库, 零食)
    
.计次循环尾 ()
 ' ==============================初始化游戏数据
赋值 (., 10)
赋值 (., 5)
赋值 (., 4)
赋值 (., 真)
赋值 (., 12)
赋值 (游戏数据.脚停顿时间, 400000)
赋值 (游戏数据.脚当前状态, 0)
赋值 (游戏数据.画踩扁小人, 0)
 ' ==============================建立精灵对象
清除数组 (精灵对象)
建立精灵对象 (1, 64, 48, 0, 1) ' 建立[背景]精灵对象
精灵图片库.未知支持库函数_156 ( [1], #黄褐) ' 置[背景]图片关键色
建立精灵对象 (8, 344, 355, 0, 2) ' 建立[阴影]精灵对象
建立精灵对象 (5, 250, 310, 0, 3) ' 建立[小人]精灵对象
建立精灵对象 (2, 344, -170, 0, 4) ' 建立[脚]精灵对象
建立精灵对象 (3, 0, 0, 0, 5) ' 建立[边框]精灵对象
精灵图片库.未知支持库函数_156 ( [3], #绿色) ' 置[边框]图片关键色

.子程序 Main, 空白型, 公开, 
刷新精灵 ()
.判断开始 (等于 (游戏数据.画踩扁小人, 0))
    未知函数_67174662 ()
    .如果真 (.)
        未知函数_67174663 ()
    .如果真结束
    
    .判断开始 (等于 (., 0))
        未知函数_67174664 ()
    .判断 (等于 (., 1))
        未知函数_67174665 ()
    .判断 (等于 (., 2))
        未知函数_67174666 ()
    .默认
        
    .判断结束
    
.判断 (等于 (游戏数据.画踩扁小人, 1))
    画踩扁小人的动作 ()
.默认
    
.判断结束


.子程序 控制脚CPU进程, 空白型, , 
.局部变量 l, 整数型, , , 

.如果真 (等于 (., 0))
    赋值 (l, 相减 (精灵对象 [4].横坐标X, 精灵对象 [3].横坐标X))
    .判断开始 (大于 (l, 0))
        .计次循环首 (., l)
            .如果真 (并且 (小于 (相加 (精灵对象 [4].横坐标X, 10), 相加 (精灵对象 [3].横坐标X, 42)), 大于 (相加 (精灵对象 [4].横坐标X, 210), 精灵对象 [3].横坐标X)))
                赋值 (., 1)
            .如果真结束
            赋值 (精灵对象 [4].横坐标X, 相减 (精灵对象 [4].横坐标X, 1))
            赋值 (精灵对象 [2].横坐标X, 相减 (精灵对象 [2].横坐标X, 1))
        .计次循环尾 ()
    .判断 (小于 (l, 0))
        .计次循环首 (., l)
            .如果真 (并且 (小于 (相加 (精灵对象 [4].横坐标X, 10), 相加 (精灵对象 [3].横坐标X, 42)), 大于 (相加 (精灵对象 [4].横坐标X, 210), 精灵对象 [3].横坐标X)))
                赋值 (., 1)
            .如果真结束
            赋值 (精灵对象 [4].横坐标X, 相加 (精灵对象 [4].横坐标X, 1))
            赋值 (精灵对象 [2].横坐标X, 相加 (精灵对象 [2].横坐标X, 1))
        .计次循环尾 ()
    .默认
        
    .判断结束
    
.如果真结束


.子程序 游戏失败事件, 空白型, , 
高精度等待 (1000000)
初始化 ()

.子程序 画踩扁小人的动作, 空白型, , 
.局部变量 i, 整数型, , , 

.计次循环首 (., i)
    .如果 (大于 (精灵对象 [3].纵坐标Y, 326))
        赋值 (游戏数据.画踩扁小人, 2)
        游戏失败事件 ()
        跳出循环 ()
    .否则
        赋值 (精灵对象 [4].纵坐标Y, 相加 (精灵对象 [4].纵坐标Y, 1))
        赋值 (精灵对象 [3].纵坐标Y, 相加 (精灵对象 [3].纵坐标Y, 1))
    .如果结束
    
.计次循环尾 ()

.子程序 画脚抬起的动作, 空白型, , 
.局部变量 i, 整数型, , , 

.如果真 (不等于 (精灵对象 [4].纵坐标Y, -170))
    .计次循环首 (., i)
        赋值 (精灵对象 [4].纵坐标Y, 相减 (精灵对象 [4].纵坐标Y, 1))
        .如果真 (等于 (精灵对象 [4].纵坐标Y, -170))
            赋值 (., 0)
            跳出循环 ()
        .如果真结束
        
    .计次循环尾 ()
.如果真结束


.子程序 画脚踩下来的动作, 空白型, , 
.局部变量 i, 整数型, , , 

.计次循环首 (., i)
    赋值 (精灵对象 [4].纵坐标Y, 相加 (精灵对象 [4].纵坐标Y, 1))
    .如果真 (大于 (精灵对象 [4].纵坐标Y, 44))
        赋值 (., 3)
        高精度等待 (游戏数据.脚停顿时间)
        赋值 (., 2)
        跳出循环 ()
    .如果真结束
    .如果真 (并且 (大于 (相加 (精灵对象 [4].纵坐标Y, 280), 精灵对象 [3].纵坐标Y), 小于 (相加 (精灵对象 [4].纵坐标Y, 250), 精灵对象 [3].纵坐标Y), 小于 (相加 (精灵对象 [4].横坐标X, 10), 相加 (精灵对象 [3].横坐标X, 42)), 大于 (相加 (精灵对象 [4].横坐标X, 210), 精灵对象 [3].横坐标X)))
        踩中小人事件 ()
        跳出循环 ()
    .如果真结束
    
    
.计次循环尾 ()


.子程序 踩中小人事件, 空白型, , 
赋值 (游戏数据.画踩扁小人, 1)
赋值 (精灵对象 [3].精灵标签, 7)
分割矩形区域 (精灵对象 [3], , , , )
赋值 (精灵对象 [3].横坐标X, 相减 (精灵对象 [3].横坐标X, 11))
赋值 (精灵对象 [3].纵坐标Y, 相加 (精灵对象 [3].纵坐标Y, 19))

.子程序 画小人跳起的动作, 空白型, , 
.局部变量 i, 整数型, , , 

.计次循环首 (., i)
    .判断开始 (等于 (精灵对象 [3].纵坐标Y, 310))
        赋值 (., -1)
    .判断 (等于 (精灵对象 [3].纵坐标Y, 200))
        赋值 (., 1)
    .默认
        
    .判断结束
    赋值 (精灵对象 [3].纵坐标Y, 相加 (精灵对象 [3].纵坐标Y, 游戏数据.小人跳动方向))
.计次循环尾 ()

.子程序 判断按键状态, 空白型, , 
 ' ==============================右键状态
.判断开始 (等于 (_启动窗口.未知支持库函数_46 (., #), 3)) ' 按着
    赋值 (精灵对象 [3].图片复制方法, 1)
    赋值 (精灵对象 [3].精灵标签, 6)
    .如果真 (小于 (精灵对象 [3].横坐标X, 540))
        小人移动 (1)
    .如果真结束
    
.判断 (等于 (_启动窗口.未知支持库函数_46 (., #), 1)) ' 放开
    赋值 (精灵对象 [3].精灵标签, 5)
    赋值 (精灵对象 [3].图片复制方法, 0)
.默认
    
.判断结束
 ' ==============================左键状态
.判断开始 (等于 (_启动窗口.未知支持库函数_46 (., #), 3)) ' 按着
    赋值 (精灵对象 [3].图片复制方法, 0)
    赋值 (精灵对象 [3].精灵标签, 6)
    .如果真 (大于 (精灵对象 [3].横坐标X, 60))
        小人移动 (-1)
    .如果真结束
    
.判断 (等于 (_启动窗口.未知支持库函数_46 (., #), 1)) ' 放开
    赋值 ( [3]., 5)
    赋值 (精灵对象 [3].图片复制方法, 0)
.默认
    
.判断结束


.子程序 小人移动, 空白型, , 
.参数 方向, 整数型, , 

.局部变量 i, 整数型, , , 

.计次循环首 (., )
    赋值 (精灵对象 [3].横坐标X, 相加 (精灵对象 [3].横坐标X, 方向))
    .如果真 (或者 (大于 (精灵对象 [3].横坐标X, 540), 小于 (精灵对象 [3].横坐标X, 60)))
        跳出循环 ()
    .如果真结束
    
.计次循环尾 ()

.子程序 刷新精灵, 空白型, , 
.局部变量 i, 整数型, , , 

缓冲页面.未知支持库函数_124 (#黑色)
.计次循环首 (取数组成员数 (精灵对象), i)
    .判断开始 (等于 (精灵对象 [i], 图片复制方法, 0)) ' 透空块复制
        精灵图片库.未知支持库函数_134 ( [精灵对象] [i], 精灵标签, 缓冲页面, 精灵对象 [i], 横坐标X, 精灵对象 [i], 纵坐标Y, 精灵对象 [i], 矩形区域)
    .判断 (等于 (精灵对象 [i], 图片复制方法, 1)) ' 水平透空块复制
        精灵图片库.未知支持库函数_137 ( [精灵对象] [i], 精灵标签, 缓冲页面, 精灵对象 [i], 横坐标X, 精灵对象 [i], 纵坐标Y, 精灵对象 [i], 矩形区域)
    .判断 (等于 (精灵对象 [i], 图片复制方法, 2)) ' 透明透空块复制
        精灵图片库.未知支持库函数_143 ( [精灵对象] [i], 精灵标签, 缓冲页面, 精灵对象 [i], 横坐标X, 精灵对象 [i], 纵坐标Y, 精灵对象 [i], 矩形区域, 精灵对象 [i], 透明度)
    .默认
        
    .判断结束
     ' 输出调试文本 (精灵对象 [i].图片复制方法)
.计次循环尾 ()
电视屏幕.未知支持库函数_69 (假, 假, 真)

.子程序 建立精灵对象, 空白型, , 
.参数 精灵标签, 整数型, , 
.参数 横坐标X, 整数型, , 
.参数 纵坐标Y, 整数型, , 
.参数 图片复制方法, 短整数型, , 
.参数 图层优先级, 整数型, , 

.局部变量 零食, 未知类型0x41010059, , , 

赋值 (零食., 精灵标签)
赋值 (零食., 横坐标X)
赋值 (零食., 纵坐标Y)
赋值 (零食., 图片复制方法)
赋值 (零食.., 0)
赋值 (零食.., 0)
赋值 (零食.矩形区域., 精灵图片库.未知支持库函数_168 ( [精灵标签]))
赋值 (零食.矩形区域., 精灵图片库.未知支持库函数_169 ( [精灵标签]))
赋值 (零食, 分割矩形区域 (零食, 0, 0, , ))
 ' 加入成员 (精灵对象, 零食)
插入成员 (精灵对象, 图层优先级, 零食)

.子程序 分割矩形区域, 精灵对象, , 
.参数 对象, 精灵对象, , 
.参数 左边, 整数型, 可空, 
.参数 顶边, 整数型, 可空, 
.参数 右边, 整数型, 可空, 
.参数 底边, 整数型, 可空, 

赋值 (对象.矩形区域., 左边)
赋值 (对象.矩形区域., 顶边)
.如果 (是否为空 (右边))
    赋值 (对象.矩形区域., 精灵图片库.未知支持库函数_168 ( [对象].精灵标签))
.否则
    赋值 (对象.矩形区域., 右边)
.如果结束

.如果 (是否为空 (底边))
    赋值 (对象.矩形区域., 精灵图片库.未知支持库函数_169 ( [对象].精灵标签))
.否则
    赋值 (对象.矩形区域., 底边)
.如果结束

返回 (对象)

.类模块 刷新类, , , 

.子程序 _初始化, 空白型, , 当基于本类的对象被创建后，此方法会被自动调用


.子程序 _销毁, 空白型, , 当基于本类的对象被销毁前，此方法会被自动调用


.子程序 初始化, 空白型, 公开, 


.子程序 Main, 空白型, 公开, 


.程序集 __HIDDEN_TEMP_MOD__, , , 

.子程序 高精度等待, 空白型, , 
.参数 微秒, 整数型, , 1000微秒 = 1毫秒 ； 1000毫秒 = 1秒




 ' 不属于任何一个程序集、类模块的函数：
