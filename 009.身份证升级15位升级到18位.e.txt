 ' 文件类型：Windows窗口程序

 ' 程序名称：易语言经典算法 - 身份证号15位升级到18位
 ' 程序描述：　　现在新的身份证已经从15位升到了18位了，很多软件都可能用到身份证的输入、校验的工作，发现现在的身份证校验码居然可能是英文字母x(其实这个X是罗马字母，表示10的意思)，为什么用字母呢？ 起码电话上数字键就输不进去新的号码。现在的办法是使用*替代.那么应该怎样去转换呢？
 ' 程序作者：大有吴涛易语言软件公司
 ' 邮政编码：116001
 ' 联系地址：辽宁省大连市中山区人民路55号亚太国际金融中心
 ' 联系电话：+86(0411)88995831
 ' 传真号码：+86(0411)88995834
 ' 电子信箱：service@dywt.com.cn
 ' 主页地址：http://dywt.com.cn
 ' 版权声明：祝您一帆风顺，心想事成！

 ' 版本号：1.0
 ' 创建号：0.0

窗口 _启动窗口 ' 在程序启动后自动调入本窗口
    左边 = 50
    顶边 = 50
    宽度 = 400
    高度 = 283
    鼠标指针 = { 0,0,0,0 }
    标记 = “”
    可视 = 真
    禁止 = 假
    边框 = 2
    底图方式 = 1
    底色 = -16777216 '  0xFF000000
    最大化按钮 = 假
    最小化按钮 = 假
    控制按钮 = 真
    位置 = 1
    可否移动 = 真
    背景音乐播放次数 = 0
    回车下移焦点 = 假
    Esc键关闭 = 真
    F1键打开帮助 = 假
    帮助标志值 = 0
    在任务栏中显示 = 真
    随意移动 = 假
    外形 = 0
    总在最前 = 假
    保持标题栏激活 = 假
    底图 =  ' 空
    图标 =  ' 空
    背景音乐 =  ' 空
    标题 = “易语言经典算法 - 身份证号15位升级到18位”
    帮助文件名 = “”



.图片 icon, " ' 已保存到：D:\易语言学习\Data\009.身份证升级15位升级到18位.e\icon", , 
.图片 skin, " ' 已保存到：D:\易语言学习\Data\009.身份证升级15位升级到18位.e\skin", , 


 ' 所需要的支持库：
 ' krnln d09f2340818511d396f6aaf844c7e325 4 4 系统核心支持库
 ' iext3 {B6F7542F-B8FE-46a8-9605-98856A687097} 2 0 扩展界面支持库三





.窗口程序集 启动窗口程序集, , , 

.子程序 __启动窗口_创建完毕, 空白型, , 
 ' 算法：固定算法
 ' 问题：身份证升级15位升级到18位
 ' 问题分析： 根据〖中华人民共和国国家标准 GB 11643-1999〗中有关公民身份号码的规定，公民身份号码是特征组合码，由十七位数字本体码和一位数字校验码组成。排列顺序从左至右依次为：六位数字地址码，八位数字出生日期码，三位数字顺序码和一位数字校验码。
 ' 地址码表示编码对象常住户口所在县(市、旗、区)的行政区划代码。生日期码表示编码对象出生的年、月、日，其中年份用四位数字表示，年、月、日之间不用分隔符。顺序码表示同一地址码所标识的区域范围内，对同年、月、日出生的人员编定的顺序号。顺序码的奇数分给男性，偶数分给女性。校验码是根据前面十七位数字码，按照ISO 7064:1983.MOD 11-2校验码计算出来的检验码。
 ' 15位的身份证编码首先把出生年扩展为4位，简单的就是增加一个19，但是这对于1900年出生的人不使用（这样的寿星不多了）
 ' 某公民身份号码本体码为310103771130162，首先按照公式计算：
 ' ∑(ai×Wi)(mod 11)……………………………………(1)
 ' i----表示号码字符从由至左包括校验码在内的位置序号；
 ' ai----表示第i位置上的号码字符值；
 ' Wi----示第i位置上的加权因子，其数值依据公式Wi=2（n-1）(mod 11)计算得出。
 ' i       18 17 16 15 14 13 12 11 10  9  8  7  6  5  4  3  2  1
 ' ai       3  4  0  5  2  4  1  9  8  0  0  1  0  1  0  0  1 a1
 ' Wi       7  9 10  5  8  4  2  1  6  3  7  9 10  5  8  4  2  1
 ' ai×Wi  21 36  0 25 16 16  2  9 48  0  0  9  0  5  0  0  2 a1
 ' 根据公式进行计算：
 ' ∑(ai×Wi) =（21+36+0+25+16+16+2+9+48++0+0+9+0+5+0+0+2) = 189
 ' 189 ÷ 11 = 17 + 2/11
 ' ∑(ai×Wi)(mod 11) = 2
 ' 然后根据计算的结果，从下面的表中查出相应的校验码，其中X表示计算结果为10：
 ' ∑(ai×WI)(mod 11)   0 1 2 3 4 5 6 7 8 9 10
 ' 校验码字符值ai       1 0 X 9 8 7 6 5 4 3  2
 ' 根据上表，查出计算结果为2的校验码为所以该人员的公民身份号码应该为310103197711301627。
 ' 问题描述：将个人旧身份证15位升级到18位

.子程序 _计算图形按钮_被单击, 空白型, , 
.如果 (不等于 (取文本长度 (.内容), 15))
    获取焦点 ()
    赋值 (.内容, “号码位数不正确”)
    赋值 (.被选择字符数, -1)
.否则
    赋值 (.内容, 十五位到十八位 (.内容))
.如果结束


.子程序 十五位到十八位, 文本型, , 
.参数 十五位号, 文本型, , 

.局部变量 临时数值, 整数型, , , 
.局部变量 数量, 整数型, , , 
.局部变量 位数, 文本型, , , 
.局部变量 临时文本, 文本型, , , 

赋值 (临时文本, 相加 (取文本左边 (十五位号, 6), “19”, 取文本右边 (十五位号, 9)))
.变量循环首 (18, 2, -1, 临时数值)
    赋值 (数量, 相加 (数量, 相乘 (求余数 (求次方 (2, 相减 (临时数值, 1)), 11), 到数值 (取文本中间 (临时文本, 相减 (19, 临时数值), 1)))))
.变量循环尾 ()
赋值 (数量, 求余数 (数量, 11))
.判断开始 (等于 (数量, 0))
     ' 如果数量 ＝ 0 则位 ＝ “1”
    赋值 (位数, “1”)
.判断 (等于 (数量, 1))
     ' 如果数量 ＝ 1 则位 ＝ “0”
    赋值 (位数, “0”)
.判断 (等于 (数量, 2))
     ' 如果数量 ＝ 2 则位 ＝ “X”
    赋值 (位数, “X”)
.默认
     ' 去掉空格
    赋值 (位数, 删首尾空 (到文本 (相减 (12, 数量))))
.判断结束
返回 (相加 (临时文本, 位数))


 ' 不属于任何一个程序集、类模块的函数：
