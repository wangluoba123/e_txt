 ' 文件类型：Windows窗口程序

 ' 程序名称：
 ' 程序描述：
 ' 程序作者：
 ' 邮政编码：
 ' 联系地址：
 ' 联系电话：
 ' 传真号码：
 ' 电子信箱：
 ' 主页地址：
 ' 版权声明：
 ' 版本号：1.0
 ' 创建号：0.0

窗口 _启动窗口 ' 在程序启动后自动调入本窗口
    左边 = 50
    顶边 = 50
    宽度 = 459
    高度 = 307
    鼠标指针 = { 0,0,0,0 }
    标记 = “”
    可视 = 真
    禁止 = 假
    边框 = 2
    底图方式 = 1
    底色 = -16777216 '  0xFF000000
    最大化按钮 = 假
    最小化按钮 = 真
    控制按钮 = 真
    位置 = 1
    可否移动 = 真
    背景音乐播放次数 = 0
    回车下移焦点 = 假
    Esc键关闭 = 真
    F1键打开帮助 = 假
    帮助标志值 = 0
    在任务栏中显示 = 真
    随意移动 = 假
    外形 = 0
    总在最前 = 假
    保持标题栏激活 = 假
    底图 =  ' 空
    图标 =  ' 空
    背景音乐 =  ' 空
    标题 = “”
    帮助文件名 = “”



.图片 右侧的棋盘, " ' 已保存到：D:\易语言学习\Data\QQ军旗文件读取.e\右侧的棋盘", , 
.图片 棋子蓝, " ' 已保存到：D:\易语言学习\Data\QQ军旗文件读取.e\棋子蓝", , 
.图片 棋子绿, " ' 已保存到：D:\易语言学习\Data\QQ军旗文件读取.e\棋子绿", , 
.图片 棋子橙, " ' 已保存到：D:\易语言学习\Data\QQ军旗文件读取.e\棋子橙", , 
.图片 棋子紫, " ' 已保存到：D:\易语言学习\Data\QQ军旗文件读取.e\棋子紫", , 
.常量 上, "1", , 
.常量 下, "2", , 
.常量 左, "3", , 
.常量 右, "4", , 
.常量 蓝, "1", , 
.常量 橙, "2", , 
.常量 绿, "3", , 
.常量 紫, "4", , 


 ' 所需要的支持库：
 ' krnln d09f2340818511d396f6aaf844c7e325 4 4 系统核心支持库
 ' BmpOperate 42305932-06E6-47a5-AC79-8BDCDC58DF61 1 0 位图操作支持库




数据类型 坐标, , 
    .成员 横坐标, 整数型, , , 
    .成员 纵坐标, 整数型, , , 

数据类型 棋盘坐标, , 
    .成员 坐标, 坐标, , "30", 


.窗口程序集 窗口程序集1, , , 

.程序集变量 牌名, 文本型, , "0", 
.程序集变量 棋盘坐标, 棋盘坐标, , "4", 
.程序集变量 当前方位, 整数型, , , 
.程序集变量 当前颜色, 整数型, , , 
.子程序 __启动窗口_创建完毕, 空白型, , 
.局部变量 文件号, 整数型, , , 
.局部变量 字节集, 字节集, , , 
.局部变量 字节集1, 字节集, , , 
.局部变量 字节集2, 字节集, , , 
.局部变量 字节集3, 字节集, , , 
.局部变量 字节集4, 字节集, , , 
.局部变量 字节集5, 字节集, , , 
.局部变量 整数1, 整数型, , , 
.局部变量 整数2, 整数型, , , 
.局部变量 文本, 文本型, , , 
.局部变量 循环变量, 整数型, , , 

 ' 文件号 ＝ 打开文件 (“D:\game\chess of four\14.jgs”, , )
初始化子程序 ()
 ' _按钮1_被单击 ()
 ' .如果真 (大于 (文件号, 0))
     ' 字节集 ＝ 读入字节集 (文件号, 1000)
     ' 整数1 ＝ 41
     ' .计次循环首 (4, )
         ' 输出调试文本 (到文本 (取字节集中间 (字节集, 整数1, 20)))
         ' 整数1 ＝ 整数1 ＋ 88
     ' .计次循环尾 ()
     ' 整数1 ＝ 61
     ' 文本 ＝ “”
     ' ' 输出调试文本 (取字节集数据 ({ 12 }, #整数型, ))
     ' .计次循环首 (30, 循环变量)
         ' 文本 ＝ 文本 ＋ 牌名 [取字节集数据 (取字节集中间 (字节集, 整数1, 1), #整数型, ) ＋ 1] ＋ 选择 (循环变量 ％ 5 ＝ 0, #换行符, “--”)
         ' 整数1 ＝ 整数1 ＋ 1
     ' .计次循环尾 ()
    
     ' 关闭文件 (文件号)
.如果真结束


.子程序 初始化子程序, 空白型, , 
.局部变量 文本, 文本型, , , 
.局部变量 循环变量, 整数型, , , 

赋值 (文本, “，，军旗，地雷，炸弹，司令，军长，师长，旅长，团长，营长，连长，排长，工兵”)
赋值 (牌名, 分割文本 (文本, “，”, ))
更新方位状态 ()
更新棋子颜色 ()
.计次循环首 (30, 循环变量)
    赋值 (棋盘坐标 [4].坐标 [循环变量], 横坐标, 多项选择 (相加 (取整 (相除 (相减 (循环变量, 1), 5)), 1), 9, 47, 85, 124, 164, 203))
    赋值 (棋盘坐标 [4].坐标 [循环变量], 纵坐标, 多项选择 (相加 (求余数 (循环变量, 5), 1), 5, 160, 122, 83, 44))
.计次循环尾 ()
.计次循环首 (30, 循环变量)
    赋值 (棋盘坐标 [1].坐标 [循环变量], 纵坐标, 多项选择 (相加 (取整 (相除 (相减 (循环变量, 1), 5)), 1), 200, 162, 124, 85, 45, 6))
    赋值 (棋盘坐标 [1].坐标 [循环变量], 横坐标, 多项选择 (相加 (求余数 (循环变量, 5), 1), 5, 160, 122, 83, 44))
.计次循环尾 ()
.计次循环首 (30, 循环变量)
    赋值 (棋盘坐标 [3].坐标 [循环变量], 横坐标, 多项选择 (相加 (取整 (相除 (相减 (循环变量, 1), 5)), 1), 200, 162, 124, 85, 45, 6))
    赋值 (棋盘坐标 [3].坐标 [循环变量], 纵坐标, 多项选择 (相加 (求余数 (循环变量, 5), 1), 161, 6, 44, 83, 122))
.计次循环尾 ()
.计次循环首 (30, 循环变量)
    赋值 (棋盘坐标 [2].坐标 [循环变量], 纵坐标, 多项选择 (相加 (取整 (相除 (相减 (循环变量, 1), 5)), 1), 9, 47, 85, 124, 164, 203))
    赋值 (棋盘坐标 [2].坐标 [循环变量], 横坐标, 多项选择 (相加 (求余数 (循环变量, 5), 1), 161, 6, 44, 83, 122))
.计次循环尾 ()


.子程序 更新方位状态, 空白型, , 
.局部变量 位图, 位图, , , 

位图.载入数据 (#右侧的棋盘)
.清除 ()
.判断开始 (.选中)
    赋值 (当前方位, #上)
    相加 (.左边, 17).移动 (.顶边, 202, 236)
    赋值 (位图, 位图.旋转90度 (假))
.判断 (.选中)
    赋值 (当前方位, #下)
    相加 (.左边, 17).移动 (.顶边, 202, 236)
    赋值 (位图, 位图.旋转90度 (真))
.判断 (.选中)
    赋值 (当前方位, #左)
    .移动 (.左边, 相加 (.顶边, 17), 236, 202)
    赋值 (位图, 位图.旋转90度 (真))
    赋值 (位图, 位图.旋转90度 (真))
.默认
    赋值 (当前方位, #右)
    .移动 (.左边, 相加 (.顶边, 17), 236, 202)
.判断结束
赋值 (.底图, 位图.取位图数据 ())
处理事件 ()

.子程序 画出一个棋子, 空白型, , 
.参数 参_序号, 整数型, , 
.参数 参_文本, 文本型, , 
.参数 颜色标识, 整数型, 可空, 
.参数 方位标识, 整数型, 可空, 

.局部变量 位图, 位图, , , 
.局部变量 图片号, 整数型, , , 

.如果真 (等于 (参_文本, “”))
    返回 ()
.如果真结束
.清除 ()
1.定位写出 (5, 参_文本)
位图.载入数据 (.取图片 ())
.判断开始 (等于 (方位标识, #左))
    赋值 (位图, 位图.旋转90度 (真))
.判断 (等于 (方位标识, #右))
    赋值 (位图, 位图.旋转90度 (假))
.默认
    
.判断结束
赋值 (图片号, 载入图片 (位图.取位图数据 ()))
图片号.画图片 (棋盘坐标 [方位标识], 坐标 [参_序号], 横坐标, 棋盘坐标 [方位标识], 坐标 [参_序号], 纵坐标, , , )
卸载图片 (图片号)

.子程序 读取文件并画出棋阵, 空白型, , 
.参数 文件数据, 字节集, , 
.参数 人序号, 整数型, , 
.参数 颜色标识, 整数型, 可空, 
.参数 方位标识, 整数型, 可空, 

.局部变量 整数1, 整数型, , , 
.局部变量 临时文本, 文本型, , , 
.局部变量 循环变量, 整数型, , , 

赋值 (整数1, 相加 (41, 相乘 (相减 (人序号, 1), 88), 20))
 ' 输出调试文本 (取字节集数据 ({ 12 }, #整数型, ))
.计次循环首 (30, 循环变量)
    画出一个棋子 (循环变量, 牌名 [相加 (取字节集数据 (取字节集中间 (文件数据, 整数1, 1), #整数型, ), 1)], 当前颜色, 当前方位)
    赋值 (整数1, 相加 (整数1, 1))
.计次循环尾 ()

.子程序 取下棋人名称, 空白型, , 
.参数 文件数据, 字节集, , 
.参数 名字数组, 文本型, 参考 数组, 

.局部变量 整数1, 整数型, , , 
.局部变量 循环变量, 整数型, , , 

赋值 (整数1, 41)
.计次循环首 (4, 循环变量)
    赋值 (名字数组 [循环变量], 到文本 (取字节集中间 (文件数据, 整数1, 20)))
    赋值 (整数1, 相加 (整数1, 88))
.计次循环尾 ()

.子程序 _按钮2_被单击, 空白型, , 
.局部变量 名字数组, 文本型, , "4", 
.局部变量 循环变量, 整数型, , , 

.如果真 (打开 ())
    取下棋人名称 (读入文件 (.文件名), 名字数组)
    清空 ()
     ' 赋值 (.内容, 取文本中间 (.文件名, 相加 (倒找文本 (.文件名, “\”, , 假), 1), 相加 (相减 (取文本长度 (.文件名), 倒找文本 (.文件名, “\”, , 假)), 1)))
    .计次循环首 (4, 循环变量)
        名字数组.加入项目 ( [循环变量], )
    .计次循环尾 ()
.如果真结束


.子程序 _按钮1_被单击, 空白型, , 
.局部变量 名字数组, 文本型, , "4", 
.局部变量 循环变量, 整数型, , , 

取下棋人名称 (读入文件 (.文件名), 名字数组)
清空 ()
.计次循环首 (4, 循环变量)
    名字数组.加入项目 ( [循环变量], )
.计次循环尾 ()
赋值 (.现行选中项, 0)

.子程序 _列表框1_列表项被选择, 空白型, , 
读取文件并画出棋阵 (读入文件 (.文件名), 相加 (.现行选中项, 1))


.子程序 _单选框1_被单击, 空白型, , 
更新方位状态 ()
读取文件并画出棋阵 (读入文件 (.文件名), 相加 (.现行选中项, 1))


.子程序 _单选框2_被单击, 空白型, , 
更新方位状态 ()
读取文件并画出棋阵 (读入文件 (.文件名), 相加 (.现行选中项, 1))


.子程序 _单选框3_被单击, 空白型, , 
更新方位状态 ()
读取文件并画出棋阵 (读入文件 (.文件名), 相加 (.现行选中项, 1))


.子程序 _单选框4_被单击, 空白型, , 
更新方位状态 ()
读取文件并画出棋阵 (读入文件 (.文件名), 相加 (.现行选中项, 1))


.子程序 更新棋子颜色, 空白型, , 
.判断开始 (.选中)
    赋值 (当前颜色, #蓝)
    赋值 (.底图, #棋子蓝)
.判断 (.选中)
    赋值 (当前颜色, #紫)
    赋值 (.底图, #棋子紫)
.判断 (.选中)
    赋值 (当前颜色, #橙)
    赋值 (.底图, #棋子橙)
.默认
    赋值 (当前颜色, #绿)
    赋值 (.底图, #棋子绿)
.判断结束


.子程序 _单选框8_被单击, 空白型, , 
更新棋子颜色 ()
读取文件并画出棋阵 (读入文件 (.文件名), 相加 (.现行选中项, 1))


.子程序 _单选框7_被单击, 空白型, , 
更新棋子颜色 ()
读取文件并画出棋阵 (读入文件 (.文件名), 相加 (.现行选中项, 1))


.子程序 _单选框6_被单击, 空白型, , 
更新棋子颜色 ()
读取文件并画出棋阵 (读入文件 (.文件名), 相加 (.现行选中项, 1))


.子程序 _单选框5_被单击, 空白型, , 
更新棋子颜色 ()
读取文件并画出棋阵 (读入文件 (.文件名), 相加 (.现行选中项, 1))



 ' 不属于任何一个程序集、类模块的函数：
