 ' 文件类型：Windows窗口程序

 ' 程序名称：觉然小便条
 ' 程序描述：一款自用且实用的简约小便条程序
 ' 程序作者：觉然
 ' 邮政编码：
 ' 联系地址：
 ' 联系电话：
 ' 传真号码：
 ' 电子信箱：
 ' 主页地址：
 ' 版权声明：             易语言资源网注意事项
--============   www.wodesoft.com  =============--
* 易语言资源网为易语言官方站、易语言官方论坛提供辅助资源站；本易语言资源网( www.wodesoft.com)所有软件和资料均为软件作者提供和网友推荐发布而来，其版权归该软件和程序源码的合法拥有者所有，本站易语言资源网整理收集仅供易语言用户学习和易语言技术研究探讨使用，不得用于任何商业用途。如果由于以上原因造成的版权纠纷本站概不负责！
* 本站资源未经许可,任何网站不得非法盗链及抄袭本站资源；如引用，请注明来自易语言资源网，谢谢合作！
--============   www.wodesoft.com  =============--
 ' 版本号：1.0
 ' 创建号：0.0

窗口 _启动窗口
    左边 = 50
    顶边 = 50
    宽度 = 380
    高度 = 250
    鼠标指针 = { 0,0,0,0 }
    标记 = “”
    可视 = 真
    禁止 = 假
    边框 = 1
    底图方式 = 1
    底色 = -16777216 '  0xFF000000
    最大化按钮 = 真
    最小化按钮 = 真
    控制按钮 = 真
    位置 = 1
    可否移动 = 真
    背景音乐播放次数 = 0
    回车下移焦点 = 假
    Esc键关闭 = 真
    F1键打开帮助 = 假
    帮助标志值 = 0
    在任务栏中显示 = 真
    随意移动 = 假
    外形 = 0
    总在最前 = 假
    保持标题栏激活 = 假
    窗口类名 = “”
    底图 =  ' 空
    图标 =  ' 已保存到：D:\易语言学习\Data\iyx7M1In.e\_启动窗口_图标.ico
    背景音乐 =  ' 空
    标题 = “觉然小便条（Ctrl + 右击，弹出操作菜单）”
    帮助文件名 = “”





 ' 所需要的支持库：
 ' krnln d09f2340818511d396f6aaf844c7e325 5 0 系统核心支持库



 ' 所需要的模块
 ' 执行线程 C:\Documents and Settings\Administrator\桌面\执行线程.ec



.程序集 启动程序集, , , 

.子程序 歇息, 逻辑型, 公开, 暂停执行代码。但不影响其他代码的执行。歇息完毕返回真。本命令仅依赖核心库。
.参数 等待时间, 整数型, , 

.局部变量 启动时间, 整数型, , , 

赋值 (启动时间, 取启动时间 ())
.循环判断首 ()
    延时 (10)
    处理事件 ()
.循环判断尾 (小于 (相减 (取启动时间 (), 启动时间), 等待时间))
返回 (真)

.窗口程序集 窗口程序集, , , 

.程序集变量 文件名, 文本型, , , 
.程序集变量 原大小, 空白型, , "4", 
.程序集变量 键代码_, 整数型, , , 
.程序集变量 功能键状态_, 整数型, , , 
.程序集变量 是否已修改, 逻辑型, , , 
.程序集变量 是否全屏, 逻辑型, , , 
.子程序 __启动窗口_尺寸被改变, 空白型, , 
 ' --========  易语言资源网  (www.wodesoft.com)  ======--
 ' 努力创建完善、持续更新的易语言学习例程源码资源站
 ' --================   www.wodesoft.com  ===========--
 ' --==================   易语言资源网注意事项  ================--
 ' * 易语言资源网为易语言官方站、易语言官方论坛提供辅助资源站；
 ' 本易语言资源网( www.wodesoft.com)所有软件和资料均为软件作者提
 ' 供和网友推荐发布而来，其版权归该软件和程序源码的合法拥有者所
 ' 有，本站易语言资源网整理收集仅供易语言用户学习和易语言技术研
 ' 究探讨使用，不得用于任何商业用途。如果由于以上原因造成的版权
 ' 纠纷本站概不负责！
 ' * 本站资源未经许可，任何网站不得非法盗链及抄袭本站资源；如引用
 ' 页面，请注明来自易语言资源网，谢谢合作！
 ' --=====================   www.wodesoft.com  ================--

执行线程 (&尺寸被改变)

.子程序 尺寸被改变, 空白型, , 
赋值 (., 取用户区宽度 ())
赋值 (., 取用户区高度 ())

.子程序 __启动窗口_创建完毕, 空白型, , 
执行线程 (&创建完毕)

.子程序 创建完毕, 空白型, , 
赋值 (文件名, 取运行目录 ())
赋值 (文件名, 相加 (文件名, 选择 (等于 (取文本右边 (文件名, 1), “\”), “”, “\”), “小便条.txt”))
.如果真 (文件是否存在 (文件名))
    赋值 (., 到文本 (读入文件 (文件名)))
.如果真结束
置托盘图标 (., 相加 (“觉然小便条”, #换行符, “左击显示或隐藏,右击退出”))
赋值 (是否已修改, 假)

.子程序 _编辑框_按下某键, 逻辑型, , 
.参数 键代码, 整数型, , 
.参数 功能键状态, 整数型, , 

赋值 (键代码_, 键代码)
赋值 (功能键状态_, 功能键状态)
执行线程 (&按下某键)

.子程序 按下某键, 空白型, , 
.局部变量 是否已最前, 逻辑型, , , 

.如果真 (等于 (功能键状态_, 1))
    .如果真 (等于 (键代码_, #S键))
        赋值 (., 选择 (写到文件 (文件名, 到字节集 (.)), “保存完毕”, “保存失败，请检查是否文件被占用。”))
        .如果真 (等于 (., “保存完毕”))
            赋值 (是否已修改, 假)
        .如果真结束
        歇息 (1000)
        赋值 (., “觉然小便条”)
         ' 本源码来自易语言资源网(www.wodesoft.com)
    .如果真结束
    .如果真 (等于 (键代码_, #A键))
        赋值 (., -1)
    .如果真结束
    .如果真 (等于 (键代码_, #O键))
        赋值 (., “将要在当前光标处读入一篇文档”)
        赋值 (., 0)
        .如果真 (打开 ())
            赋值 (., 到文本 (读入文件 (.)))
            赋值 (., 相加 (“在当前光标处读入一篇文档《”, ., “》”))
            歇息 (3000)
            赋值 (., “觉然小便条”)
        .如果真结束
        
    .如果真结束
    .如果真 (等于 (键代码_, #L键))
        赋值 (., “将当前编辑文档另存为新的文档”)
        赋值 (., 1)
        .如果真 (打开 ())
            赋值 (., 选择 (写到文件 (., 到字节集 (.)), “另存为完毕”, “另存为失败，请检查文件是否被占用。”))
            歇息 (1500)
            赋值 (., “觉然小便条”)
        .如果真结束
         ' 本源码来自易语言资源网(www.wodesoft.com)
    .如果真结束
    .如果真 (等于 (键代码_, #T键))
        赋值 (., 2)
        赋值 (., .)
        赋值 (., ..)
        赋值 (., ..)
        赋值 (., ..)
        赋值 (., ..)
        赋值 (., ..)
        赋值 (., ..)
        .如果真 (打开 ())
            赋值 (., .)
            赋值 (.., .)
            赋值 (.., .)
            赋值 (.., .)
            赋值 (.., .)
            赋值 (.., .)
            赋值 (.., .)
        .如果真结束
        
    .如果真结束
    .如果真 (等于 (键代码_, #Q键))
        赋值 (., 取反 (.))
        赋值 (., .)
        赋值 (., 选择 (., “程序保持最前”, “程序取消最前”))
        歇息 (1000)
        赋值 (., “觉然小便条”)
    .如果真结束
    .如果真 (等于 (键代码_, 107))
        .如果真 (是否已修改)
            .如果真 (等于 (信息框 (“当真要重载？要知道，一旦重载，未保存的修改将被丢弃。”, 相加 (#询问图标, #确认取消钮), ), #确认钮))
                赋值 (., 到文本 (读入文件 (文件名)))
                赋值 (是否已修改, 假)
            .如果真结束
             ' 本源码来自易语言资源网(www.wodesoft.com)
        .如果真结束
        
    .如果真结束
    
.如果真结束

.如果真 (并且 (等于 (键代码_, #F1键), 不等于 (功能键状态_, 1), 不等于 (功能键状态_, 2), 不等于 (功能键状态_, 1)))
    .如果真 (.)
        赋值 (., 假)
        赋值 (是否已最前, 真)
    .如果真结束
    信息框 (相加 (“一款自用且实用的简约小便条程序。”, #换行符, “Ctrl + S = 以预设文件名保存当前编辑文档。”, #换行符, “Ctrl + A = 选择当前编辑文档的所有字符。”, #换行符, “Ctrl + L = 将当前编辑文档另存为新的文档。”, #换行符, “Ctrl + O = 在当前光标处读入一篇文档。”, #换行符, “Ctrl + T = 设置当前编辑文档的字体显示属性。”, #换行符, “Ctrl + Q = 设置或取消程序保持在最前。”, #换行符, “Ctrl + 双击 = 全屏或取消全屏。”, #换行符, “Ctrl + 右击 = 弹出操作菜单”, #换行符, “作者：觉然(论坛：大中华主义) QQ：897687618”), #信息图标, )
    赋值 (., 是否已最前)
.如果真结束


.子程序 _编辑框_内容被改变, 空白型, , 
赋值 (是否已修改, 真)

.子程序 __启动窗口_可否被关闭, 逻辑型, , 
.局部变量 按钮索引, 空白型, , , 
.局部变量 是否已最前, 逻辑型, , , 

.如果 (是否已修改)
    .如果真 (.)
        赋值 (., 假)
        赋值 (是否已最前, 真)
    .如果真结束
    赋值 (按钮索引, 信息框 (“文档已修改，请问是否保存？”, 相加 (#信息图标, #取消是否钮), “是否保存改动？”))
    .如果 (等于 (按钮索引, #取消钮))
        赋值 (., 是否已最前)
        返回 (假)
    .否则
        .如果真 (等于 (按钮索引, #是钮))
            写到文件 (文件名, 到字节集 (.))
        .如果真结束
        销毁 ()
        返回 (真)
    .如果结束
     ' 本源码来自易语言资源网(www.wodesoft.com)
.否则
    销毁 ()
.如果结束


.子程序 __启动窗口_托盘事件, 空白型, , 
.参数 操作类型, 整数型, , 

.如果真 (等于 (操作类型, 1))
    赋值 (., 取反 (.))
    .如果真 (等于 (., 假))
        赋值 (., 真)
        赋值 (., 假)
    .如果真结束
    
.如果真结束
.如果真 (等于 (操作类型, 3))
    __启动窗口_可否被关闭 ()
.如果真结束


.子程序 _保存_被选择, 空白型, , 
_编辑框_按下某键 (#S键, 1)

.子程序 _另存_被选择, 空白型, , 
_编辑框_按下某键 (#L键, 1)

.子程序 _读入_被选择, 空白型, , 
_编辑框_按下某键 (#O键, 1)

.子程序 _全选_被选择, 空白型, , 
_编辑框_按下某键 (#A键, 1)

.子程序 _字体_被选择, 空白型, , 
_编辑框_按下某键 (#T键, 1)

.子程序 _最前_被选择, 空白型, , 
_编辑框_按下某键 (#Q键, 1)

.子程序 _全屏_被选择, 空白型, , 
_编辑框_被双击 (0, 0, 1)

.子程序 _编辑框_被双击, 逻辑型, , 
.参数 横向位置, 整数型, , 
.参数 纵向位置, 整数型, , 
.参数 功能键状态, 整数型, , 

.如果真 (等于 (功能键状态, 1))
    赋值 (是否全屏, 取反 (是否全屏))
    赋值 (., 是否全屏)
    .如果 (是否全屏)
        赋值 (., 0)
        赋值 (原大小 [1], .)
        赋值 (原大小 [2], .)
        赋值 (原大小 [3], .)
        赋值 (原大小 [4], .)
        连续赋值 (0, ., .)
        赋值 (., 取屏幕宽度 ())
        赋值 (., 取屏幕高度 ())
    .否则
        赋值 (., 1)
        赋值 (., 原大小 [1])
        赋值 (., 原大小 [2])
        赋值 (., 原大小 [3])
        赋值 (., 原大小 [4])
    .如果结束
    
.如果真结束
 ' 本源码来自易语言资源网(www.wodesoft.com)

.子程序 _编辑框_鼠标右键被按下, 逻辑型, , 
.参数 横向位置, 整数型, , 
.参数 纵向位置, 整数型, , 
.参数 功能键状态, 整数型, , 

.如果真 (等于 (功能键状态, 1))
    弹出菜单 ()
.如果真结束
' 本源码来自易语言资源网(www.wodesoft.com)

.子程序 _重载_被选择, 空白型, , 
_编辑框_按下某键 (107, 1)

.程序集 __HIDDEN_TEMP_MOD__, , , 

.子程序 执行线程, 整数型, , 创建并启动一条线程，可重复使用以创建多条线程,成功返回句柄,失败返回0。
.参数 子程序, 子程序指针, , 欲执行的子程序地址。
.参数 参数, 整数型, 可空, 可提供欲执行的子程序的第一个参数。
.参数 立即执行, 逻辑型, 可空, 若此值为假，则建立的线程将被挂起，反之则立即执行。
.参数 线程ID, 整数型, 可空, 内核给新生成的线程分配的线程ID。提供参数时只能提供容器。




 ' 不属于任何一个程序集、类模块的函数：
