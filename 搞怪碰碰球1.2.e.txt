 ' 文件类型：Windows窗口程序

 ' 程序名称：搞怪碰碰球
 ' 程序描述：本程序使用易语言编程,易语言下载网址为:http://www.dywt.com.cn
 ' 程序作者：
 ' 邮政编码：
 ' 联系地址：
 ' 联系电话：
 ' 传真号码：
 ' 电子信箱：
 ' 主页地址：
 ' 版权声明：
 ' 版本号：1.0
 ' 创建号：0.0

窗口 _启动窗口 ' 在程序启动后自动调入本窗口
    左边 = 50
    顶边 = 50
    宽度 = 546
    高度 = 510
    鼠标指针 = { 0,0,0,0 }
    标记 = “”
    可视 = 真
    禁止 = 假
    边框 = 2
    底图方式 = 1
    底色 = -16777216 '  0xFF000000
    最大化按钮 = 假
    最小化按钮 = 假
    控制按钮 = 假
    位置 = 1
    可否移动 = 真
    背景音乐播放次数 = 0
    回车下移焦点 = 假
    Esc键关闭 = 假
    F1键打开帮助 = 假
    帮助标志值 = 0
    在任务栏中显示 = 真
    随意移动 = 假
    外形 = 0
    总在最前 = 假
    保持标题栏激活 = 真
    图标 =  ' 空
    背景音乐 =  ' 空
    标题 = “”
    帮助文件名 = “”

窗口 窗口荣誉榜
    左边 = 50
    顶边 = 50
    宽度 = 331
    高度 = 408
    鼠标指针 = { 0,0,0,0 }
    标记 = “”
    可视 = 真
    禁止 = 假
    边框 = 2
    底图方式 = 1
    底色 = -16777216 '  0xFF000000
    最大化按钮 = 假
    最小化按钮 = 假
    控制按钮 = 假
    位置 = 1
    可否移动 = 真
    背景音乐播放次数 = 0
    回车下移焦点 = 假
    Esc键关闭 = 真
    F1键打开帮助 = 假
    帮助标志值 = 0
    在任务栏中显示 = 真
    随意移动 = 假
    外形 = 0
    总在最前 = 假
    保持标题栏激活 = 真
    图标 =  ' 空
    背景音乐 =  ' 空
    标题 = “”
    帮助文件名 = “”

窗口 窗口入榜
    左边 = 50
    顶边 = 50
    宽度 = 331
    高度 = 263
    鼠标指针 = { 0,0,0,0 }
    标记 = “”
    可视 = 真
    禁止 = 假
    边框 = 2
    底图方式 = 1
    底色 = -16777216 '  0xFF000000
    最大化按钮 = 假
    最小化按钮 = 假
    控制按钮 = 假
    位置 = 1
    可否移动 = 真
    背景音乐播放次数 = 0
    回车下移焦点 = 假
    Esc键关闭 = 真
    F1键打开帮助 = 假
    帮助标志值 = 0
    在任务栏中显示 = 真
    随意移动 = 假
    外形 = 0
    总在最前 = 假
    保持标题栏激活 = 真
    图标 =  ' 空
    背景音乐 =  ' 空
    标题 = “”
    帮助文件名 = “”

窗口 窗口失败
    左边 = 50
    顶边 = 50
    宽度 = 331
    高度 = 233
    鼠标指针 = { 0,0,0,0 }
    标记 = “”
    可视 = 真
    禁止 = 假
    边框 = 2
    底图方式 = 1
    底色 = -16777216 '  0xFF000000
    最大化按钮 = 假
    最小化按钮 = 假
    控制按钮 = 假
    位置 = 1
    可否移动 = 真
    背景音乐播放次数 = 0
    回车下移焦点 = 假
    Esc键关闭 = 真
    F1键打开帮助 = 假
    帮助标志值 = 0
    在任务栏中显示 = 真
    随意移动 = 假
    外形 = 0
    总在最前 = 假
    保持标题栏激活 = 真
    图标 =  ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\窗口失败_图标.ico
    背景音乐 =  ' 空
    标题 = “”
    帮助文件名 = “”

窗口 窗口退出确认
    左边 = 50
    顶边 = 50
    宽度 = 331
    高度 = 233
    鼠标指针 = { 0,0,0,0 }
    标记 = “”
    可视 = 真
    禁止 = 假
    边框 = 2
    底图方式 = 1
    底色 = -16777216 '  0xFF000000
    最大化按钮 = 假
    最小化按钮 = 假
    控制按钮 = 假
    位置 = 1
    可否移动 = 真
    背景音乐播放次数 = 0
    回车下移焦点 = 假
    Esc键关闭 = 真
    F1键打开帮助 = 假
    帮助标志值 = 0
    在任务栏中显示 = 真
    随意移动 = 假
    外形 = 0
    总在最前 = 假
    保持标题栏激活 = 真
    图标 =  ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\窗口退出确认_图标.ico
    背景音乐 =  ' 空
    标题 = “”
    帮助文件名 = “”

窗口 窗口游戏说明
    左边 = 50
    顶边 = 50
    宽度 = 331
    高度 = 406
    鼠标指针 = { 0,0,0,0 }
    标记 = “”
    可视 = 真
    禁止 = 假
    边框 = 2
    底图方式 = 1
    底色 = -16777216 '  0xFF000000
    最大化按钮 = 假
    最小化按钮 = 假
    控制按钮 = 假
    位置 = 1
    可否移动 = 真
    背景音乐播放次数 = 0
    回车下移焦点 = 假
    Esc键关闭 = 真
    F1键打开帮助 = 假
    帮助标志值 = 0
    在任务栏中显示 = 真
    随意移动 = 假
    外形 = 0
    总在最前 = 假
    保持标题栏激活 = 真
    图标 =  ' 空
    背景音乐 =  ' 空
    标题 = “”
    帮助文件名 = “”



.声音 控件激活, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\控件激活", , 
.声音 控件选中, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\控件选中", , 
.声音 加入新球, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\加入新球", , 
.声音 选中1, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\选中1", , 
.声音 选中2, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\选中2", , 
.声音 选中3, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\选中3", , 
.声音 选中4, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\选中4", , 
.声音 选中5, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\选中5", , 
.声音 选中6, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\选中6", , 
.声音 移动1, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\移动1", , 
.声音 移动2, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\移动2", , 
.声音 移动3, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\移动3", , 
.声音 移动4, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\移动4", , 
.声音 移动5, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\移动5", , 
.声音 移动6, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\移动6", , 
.声音 无效球位, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\无效球位", , 
.声音 消除1, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\消除1", , 
.声音 消除2, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\消除2", , 
.声音 消除3, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\消除3", , 
.声音 消除4, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\消除4", , 
.声音 消除5, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\消除5", , 
.声音 消除6, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\消除6", , 
.声音 加分, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\加分", , 
.声音 入榜, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\入榜", , 
.声音 链接, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\链接", , 
.图片 白球原始, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\白球原始", , 
.图片 红球原始, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\红球原始", , 
.图片 蓝球原始, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\蓝球原始", , 
.图片 黄球原始, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\黄球原始", , 
.图片 绿球原始, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\绿球原始", , 
.图片 紫球原始, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\紫球原始", , 
.图片 褐球原始, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\褐球原始", , 
.图片 粉蓝原始, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\粉蓝原始", , 
.图片 白球闭眼, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\白球闭眼", , 
.图片 红球闭眼, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\红球闭眼", , 
.图片 蓝球闭眼, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\蓝球闭眼", , 
.图片 黄球闭眼, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\黄球闭眼", , 
.图片 绿球闭眼, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\绿球闭眼", , 
.图片 紫球闭眼, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\紫球闭眼", , 
.图片 褐球闭眼, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\褐球闭眼", , 
.图片 粉蓝闭眼, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\粉蓝闭眼", , 
.图片 白球中看, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\白球中看", , 
.图片 红球中看, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\红球中看", , 
.图片 蓝球中看, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\蓝球中看", , 
.图片 黄球中看, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\黄球中看", , 
.图片 绿球中看, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\绿球中看", , 
.图片 紫球中看, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\紫球中看", , 
.图片 褐球中看, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\褐球中看", , 
.图片 粉蓝中看, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\粉蓝中看", , 
.图片 白球左看, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\白球左看", , 
.图片 红球左看, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\红球左看", , 
.图片 蓝球左看, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\蓝球左看", , 
.图片 黄球左看, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\黄球左看", , 
.图片 绿球左看, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\绿球左看", , 
.图片 紫球左看, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\紫球左看", , 
.图片 褐球左看, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\褐球左看", , 
.图片 粉蓝左看, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\粉蓝左看", , 
.图片 白球右看, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\白球右看", , 
.图片 红球右看, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\红球右看", , 
.图片 蓝球右看, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\蓝球右看", , 
.图片 黄球右看, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\黄球右看", , 
.图片 绿球右看, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\绿球右看", , 
.图片 紫球右看, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\紫球右看", , 
.图片 褐球右看, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\褐球右看", , 
.图片 粉蓝右看, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\粉蓝右看", , 
.图片 白球上看, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\白球上看", , 
.图片 红球上看, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\红球上看", , 
.图片 蓝球上看, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\蓝球上看", , 
.图片 黄球上看, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\黄球上看", , 
.图片 绿球上看, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\绿球上看", , 
.图片 紫球上看, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\紫球上看", , 
.图片 褐球上看, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\褐球上看", , 
.图片 粉蓝上看, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\粉蓝上看", , 
.图片 白球下看, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\白球下看", , 
.图片 红球下看, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\红球下看", , 
.图片 蓝球下看, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\蓝球下看", , 
.图片 黄球下看, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\黄球下看", , 
.图片 绿球下看, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\绿球下看", , 
.图片 紫球下看, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\紫球下看", , 
.图片 褐球下看, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\褐球下看", , 
.图片 粉蓝下看, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\粉蓝下看", , 
.图片 白球消除, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\白球消除", , 
.图片 红球消除, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\红球消除", , 
.图片 蓝球消除, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\蓝球消除", , 
.图片 黄球消除, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\黄球消除", , 
.图片 绿球消除, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\绿球消除", , 
.图片 紫球消除, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\紫球消除", , 
.图片 褐球消除, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\褐球消除", , 
.图片 粉蓝消除, " ' 已保存到：D:\易语言学习\Data\搞怪碰碰球1.2.e\粉蓝消除", , 


 ' 所需要的支持库：
 ' krnln d09f2340818511d396f6aaf844c7e325 4 4 系统核心支持库
 ' iext 27bb20fdd3e145e4bee3db39ddd6e64c 1 2 扩展界面支持库一





.窗口程序集 启动窗口程序集, , , 

.程序集变量 球位, 整数型, , "81", 9×9大小
.程序集变量 后继球, 整数型, , "0", 开局成员5 局中成员3
.程序集变量 选中球位, 整数型, , , 
.程序集变量 球形状态, 整数型, , , 保留中间动画状态
.程序集变量 分数, 整数型, , , 
.程序集变量 控件被激活, 逻辑型, , , 音效控制用
.程序集变量 荣誉榜, 文本型, , "0", 有效成员数10,成员前7位是分数
.程序集变量 配置文件名, 文本型, , , 
.程序集变量 玩家名称, 文本型, , , 由窗口入榜修改
.子程序 __启动窗口_创建完毕, 空白型, , 
.局部变量 变量, 整数型, , , 
.局部变量 文本分数, 文本型, , , 
.局部变量 新榜内容, 文本型, , , 

赋值 (., 相加 (相减 (., 取用户区高度 ()), 485)) ' 避免XP风格下窗体变形
赋值 (., 相加 (相减 (., 取用户区宽度 ()), 540))
赋值 (.左边, 20)
赋值 (.顶边, 61)
赋值 (.画笔粗细, 0)
赋值 (.刷子类型, 1)
赋值 (.画笔粗细, 0)
赋值 (.刷子类型, 1)
赋值 (.左边, 401)
赋值 (.顶边, 93)
赋值 (.画笔粗细, 0)
赋值 (.画笔颜色, #深灰)
赋值 (.刷子类型, 1)
赋值 (.刷子颜色, #黑色)
赋值 (.左边, 408)
赋值 (.顶边, 186)
赋值 (.左边, 282)
赋值 (.顶边, 458)
赋值 (.左边, 430)
赋值 (.顶边, 455)

赋值 (球形状态, 2)
.计次循环首 (3, 变量) ' 画后继球画板纵分隔线
    相乘 (相减 (变量, 1), 40).画直线 (0, 相乘 (相减 (变量, 1), 40), .高度)
.计次循环尾 ()
0.画直线 (0, .宽度, 0)

赋值 (配置文件名, 相加 (取运行目录 (), “\gaoguai.ini”)) ' 更新荣誉榜
重定义数组 (荣誉榜, 假, 10)
.如果 (等于 (文件是否存在 (配置文件名), 假))
    .计次循环首 (10, 变量)
        赋值 (文本分数, 到文本 (多项选择 (变量, 870, 640, 500, 320, 210, 170, 135, 100, 55, 20)))
        赋值 (文本分数, 相加 (取重复文本 (相减 (7, 取文本长度 (文本分数)), “0”), 文本分数))
        赋值 (荣誉榜 [变量], 相加 (文本分数, “搞怪”))
        赋值 (新榜内容, 相加 (新榜内容, 荣誉榜 [变量], #换行符))
    .计次循环尾 ()
    写到文件 (配置文件名, 到字节集 (新榜内容))
.否则
    复制数组 (荣誉榜, 分割文本 (取字节集数据 (读入文件 (配置文件名), #文本型), #换行符, 10))
.如果结束
赋值 (.标题, 文本替换 (荣誉榜 [1], 1, 7, ))
画分数标签 (到数值 (取文本左边 (荣誉榜 [1], 7)), )

_图形按钮开始游戏_被单击 ()

.子程序 _画板游戏区_鼠标左键被按下, 逻辑型, , 
.参数 横向位置, 整数型, , 
.参数 纵向位置, 整数型, , 
.参数 功能键状态, 整数型, , 

.局部变量 现球位, 整数型, , , 
.局部变量 球位数组, 整数型, , "0", 
.局部变量 临时数组, 整数型, , "0", 
.局部变量 变量, 整数型, , , 

.如果真 (或者 (小于 (横向位置, 0), 大于 (横向位置, 360), 小于 (纵向位置, 0), 大于 (纵向位置, 360)))
    返回 (假)
.如果真结束
赋值 (现球位, 相加 (相乘 (整除 (纵向位置, 40), 9), 整除 (横向位置, 40), 1))
.如果真 (并且 (等于 (球位 [现球位], 0), 等于 (选中球位, 0))) ' 空位且未选中球
    返回 (假)
.如果真结束
.如果真 (等于 (现球位, 选中球位))
    返回 (假)
.如果真结束
.如果真 (大于 (球位 [现球位], 0)) ' 非空位,之前无论是否已有选中,均更改选中球位
    播放音乐 (多项选择 (取随机数 (1, 6), #选中1, #选中2, #选中3, #选中4, #选中5, #选中6), )
    .如果真 (大于 (选中球位, 0))
        画球形 (选中球位, 球位 [选中球位], 1)
    .如果真结束
    赋值 (选中球位, 现球位)
    赋值 (球形状态, 取随机数 (2, 6))
    画球形 (现球位, 球位 [现球位], 球形状态)
    赋值 (.时钟周期, 180) ' 开始球位选中动画
    返回 (假)
.如果真结束
 ' 剩下一种情况：现球位为空位但之前已选中球。需要判断是否能够将所选中的球移动到现球位
.如果真 (等于 (判断球位连通性 (选中球位, 现球位, 球位数组), 假))
    播放音乐 (#无效球位, )
    返回 (假)
.如果真结束
 ' 现在可以移动选中球
赋值 (.时钟周期, 0)
.如果真 (大于 (取数组成员数 (球位数组), 4))
    播放音乐 (多项选择 (取随机数 (1, 6), #移动1, #移动2, #移动3, #移动4, #移动5, #移动6), )
.如果真结束
画球位移动动画 (球位数组)
赋值 (球位 [现球位], 球位 [选中球位])
连续赋值 (0, 球位 [选中球位], 选中球位)
 ' 现在判断是否可以消除
清除数组 (球位数组)
.如果真 (等于 (判断是否可消除 (现球位, 球位数组), 假))
    .如果真 (等于 (画随机后继球 (), 假)) ' 画不了新球就是游戏结束
        显示游戏结束动画 ()
        返回 (假)
    .如果真结束
    画球形 (现球位, 球位 [现球位], 1)
    生成随机后继球 (真)
    返回 (假)
.如果真结束
 ' 可以消除,现在开始显示消球动画
播放音乐 (多项选择 (取随机数 (1, 6), #消除1, #消除2, #消除3, #消除4, #消除5, #消除6), )
数组排序 (球位数组, )
赋值 (现球位, 0) ' 用于去除被重复计算的球位
.计次循环首 (取数组成员数 (球位数组), 变量)
    .如果真 (等于 (球位数组 [变量], 现球位)) ' 已排序过,去除连续重复球位
        到循环尾 ()
    .如果真结束
    赋值 (现球位, 球位数组 [变量]) ' 记录当前不重复球位
    加入成员 (临时数组, 现球位)
.计次循环尾 ()
画球位消除动画 (临时数组)
.计次循环首 (取数组成员数 (临时数组), 变量) ' 清除已消除球位球色
    赋值 (球位 [临时数组] [变量], 0)
.计次循环尾 ()
 ' 开始加分
播放音乐 (#加分, )
赋值 (分数, 相加 (分数, 相乘 (相减 (取数组成员数 (临时数组), 5), 5), 10))
画分数标签 (分数, )
返回 (假)

.子程序 生成随机后继球, 空白型, , 
.参数 画板显示, 逻辑型, , 

.局部变量 变量, 整数型, , , 
.局部变量 变量1, 整数型, , , 
.局部变量 图片号, 空白型, , , 

置随机数种子 ()
.计次循环首 (取数组成员数 (后继球), 变量) ' 开局成员5,局中成员3.因此此处取数组成员数
    赋值 (后继球 [变量], 取随机数 (1, 8))
    .如果真 (等于 (后继球 [变量], 1))
        赋值 (后继球 [变量], 选择 (等于 (取随机数 (1, 10), 1), 1, 取随机数 (2, 8))) ' 降低白球出现机率
    .如果真结束
    .如果真 (画板显示)
        赋值 (.画笔颜色, #黑色)
        赋值 (.刷子颜色, #黑色)
        0.画矩形 (0, 40, 40)
        赋值 (图片号, 载入图片 (取球形位图 (后继球 [变量], 0)))
        图片号.画图片 (0, 0, , , 负 (#品红))
        0.复制 (0, 39, 39, , 相加 (相乘 (相减 (变量, 1), 40), 1), 1, )
        卸载图片 (图片号)
    .如果真结束
    
.计次循环尾 ()

.子程序 计算球位绝对坐标, 空白型, , 
.参数 球位号, 整数型, , 
.参数 横坐标, 整数型, 参考, 
.参数 纵坐标, 整数型, 参考, 

赋值 (横坐标, 相乘 (求余数 (相减 (球位号, 1), 9), 40))
赋值 (纵坐标, 相乘 (整除 (相减 (球位号, 1), 9), 40))

.子程序 计算球位相对坐标, 空白型, , 
.参数 球位号, 整数型, , 
.参数 横坐标, 整数型, 参考, 
.参数 纵坐标, 整数型, 参考, 

赋值 (横坐标, 相加 (求余数 (相减 (球位号, 1), 9), 1))
赋值 (纵坐标, 相加 (整除 (相减 (球位号, 1), 9), 1))

.子程序 计算相对坐标球位, 整数型, , 
.参数 横坐标, 整数型, , 
.参数 纵坐标, 整数型, , 

.如果真 (或者 (小于或等于 (横坐标, 0), 大于 (横坐标, 9), 小于或等于 (纵坐标, 0), 大于 (纵坐标, 9)))
    返回 (-1)
.如果真结束
返回 (相加 (相乘 (相减 (纵坐标, 1), 9), 横坐标))

.子程序 判断球位连通性, 逻辑型, , 
.参数 起始球位, 整数型, , 
.参数 终止球位, 整数型, , 
.参数 连通路径, 整数型, 数组, 

.局部变量 父球位, 整数型, , , 
.局部变量 访问标志, 整数型, , "81", 0代表未访问过,访问后保存此球位的父球位,-1代表为起始球位
.局部变量 空位数组, 整数型, , "0", 
.局部变量 当前球位, 整数型, , , 
.局部变量 横坐标, 整数型, , , 
.局部变量 纵坐标, 整数型, , , 
.局部变量 临时坐标, 整数型, , , 
.局部变量 变量, 整数型, , , 

 ' 因迷宫区域仅9×9大小,因此采用广度优先算法寻找最短路径,不会造成队列溢出.
清除数组 (连通路径)
计算球位相对坐标 (起始球位, 横坐标, 纵坐标)
赋值 (访问标志 [起始球位], -1)
赋值 (父球位, 起始球位)
.判断循环首 (真)
    .计次循环首 (4, 变量) ' 分别检查四周的球位
        赋值 (临时坐标, 多项选择 (变量, 相减 (横坐标, 1), 相加 (横坐标, 1), 相加 (纵坐标, 1), 相减 (纵坐标, 1)))
        .如果 (小于或等于 (变量, 2))
            赋值 (当前球位, 计算相对坐标球位 (临时坐标, 纵坐标))
        .否则
            赋值 (当前球位, 计算相对坐标球位 (横坐标, 临时坐标))
        .如果结束
        
        .如果真 (等于 (当前球位, -1))
            到循环尾 ()
        .如果真结束
        .如果真 (等于 (当前球位, 终止球位)) ' 遍历到达终止球位
            插入成员 (连通路径, 1, 终止球位)
            .判断循环首 (不等于 (访问标志 [父球位], -1)) ' 开始向根节点倒退,获得最短路径
                插入成员 (连通路径, 1, 父球位)
                赋值 (父球位, 访问标志 [父球位])
            .判断循环尾 ()
            插入成员 (连通路径, 1, 起始球位)
            返回 (真)
        .如果真结束
        .如果真 (并且 (等于 (球位 [当前球位], 0), 等于 (访问标志 [当前球位], 0))) ' 当前球位是空位且未访问过
            加入成员 (空位数组, 当前球位)
            赋值 (访问标志 [当前球位], 父球位)
        .如果真结束
        
    .计次循环尾 ()
    .如果真 (等于 (取数组成员数 (空位数组), 0))
        返回 (假)
    .如果真结束
    赋值 (父球位, 空位数组 [1])
    计算球位相对坐标 (空位数组 [1], 横坐标, 纵坐标)
    删除成员 (空位数组, 1, 1)
.判断循环尾 ()
返回 (假)

.子程序 画球形, 空白型, , 
.参数 球位号, 整数型, , 
.参数 球色, 整数型, , 
.参数 状态, 整数型, , 

.局部变量 横坐标, 整数型, , , 
.局部变量 纵坐标, 整数型, , , 
.局部变量 图片号, 整数型, , , 

.如果真 (等于 (球位号, 0))
    返回 ()
.如果真结束
计算球位绝对坐标 (球位号, 横坐标, 纵坐标)
.如果 (等于 (球色, 0)) ' 球色=0代表仅清除当前球位
    连续赋值 (选择 (等于 (求余数 (球位号, 2), 0), #黑色, 取颜色值 (33, 32, 33)), .刷子颜色, .画笔颜色)
    相加 (横坐标, 1).画矩形 (相加 (纵坐标, 1), 相加 (横坐标, 40), 相加 (纵坐标, 40)) ' 画底色,清除当前球位
    返回 ()
.否则
    连续赋值 (选择 (等于 (求余数 (球位号, 2), 0), #黑色, 取颜色值 (33, 32, 33)), .刷子颜色, .画笔颜色)
    0.画矩形 (0, 40, 40) ' 画底色
.如果结束
赋值 (图片号, 载入图片 (取球形位图 (球色, 状态)))
图片号.画图片 (0, 0, 40, 40, 负 (#品红))
0.复制 (0, 40, 40, , 相加 (横坐标, 1), 相加 (纵坐标, 1), )
卸载图片 (图片号)

.子程序 画球位移动动画, 空白型, , 
.参数 移动路径, 整数型, 数组, 

.局部变量 变量, 整数型, , , 

.变量循环首 (2, 取数组成员数 (移动路径), 1, 变量)
    画球形 (移动路径 [相减 (变量, 1)], 0, 0)
    画球形 (移动路径 [变量], 球位 [移动路径] [1], 球形状态)
    延时 (50)
.变量循环尾 ()

.子程序 判断是否可消除, 逻辑型, , 
.参数 球位号, 整数型, , 
.参数 可消球位, 整数型, 数组, 

.局部变量 横坐标, 整数型, , , 
.局部变量 纵坐标, 整数型, , , 
.局部变量 当前横坐标, 整数型, , , 
.局部变量 当前纵坐标, 整数型, , , 
.局部变量 当前球位, 整数型, , , 
.局部变量 同色球位, 整数型, , "0", 
.局部变量 变量, 整数型, , , 
.局部变量 次数, 整数型, , , 
.局部变量 全白球, 逻辑型, , , 
.局部变量 当前球色, 整数型, 静态, , 

.如果真 (等于 (球位 [球位号], 1)) ' 如果是白球,就用另外7种颜色都尝试一次
    赋值 (当前球色, 0) ' 2.53版递归调用时子程序变量值有误,因此加多一静态变量
    .计次循环首 (7, 当前球色)
        赋值 (球位 [球位号], 相加 (当前球色, 1))
        判断是否可消除 (球位号, 可消球位) ' 白球同时可能在多组中代表不同颜色
    .计次循环尾 ()
    赋值 (球位 [球位号], 1)
    .如果 (大于 (取数组成员数 (可消球位), 0))
        返回 (真)
    .否则
        返回 (假)
    .如果结束
    
.如果真结束
计算球位相对坐标 (球位号, 横坐标, 纵坐标)
.计次循环首 (4, 次数) ' 横向,竖向,左上右下,左下右上
    清除数组 (同色球位)
    加入成员 (同色球位, 球位号)
    .计次循环首 (2, 变量)
        赋值 (当前横坐标, 选择 (等于 (次数, 2), 横坐标, 多项选择 (变量, 相减 (横坐标, 1), 相加 (横坐标, 1))))
        赋值 (当前纵坐标, 多项选择 (次数, 纵坐标, 多项选择 (变量, 相减 (纵坐标, 1), 相加 (纵坐标, 1)), 多项选择 (变量, 相减 (纵坐标, 1), 相加 (纵坐标, 1)), 多项选择 (变量, 相加 (纵坐标, 1), 相减 (纵坐标, 1))))
        赋值 (当前球位, 计算相对坐标球位 (当前横坐标, 当前纵坐标))
        .判断循环首 (不等于 (当前球位, -1))
            .如果真 (或者 (等于 (球位号, 0), 等于 (当前球位, 0)))
                返回 (假)
            .如果真结束
            .如果真 (并且 (不等于 (球位 [当前球位], 球位 [球位号]), 不等于 (球位 [当前球位], 1)))
                跳出循环 ()
            .如果真结束
            .如果 (等于 (变量, 1)) ' 两个方向一组,为保证球位顺序便于动画显示,分别向前插入和向后加入
                插入成员 (同色球位, 1, 当前球位)
            .否则
                加入成员 (同色球位, 当前球位)
            .如果结束
            赋值 (当前横坐标, 选择 (等于 (次数, 2), 横坐标, 多项选择 (变量, 相减 (当前横坐标, 1), 相加 (当前横坐标, 1))))
            赋值 (当前纵坐标, 多项选择 (次数, 当前纵坐标, 多项选择 (变量, 相减 (当前纵坐标, 1), 相加 (当前纵坐标, 1)), 多项选择 (变量, 相减 (当前纵坐标, 1), 相加 (当前纵坐标, 1)), 多项选择 (变量, 相加 (当前纵坐标, 1), 相减 (当前纵坐标, 1))))
            赋值 (当前球位, 计算相对坐标球位 (当前横坐标, 当前纵坐标))
        .判断循环尾 ()
    .计次循环尾 ()
    .如果真 (大于或等于 (取数组成员数 (同色球位), 5))
        加入成员 (可消球位, 同色球位) ' 没有直接跳出,考虑同时消除两组以上情况发生
    .如果真结束
    
.计次循环尾 ()
.如果 (大于 (取数组成员数 (可消球位), 0))
    返回 (真)
.否则
    返回 (假)
.如果结束


.子程序 画球位消除动画, 空白型, , 
.参数 可消球位, 整数型, 数组, 

.局部变量 变量, 整数型, , , 
.局部变量 次数, 整数型, , , 

.计次循环首 (6, 次数)
    .计次循环首 (取数组成员数 (可消球位), 变量)
        画球形 (可消球位 [变量], 0, 0)
    .计次循环尾 ()
    延时 (50)
    .如果真 (大于或等于 (次数, 6)) ' 最后一次仅清除
        跳出循环 ()
    .如果真结束
    .计次循环首 (取数组成员数 (可消球位), 变量)
        画球形 (可消球位 [变量], 球位 [可消球位] [变量], 7)
    .计次循环尾 ()
    延时 (100)
.计次循环尾 ()

.子程序 画分数标签, 空白型, , 
.参数 分数, 整数型, , 
.参数 标签, 标签, , 

.局部变量 文本分数, 文本型, , , 
.局部变量 结果文本, 文本型, , , 
.局部变量 变量, 整数型, , , 

赋值 (文本分数, 到文本 (分数))
赋值 (文本分数, 相加 (取重复文本 (相减 (7, 取文本长度 (文本分数)), “0”), 文本分数))
.计次循环首 (7, 变量)
    赋值 (结果文本, 相加 (结果文本, 取文本中间 (文本分数, 变量, 1), “ ”))
.计次循环尾 ()
赋值 (标签.标题, 取文本左边 (结果文本, 13))

.子程序 画随机后继球, 逻辑型, , 返回假代表画后继球失败,即球位已满
.局部变量 空位数组, 整数型, , "0", 
.局部变量 随机数, 整数型, , , 
.局部变量 可消球位, 整数型, , "0", 
.局部变量 变量, 整数型, , , 
.局部变量 次数, 整数型, , , 
.局部变量 序号, 整数型, , , 
.局部变量 图片号, 整数型, , , 
.局部变量 横坐标, 整数型, , , 
.局部变量 纵坐标, 整数型, , , 
.局部变量 临时数组, 整数型, , "0", 

赋值 (.时钟周期, 0)
.如果真 (等于 (取数组成员数 (后继球), 3)) ' 开局不播放声音特效
    播放音乐 (#加入新球, )
.如果真结束

.计次循环首 (81, 变量)
    .如果真 (等于 (球位 [变量], 0))
        加入成员 (空位数组, 变量)
    .如果真结束
    
.计次循环尾 ()
置随机数种子 ()
.计次循环首 (取数组成员数 (后继球), 变量)
    .如果真 (等于 (取数组成员数 (空位数组), 0)) ' 球位已满
        返回 (假)
    .如果真结束
    赋值 (随机数, 取随机数 (1, 取数组成员数 (空位数组)))
    .如果真 (等于 (取数组成员数 (后继球), 3)) ' 开局不画动画特效
        计算球位绝对坐标 (空位数组 [随机数], 横坐标, 纵坐标)
        连续赋值 (选择 (等于 (求余数 (空位数组 [随机数], 2), 0), #黑色, 取颜色值 (33, 32, 33)), .刷子颜色, .画笔颜色)
        0.画矩形 (0, 40, 40)
        赋值 (图片号, 载入图片 (取球形位图 (后继球 [变量], 0)))
        .计次循环首 (3, 次数) ' 球形变大动画
            图片号.画图片 (多项选择 (次数, 16, 12, 8), 多项选择 (次数, 16, 12, 8), 多项选择 (次数, 8, 16, 24), 多项选择 (次数, 8, 16, 24), 负 (#品红))
            0.复制 (0, 40, 40, , 相加 (横坐标, 1), 相加 (纵坐标, 1), )
            延时 (30)
        .计次循环尾 ()
        卸载图片 (图片号)
    .如果真结束
    画球形 (空位数组 [随机数], 后继球 [变量], 1)
    赋值 (球位 [空位数组] [随机数], 后继球 [变量])
    清除数组 (可消球位)
    清除数组 (临时数组)
    .如果真 (判断是否可消除 (空位数组 [随机数], 可消球位))
        播放音乐 (多项选择 (取随机数 (1, 6), #消除1, #消除2, #消除3, #消除4, #消除5, #消除6), )
        数组排序 (可消球位, )
        赋值 (次数, 0) ' 开始去除重复计算球位
        .计次循环首 (取数组成员数 (可消球位), 序号)
            .如果真 (等于 (可消球位 [序号], 次数))
                到循环尾 ()
            .如果真结束
            赋值 (次数, 可消球位 [序号])
            加入成员 (临时数组, 次数)
        .计次循环尾 ()
        画球位消除动画 (临时数组)
        .计次循环首 (取数组成员数 (临时数组), 序号) ' 清除球位
            赋值 (球位 [临时数组] [序号], 0)
            加入成员 (空位数组, 临时数组 [序号])
        .计次循环尾 ()
        播放音乐 (#加分, )
        赋值 (分数, 相加 (分数, 相乘 (相减 (取数组成员数 (临时数组), 5), 5), 10))
        画分数标签 (分数, )
    .如果真结束
    删除成员 (空位数组, 随机数, 1)
.计次循环尾 ()
.如果真 (等于 (取数组成员数 (空位数组), 0))
    返回 (假)
.如果真结束
返回 (真)

.子程序 _图形按钮关闭_被单击, 空白型, , 
播放音乐 (#控件选中, )
载入 (窗口退出确认, _启动窗口, 真)

.子程序 _图形按钮最小化_被单击, 空白型, , 
播放音乐 (#控件选中, )
赋值 (., 2)

.子程序 _图形按钮开始游戏_被单击, 空白型, , 
.局部变量 变量, 空白型, , , 
.局部变量 横坐标, 整数型, , , 
.局部变量 纵坐标, 整数型, , , 

.如果真 (不等于 (取数组成员数 (后继球), 0))
    播放音乐 (#控件选中, )
.如果真结束
禁止重画 ()
赋值 (.时钟周期, 0)
赋值 (分数, 0)
画分数标签 (分数, )
重定义数组 (球位, 假, 81)

.计次循环首 (81, 变量) ' 绘制棋盘格底色
    计算球位绝对坐标 (变量, 横坐标, 纵坐标)
    连续赋值 (选择 (等于 (求余数 (变量, 2), 0), #黑色, 取颜色值 (33, 32, 33)), .刷子颜色, .画笔颜色)
    横坐标.画矩形 (纵坐标, 相加 (横坐标, 40), 相加 (纵坐标, 40))
.计次循环尾 ()
赋值 (.画笔颜色, #深灰)
.计次循环首 (9, 变量) ' 画分隔线
    相乘 (相减 (变量, 1), 40).画直线 (0, 相乘 (相减 (变量, 1), 40), .高度)
    0.画直线 (相乘 (相减 (变量, 1), 40), .宽度, 相乘 (相减 (变量, 1), 40))
.计次循环尾 ()

重定义数组 (后继球, 假, 5) ' 开局随机加五个球
生成随机后继球 (假)
画随机后继球 ()
重定义数组 (后继球, 假, 3)
生成随机后继球 (真)
赋值 (选中球位, 0)
允许重画 ()

.子程序 _图形按钮游戏说明_被单击, 空白型, , 
.局部变量 说明, 文本型, , , 

播放音乐 (#控件选中, )
载入 (窗口游戏说明, _启动窗口, 真)

.子程序 _时钟选中动画_周期事件, 空白型, , 
.局部变量 偏移量, 整数型, 静态, , 
.局部变量 次数, 整数型, 静态, , 
.局部变量 图片号, 整数型, , , 
.局部变量 横坐标, 整数型, , , 
.局部变量 纵坐标, 整数型, , , 

赋值 (偏移量, 相加 (偏移量, 1))
.如果真 (大于或等于 (偏移量, 5))
    赋值 (偏移量, 1)
.如果真结束
连续赋值 (选择 (等于 (求余数 (选中球位, 2), 0), #黑色, 取颜色值 (33, 32, 33)), .刷子颜色, .画笔颜色)
0.画矩形 (0, 40, 40) ' 画底色
 ' 减少眼珠活动次数,并避免眼珠从左跳到右,或从上跳到下
.如果真 (或者 (等于 (求余数 (次数, 5), 0), 等于 (球形状态, 1))) ' 闭眼时(状态=1)立刻睁开
    .判断开始 (等于 (球形状态, 2))
        赋值 (球形状态, 取随机数 (1, 5))
    .判断 (等于 (球形状态, 3))
        赋值 (球形状态, 多项选择 (取随机数 (1, 4), 3, 2, 5, 6))
    .判断 (等于 (球形状态, 4))
        赋值 (球形状态, 多项选择 (取随机数 (1, 4), 4, 2, 5, 6))
    .判断 (或者 (等于 (球形状态, 5), 等于 (球形状态, 6)))
        赋值 (球形状态, 多项选择 (取随机数 (1, 4), 5, 2, 3, 4))
    .默认
        赋值 (球形状态, 2)
    .判断结束
    
.如果真结束
赋值 (次数, 相加 (次数, 1))
赋值 (图片号, 载入图片 (取球形位图 (球位 [选中球位], 球形状态)))
图片号.画图片 (0, 多项选择 (偏移量, -2, 0, 2, 0), , , 负 (#品红))
卸载图片 (图片号)
计算球位绝对坐标 (选中球位, 横坐标, 纵坐标)
0.复制 (0, 40, 40, , 相加 (横坐标, 1), 相加 (纵坐标, 1), )

.子程序 显示游戏结束动画, 空白型, , 
.局部变量 入榜, 逻辑型, , , 
.局部变量 榜上排名, 整数型, , , 
.局部变量 新榜内容, 文本型, , , 
.局部变量 变量, 整数型, , , 
.局部变量 文本分数, 文本型, , , 
.局部变量 位数, 整数型, , , 
.局部变量 结果文本, 文本型, , , 
.局部变量 标记组件, 标签, , , 
.局部变量 文本数组, 文本型, , "0", 

清除数组 (后继球)
赋值 (.时钟周期, 0)

赋值 (文本分数, 到文本 (分数))
赋值 (文本分数, 相加 (取重复文本 (相减 (7, 取文本长度 (文本分数)), “0”), 文本分数))
.计次循环首 (10, 变量)
    .如果真 (大于 (文本分数, 荣誉榜 [变量]))
        赋值 (入榜, 真)
        赋值 (榜上排名, 变量)
        跳出循环 ()
    .如果真结束
    
.计次循环尾 ()
.如果 (入榜)
    播放音乐 (#入榜, )
    载入 (窗口入榜, _启动窗口, 真)
    插入成员 (荣誉榜, 榜上排名, 相加 (文本分数, 玩家名称)) ' 入榜窗口中必定调用获取玩家名称子程序
    .计次循环首 (10, 变量)
        赋值 (新榜内容, 相加 (新榜内容, 荣誉榜 [变量], #换行符))
    .计次循环尾 ()
    写到文件 (配置文件名, 到字节集 (新榜内容)) ' 每次上榜都及时写入配置文件
    载入 (窗口荣誉榜, _启动窗口, 真)
.否则
    播放音乐 (#无效球位, )
    载入 (窗口失败, _启动窗口, 真)
.如果结束
_图形按钮开始游戏_被单击 ()

.子程序 取球形位图, 字节集, , 
.参数 球色, 整数型, , 
.参数 状态, 整数型, , 

.如果真 (等于 (球色, 0))
    返回 ({  })
.如果真结束
.判断开始 (等于 (状态, 0)) ' 原始球形
    返回 (多项选择 (球色, #白球原始, #红球原始, #蓝球原始, #黄球原始, #绿球原始, #紫球原始, #褐球原始, #粉蓝原始))
.判断 (等于 (状态, 1)) ' 静默球形
    返回 (多项选择 (球色, #白球闭眼, #红球闭眼, #蓝球闭眼, #黄球闭眼, #绿球闭眼, #紫球闭眼, #褐球闭眼, #粉蓝闭眼))
.判断 (等于 (状态, 2)) ' 中看球形
    返回 (多项选择 (球色, #白球中看, #红球中看, #蓝球中看, #黄球中看, #绿球中看, #紫球中看, #褐球中看, #粉蓝中看))
.判断 (等于 (状态, 3)) ' 左看球形
    返回 (多项选择 (球色, #白球左看, #红球左看, #蓝球左看, #黄球左看, #绿球左看, #紫球左看, #褐球左看, #粉蓝左看))
.判断 (等于 (状态, 4)) ' 右看球形
    返回 (多项选择 (球色, #白球右看, #红球右看, #蓝球右看, #黄球右看, #绿球右看, #紫球右看, #褐球右看, #粉蓝右看))
.判断 (等于 (状态, 5)) ' 上看球形
    返回 (多项选择 (球色, #白球上看, #红球上看, #蓝球上看, #黄球上看, #绿球上看, #紫球上看, #褐球上看, #粉蓝上看))
.判断 (等于 (状态, 6)) ' 下看球形
    返回 (多项选择 (球色, #白球下看, #红球下看, #蓝球下看, #黄球下看, #绿球下看, #紫球下看, #褐球下看, #粉蓝下看))
.判断 (等于 (状态, 7)) ' 消除球形
    返回 (多项选择 (球色, #白球消除, #红球消除, #蓝球消除, #黄球消除, #绿球消除, #紫球消除, #褐球消除, #粉蓝消除))
.默认
    
.判断结束
返回 ({  })

.子程序 _图形按钮开始游戏_鼠标位置被移动, 逻辑型, , 
.参数 横向位置, 整数型, , 
.参数 纵向位置, 整数型, , 
.参数 功能键状态, 整数型, , 

.如果真 (等于 (控件被激活, 假))
    赋值 (控件被激活, 真)
    播放音乐 (#控件激活, )
.如果真结束


.子程序 _图形按钮荣誉榜_鼠标位置被移动, 逻辑型, , 
.参数 横向位置, 整数型, , 
.参数 纵向位置, 整数型, , 
.参数 功能键状态, 整数型, , 

.如果真 (等于 (控件被激活, 假))
    赋值 (控件被激活, 真)
    播放音乐 (#控件激活, )
.如果真结束


.子程序 _图形按钮游戏说明_鼠标位置被移动, 逻辑型, , 
.参数 横向位置, 整数型, , 
.参数 纵向位置, 整数型, , 
.参数 功能键状态, 整数型, , 

.如果真 (等于 (控件被激活, 假))
    赋值 (控件被激活, 真)
    播放音乐 (#控件激活, )
.如果真结束


.子程序 _图形按钮最小化_鼠标位置被移动, 逻辑型, , 
.参数 横向位置, 整数型, , 
.参数 纵向位置, 整数型, , 
.参数 功能键状态, 整数型, , 

.如果真 (等于 (控件被激活, 假))
    赋值 (控件被激活, 真)
    播放音乐 (#控件激活, )
.如果真结束


.子程序 _图形按钮关闭_鼠标位置被移动, 逻辑型, , 
.参数 横向位置, 整数型, , 
.参数 纵向位置, 整数型, , 
.参数 功能键状态, 整数型, , 

.如果真 (等于 (控件被激活, 假))
    赋值 (控件被激活, 真)
    播放音乐 (#控件激活, )
.如果真结束


.子程序 __启动窗口_鼠标位置被移动, 逻辑型, , 
.参数 横向位置, 整数型, , 
.参数 纵向位置, 整数型, , 
.参数 功能键状态, 整数型, , 

赋值 (控件被激活, 假)

.子程序 _图形按钮荣誉榜_被单击, 空白型, , 
播放音乐 (#控件选中, )
载入 (窗口荣誉榜, _启动窗口, 真)

.子程序 获取荣誉榜, 空白型, , 荣誉榜窗口调用
.参数 接收数组, 文本型, 数组, 

复制数组 (接收数组, 荣誉榜)

.子程序 提交玩家名称, 空白型, , 入榜窗口调用
.参数 名称, 文本型, , 

赋值 (玩家名称, 名称)

.子程序 _图片框链接_鼠标左键被按下, 逻辑型, , 
.参数 横向位置, 整数型, , 
.参数 纵向位置, 整数型, , 
.参数 功能键状态, 整数型, , 

播放音乐 (#链接, )
跳转 ()

.窗口程序集 窗口荣誉榜程序集, , , 

.程序集变量 控件被激活, 逻辑型, , , 
.子程序 _窗口荣誉榜_创建完毕, 空白型, , 
.局部变量 荣誉榜, 文本型, , "0", 
.局部变量 标记组件, 标签, , , 
.局部变量 变量, 整数型, , , 

赋值 (., 相加 (_启动窗口., 整除 (相减 (_启动窗口., .), 2)))
赋值 (., 相加 (_启动窗口., 整除 (相减 (_启动窗口., .), 2)))
获取荣誉榜 (荣誉榜)
.计次循环首 (10, 变量)
    赋值 (标记组件, 取标记组件 (变量))
    赋值 (标记组件.标题, 文本替换 (荣誉榜 [变量], 1, 7, ))
    赋值 (标记组件, 取标记组件 (相加 (变量, 10)))
    画分数标签 (到数值 (取文本左边 (荣誉榜 [变量], 7)), 标记组件)
.计次循环尾 ()

.子程序 _图形按钮关闭_鼠标位置被移动, 逻辑型, , 
.参数 横向位置, 整数型, , 
.参数 纵向位置, 整数型, , 
.参数 功能键状态, 整数型, , 

.如果真 (等于 (控件被激活, 假))
    赋值 (控件被激活, 真)
    播放音乐 (#控件激活, )
.如果真结束


.子程序 _图形按钮关闭_被单击, 空白型, , 
播放音乐 (#控件选中, )
销毁 ()

.子程序 _窗口荣誉榜_鼠标位置被移动, 逻辑型, , 
.参数 横向位置, 整数型, , 
.参数 纵向位置, 整数型, , 
.参数 功能键状态, 整数型, , 

赋值 (控件被激活, 假)

.窗口程序集 窗口入榜程序集, , , 

.程序集变量 控件被激活, 逻辑型, , , 
.子程序 _窗口入榜_鼠标位置被移动, 逻辑型, , 
.参数 横向位置, 整数型, , 
.参数 纵向位置, 整数型, , 
.参数 功能键状态, 整数型, , 

赋值 (控件被激活, 假)

.子程序 _图形按钮关闭_鼠标位置被移动, 逻辑型, , 
.参数 横向位置, 整数型, , 
.参数 纵向位置, 整数型, , 
.参数 功能键状态, 整数型, , 

.如果真 (等于 (控件被激活, 假))
    赋值 (控件被激活, 真)
    播放音乐 (#控件激活, )
.如果真结束


.子程序 _图形按钮确定_鼠标位置被移动, 逻辑型, , 
.参数 横向位置, 整数型, , 
.参数 纵向位置, 整数型, , 
.参数 功能键状态, 整数型, , 

.如果真 (等于 (控件被激活, 假))
    赋值 (控件被激活, 真)
    播放音乐 (#控件激活, )
.如果真结束


.子程序 _图形按钮关闭_被单击, 空白型, , 
播放音乐 (#控件选中, )
.如果 (等于 (.内容, “”))
    提交玩家名称 (“搞怪”)
.否则
    提交玩家名称 (.内容)
.如果结束
销毁 ()

.子程序 _图形按钮确定_被单击, 空白型, , 
.局部变量 名称, 文本型, , , 

播放音乐 (#控件选中, )
.如果 (等于 (.内容, “”))
    提交玩家名称 (“搞怪”)
.否则
    提交玩家名称 (.内容)
.如果结束
销毁 ()

.子程序 _窗口入榜_创建完毕, 空白型, , 
赋值 (., 相加 (_启动窗口., 整除 (相减 (_启动窗口., .), 2)))
赋值 (., 相加 (_启动窗口., 整除 (相减 (_启动窗口., .), 2)))

.窗口程序集 窗口失败程序集, , , 

.程序集变量 控件被激活, 逻辑型, , , 
.子程序 _窗口失败_鼠标位置被移动, 逻辑型, , 
.参数 横向位置, 整数型, , 
.参数 纵向位置, 整数型, , 
.参数 功能键状态, 整数型, , 

赋值 (控件被激活, 假)

.子程序 _图形按钮关闭_鼠标位置被移动, 逻辑型, , 
.参数 横向位置, 整数型, , 
.参数 纵向位置, 整数型, , 
.参数 功能键状态, 整数型, , 

.如果真 (等于 (控件被激活, 假))
    赋值 (控件被激活, 真)
    播放音乐 (#控件激活, )
.如果真结束


.子程序 _图形按钮确定_鼠标位置被移动, 逻辑型, , 
.参数 横向位置, 整数型, , 
.参数 纵向位置, 整数型, , 
.参数 功能键状态, 整数型, , 

.如果真 (等于 (控件被激活, 假))
    赋值 (控件被激活, 真)
    播放音乐 (#控件激活, )
.如果真结束


.子程序 _图形按钮关闭_被单击, 空白型, , 
播放音乐 (#控件选中, )
销毁 ()

.子程序 _图形按钮确定_被单击, 空白型, , 
播放音乐 (#控件选中, )
销毁 ()

.子程序 _窗口失败_创建完毕, 空白型, , 
赋值 (., 相加 (_启动窗口., 整除 (相减 (_启动窗口., .), 2)))
赋值 (., 相加 (_启动窗口., 整除 (相减 (_启动窗口., .), 2)))


.窗口程序集 窗口退出确认程序集, , , 

.程序集变量 控件被激活, 逻辑型, , , 
.子程序 _窗口退出确认_鼠标位置被移动, 逻辑型, , 
.参数 横向位置, 整数型, , 
.参数 纵向位置, 整数型, , 
.参数 功能键状态, 整数型, , 

赋值 (控件被激活, 假)

.子程序 _图形按钮关闭_鼠标位置被移动, 逻辑型, , 
.参数 横向位置, 整数型, , 
.参数 纵向位置, 整数型, , 
.参数 功能键状态, 整数型, , 

.如果真 (等于 (控件被激活, 假))
    赋值 (控件被激活, 真)
    播放音乐 (#控件激活, )
.如果真结束


.子程序 _图形按钮确定_鼠标位置被移动, 逻辑型, , 
.参数 横向位置, 整数型, , 
.参数 纵向位置, 整数型, , 
.参数 功能键状态, 整数型, , 

.如果真 (等于 (控件被激活, 假))
    赋值 (控件被激活, 真)
    播放音乐 (#控件激活, )
.如果真结束


.子程序 _图形按钮关闭_被单击, 空白型, , 
播放音乐 (#控件选中, )
销毁 ()

.子程序 _图形按钮确定_被单击, 空白型, , 
播放音乐 (#消除1, )
处理事件 ()
延时 (500)
结束 ()

.子程序 _图形按钮1_鼠标位置被移动, 逻辑型, , 
.参数 横向位置, 整数型, , 
.参数 纵向位置, 整数型, , 
.参数 功能键状态, 整数型, , 

.如果真 (等于 (控件被激活, 假))
    赋值 (控件被激活, 真)
    播放音乐 (#控件激活, )
.如果真结束


.子程序 _图形按钮1_被单击, 空白型, , 
播放音乐 (#控件选中, )
销毁 ()

.子程序 _窗口退出确认_创建完毕, 空白型, , 
赋值 (., 相加 (_启动窗口., 整除 (相减 (_启动窗口., .), 2)))
赋值 (., 相加 (_启动窗口., 整除 (相减 (_启动窗口., .), 2)))


.窗口程序集 窗口游戏说明程序集, , , 

.程序集变量 控件被激活, 逻辑型, , , 
.子程序 _图形按钮关闭_被单击, 空白型, , 
播放音乐 (#控件选中, )
销毁 ()

.子程序 _图形按钮关闭_鼠标位置被移动, 逻辑型, , 
.参数 横向位置, 整数型, , 
.参数 纵向位置, 整数型, , 
.参数 功能键状态, 整数型, , 

.如果真 (等于 (控件被激活, 假))
    赋值 (控件被激活, 真)
    播放音乐 (#控件激活, )
.如果真结束


.子程序 _窗口游戏说明_鼠标位置被移动, 逻辑型, , 
.参数 横向位置, 整数型, , 
.参数 纵向位置, 整数型, , 
.参数 功能键状态, 整数型, , 

赋值 (控件被激活, 假)

.子程序 _窗口游戏说明_创建完毕, 空白型, , 
赋值 (., 相加 (_启动窗口., 整除 (相减 (_启动窗口., .), 2)))
赋值 (., 相加 (_启动窗口., 整除 (相减 (_启动窗口., .), 2)))


 ' 不属于任何一个程序集、类模块的函数：
