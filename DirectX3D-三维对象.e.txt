 ' 文件类型：Windows窗口程序

 ' 程序名称：3D图形演示程序
 ' 程序描述：
 ' 程序作者：
 ' 邮政编码：
 ' 联系地址：
 ' 联系电话：
 ' 传真号码：
 ' 电子信箱：
 ' 主页地址：
 ' 版权声明：
 ' 版本号：1.0
 ' 创建号：0.0

窗口 _启动窗口 ' 在程序启动后自动调入本窗口
    左边 = 50
    顶边 = 50
    宽度 = 566
    高度 = 402
    鼠标指针 = { 0,0,0,0 }
    标记 = “”
    可视 = 真
    禁止 = 假



.常量 顶点数据结构大小, "32", , 


 ' 所需要的支持库：
 ' krnln d09f2340818511d396f6aaf844c7e325 4 4 系统核心支持库
 ' ogrelib 2EAE87405D754ad780D8FE57432002EA 1 2 DirectX3D支持库
 ' EdirectX 81690053A86045bf9E362F5DE0BC4095 1 2 DirectX支持库




数据类型 顶点数据, , 自定义的顶点数据结构
    .成员 x, 小数型, , , 
    .成员 y, 小数型, , , 
    .成员 z, 小数型, , , 
    .成员 nx, 小数型, , , 
    .成员 ny, 小数型, , , 
    .成员 nz, 小数型, , , 
    .成员 tu, 小数型, , , 
    .成员 tv, 小数型, , , 

.全局变量 数据路径, 文本型, , , 

.DLL命令 显示光标, 整数型, "", "ShowCursor", , 
    .参数 bShow, 逻辑型, , 

.窗口程序集 窗口程序集1, , , 

.程序集变量 三维对象, 三维, , , 
.子程序 __启动窗口_创建完毕, 空白型, , 
显示光标 (假)
赋值 (数据路径, 相加 (取运行目录 (), “\data\”))
三维对象.初始化 (取窗口句柄 (), 假)
取窗口句柄 ().未知支持库函数_14 ()
30.未知支持库函数_38 ()

三维对象.载入模型 ()


.子程序 _时钟1_周期事件, 空白型, , 
三维对象.渲染 ()

.子程序 __启动窗口_被激活, 空白型, , 
真.未知支持库函数_35 (真, 假)


.类模块 三维, , , 

.程序集变量 设备, 未知类型0x20009, , , 三维设备对象
.程序集变量 建筑模型, 未知类型0x2001A, , , 三维场景中建筑的模型
.程序集变量 建筑材质, 未知类型0x2000C, , "0", 建筑模型中的材质数据
.程序集变量 建筑纹理, 未知类型0x2000F, , "0", 建筑模型中的纹理数据
.程序集变量 建筑材质数量, 整数型, , , 建筑模型中的材质数量
.程序集变量 光标页面, 未知类型0x20008, , , 用于在三维场景中显示指定的图片光标
.程序集变量 是否窗口模式, 逻辑型, , , 真：窗口模式  假：全屏模式
.程序集变量 世界矩阵, 未知类型0x20004, , , 
.程序集变量 视图矩阵, 未知类型0x20004, , , 
.程序集变量 投影矩阵, 未知类型0x20004, , , 
.程序集变量 系数, 小数型, , , 
.程序集变量 前后运动选项, 整数型, , , 
.程序集变量 左运动选项, 整数型, , , 
.程序集变量 右运动选项, 整数型, , , 
.程序集变量 顶点数据, 顶点数据, , "2", 
.程序集变量 X位置, 小数型, , , 
.程序集变量 Y位置, 小数型, , , 
.程序集变量 Z位置, 小数型, , , 
.程序集变量 上一X位置, 小数型, , , 
.程序集变量 上一Y位置, 小数型, , , 
.程序集变量 上一Z位置, 小数型, , , 
.程序集变量 旋转角度, 整数型, , , 
.程序集变量 向前系数, 小数型, , , 
.程序集变量 上一向前系数, 小数型, , , 
.程序集变量 点, 未知类型0x20002, , , 
.程序集变量 高度差, 小数型, , , 
.程序集变量 高度, 小数型, , , 
.程序集变量 最大高度, 小数型, , , 
.程序集变量 跳, 整数型, , , 
.程序集变量 下落, 逻辑型, , , 
.程序集变量 向量0, 未知类型0x20002, , , 
.程序集变量 向量1, 未知类型0x20002, , , 
.程序集变量 角度, 小数型, , , 
.程序集变量 方向0, 小数型, , , 
.程序集变量 摄像机角度, 整数型, , , 
.程序集变量 余弦x, 小数型, , , 
.程序集变量 余弦y, 小数型, , , 
.程序集变量 余弦z, 小数型, , , 
.程序集变量 正弦x, 小数型, , , 
.程序集变量 正弦y, 小数型, , , 
.程序集变量 正弦z, 小数型, , , 
.程序集变量 偏移x坐标, 整数型, , , 
.程序集变量 偏移y坐标, 整数型, , , 
.程序集变量 旋转值, 整数型, , , 
.程序集变量 是否碰撞, 逻辑型, , , 
.子程序 _初始化, 空白型, , 当基于本类的对象被创建后，此方法会被自动调用


.子程序 _销毁, 空白型, , 当基于本类的对象被销毁前，此方法会被自动调用


.子程序 初始化, 逻辑型, 公开, 创建三维设备对象、初始化设备、初始化输入设备
.参数 参窗口句柄, 整数型, , 
.参数 参窗口模式, 逻辑型, , 

.局部变量 灯光, 未知类型0x2000B, , , 

赋值 (是否窗口模式, 参窗口模式)

.如果真 (等于 (创建设备 (参窗口句柄), 假))
    返回 (假)
.如果真结束

初始化设备 ()

赋值 (系数, 0.3)
赋值 (前后运动选项, 0)
赋值 (左运动选项, 1)
赋值 (右运动选项, 1)

.如果真 (等于 (设备.未知支持库函数_199 (32, 32, #., #., 光标页面), 假))
    返回 (假)
.如果真结束

.如果真 (等于 (未知支持库函数_274 (光标页面, , , 相加 (数据路径, “curs.bmp”), , -1, 未知支持库函数_287 (255, 0, 0, 0), ), 假))
    返回 (假)
.如果真结束


赋值 (灯光.., 1)
赋值 (灯光.., 1)
赋值 (灯光.., 1)
赋值 (灯光., #.)
赋值 (灯光.., 30)

设备.未知支持库函数_145 (0, 灯光)
设备.未知支持库函数_146 (0, 真)
设备.未知支持库函数_157 (#., 1)
设备.未知支持库函数_157 (#., 未知支持库函数_287 (0, 128, 128, 128))

返回 (真)

.子程序 创建设备, 逻辑型, , 创建设备对象
.参数 参窗口句柄, 整数型, , 

.局部变量 设备创建参数, 未知类型0x2001B, , , 

 ' 填充设备创建参数
赋值 (设备创建参数., 1)

.如果 (等于 (是否窗口模式, 真))
    赋值 (设备创建参数., 真)
    赋值 (设备创建参数., #.)
    赋值 (设备创建参数., #.)
    
.否则
    赋值 (设备创建参数., #.)
    赋值 (设备创建参数., 800)
    赋值 (设备创建参数., 600)
    赋值 (设备创建参数., #.)
.如果结束

赋值 (设备创建参数., 真)
赋值 (设备创建参数., #.)
赋值 (设备创建参数., 参窗口句柄)

 ' 创建设备
.如果真 (等于 (设备.未知支持库函数_144 (设备创建参数, 参窗口句柄, #., #.), 假))
    返回 (假)
.如果真结束

返回 (真)

.子程序 初始化设备, 空白型, , 
.局部变量 眼睛位置, 未知类型0x20002, , , 
.局部变量 摄像机位置, 未知类型0x20002, , , 
.局部变量 上方向位置, 未知类型0x20002, , , 

设备.未知支持库函数_156 (#.)

 ' 设置设备的渲染状态
设备.未知支持库函数_157 (#., 0) ' 关闭光照效果
设备.未知支持库函数_157 (#., #.)
设备.未知支持库函数_157 (#., 1) ' 打开Z缓冲

 ' 设置设备取样器状态
设备.未知支持库函数_169 (0, #., #.)
设备.未知支持库函数_169 (0, #., #.)

 ' 设备变换矩阵
世界矩阵.未知支持库函数_312 ()
设备.未知支持库函数_158 (#., 世界矩阵)

赋值 (眼睛位置., 0)
赋值 (眼睛位置., 0)
赋值 (眼睛位置., -30)

赋值 (摄像机位置., 0)
赋值 (摄像机位置., 0)
赋值 (摄像机位置., 0)

赋值 (上方向位置., 0)
赋值 (上方向位置., 1)
赋值 (上方向位置., 0)
视图矩阵.未知支持库函数_315 (眼睛位置, 摄像机位置, 上方向位置)
设备.未知支持库函数_158 (#., 视图矩阵)

投影矩阵.未知支持库函数_319 (相乘 (45, 相除 (3.14, 180)), 相除 (3, 4), 1, 1400)
设备.未知支持库函数_158 (#., 投影矩阵)


.子程序 载入模型, 逻辑型, 公开, 
.局部变量 纹理文件, 文本型, , "0", 
.局部变量 记数, 整数型, , , 

.如果真 (等于 (未知支持库函数_346 (相加 (数据路径, “edificio1.x”), #., 设备, , 建筑材质, 纹理文件, 建筑模型), 假))
    返回 (假)
.如果真结束

赋值 (建筑材质数量, 取数组成员数 (建筑材质))
重定义数组 (建筑纹理, 假, 建筑材质数量)
.计次循环首 (建筑材质数量, 记数)
    赋值 (建筑材质 [记数], , 建筑材质 [记数], )
    未知支持库函数_255 (设备, 相加 (数据路径, 纹理文件 [记数]), 建筑纹理 [记数])
.计次循环尾 ()


返回 (真)

.子程序 准备渲染, 空白型, , 
.局部变量 眼睛位置, 未知类型0x20002, , , 
.局部变量 摄像机位置, 未知类型0x20002, , , 
.局部变量 上方向位置, 未知类型0x20002, , , 

赋值 (上一X位置, X位置)
赋值 (上一Y位置, Y位置)
赋值 (上一Z位置, Z位置)

 ' 计算位置
赋值 (X位置, 相加 (X位置, 相乘 (求正弦 (相乘 (旋转角度, 相除 (3.14, 180))), 向前系数)))
赋值 (Z位置, 相加 (Z位置, 相乘 (求余弦 (相乘 (旋转角度, 相除 (3.14, 180))), 向前系数)))

赋值 (上一向前系数, 向前系数)
赋值 (向前系数, 0)

赋值 (点., X位置)
赋值 (点., Y位置)
赋值 (点., Z位置)

赋值 (Y位置, 取Y平面高度 (点))

 ' 输出调试文本 (Y位置)
 ' 下落
赋值 (高度差, 相减 (上一Y位置, Y位置))
赋值 (高度, 相减 (最大高度, 上一Y位置))

.如果真 (大于 (高度差, 130))
    .如果真 (等于 (跳, 0))
        赋值 (最大高度, 高度差)
        赋值 (跳, 1)
    .如果真结束
    
    赋值 (下落, 真)
.如果真结束

.如果真 (等于 (高度差, 0))
    赋值 (下落, 假)
    赋值 (跳, 0)
.如果真结束

.如果真 (大于 (上一Y位置, Y位置))
    赋值 (Y位置, 相减 (上一Y位置, 1))
.如果真结束

赋值 (向量1., X位置)
赋值 (向量1., 相加 (Y位置, 5))
赋值 (向量1., Z位置)

赋值 (向量0., 相加 (X位置, 相乘 (求正弦 (相乘 (旋转角度, 相除 (3.14, 180))), 上一向前系数)))
赋值 (向量0., 相加 (Y位置, 5))
赋值 (向量0., 相加 (Z位置, 相乘 (求余弦 (相乘 (旋转角度, 相除 (3.14, 180))), 上一向前系数)))

模型碰撞 (向量1, 向量0, 角度, 方向0)

.如果真 (小于 (方向0, 3))
    赋值 (X位置, 上一X位置)
    赋值 (Z位置, 上一Z位置)
    
    赋值 (X位置, 相加 (X位置, 相乘 (求正弦 (相乘 (相减 (相加 (旋转角度, 角度), 90), 相除 (3.14, 180))), 上一向前系数)))
    赋值 (Z位置, 相加 (Z位置, 相乘 (求余弦 (相乘 (相减 (相加 (旋转角度, 角度), 90), 相除 (3.14, 180))), 上一向前系数)))
    
    赋值 (向量1., X位置)
    赋值 (向量1., 相加 (Y位置, 5))
    赋值 (向量1., Z位置)
    
    赋值 (向量0., 相加 (X位置, 相乘 (求正弦 (相乘 (相减 (相加 (旋转角度, 角度), 90), 相除 (3.14, 180))), 相加 (0.1, 上一向前系数))))
    赋值 (向量0., 相加 (Y位置, 5))
    赋值 (向量0., 相加 (Z位置, 相乘 (求余弦 (相乘 (相减 (相加 (旋转角度, 角度), 90), 相除 (3.14, 180))), 相加 (0.1, 上一向前系数))))
    
    模型碰撞 (向量1, 向量0, 角度, 方向0)
    
    .如果真 (小于 (方向0, 3))
        赋值 (X位置, 上一X位置)
        赋值 (Z位置, 上一Z位置)
    .如果真结束
    
     ' 输出调试文本 (“角度:” ＋ 到文本 (角度) ＋ “ aus0:” ＋ 到文本 (aus0))
.如果真结束

赋值 (眼睛位置., X位置)
赋值 (眼睛位置., 相加 (Y位置, 30))
赋值 (眼睛位置., Z位置)

赋值 (上方向位置., 0)
赋值 (上方向位置., 1)
赋值 (上方向位置., 0)

.判断开始 (等于 (前后运动选项, 0))
    赋值 (摄像机位置., 相加 (X位置, 相乘 (30, 求正弦 (相乘 (旋转角度, 相除 (3.14, 180))))))
    赋值 (摄像机位置., 相加 (Y位置, 30, 相除 (摄像机角度, 5)))
    赋值 (摄像机位置., 相加 (Z位置, 相乘 (30, 求余弦 (相乘 (旋转角度, 相除 (3.14, 180))))))
    
    视图矩阵.未知支持库函数_315 (眼睛位置, 摄像机位置, 上方向位置)
    设备.未知支持库函数_158 (#., 视图矩阵)
.判断 (等于 (前后运动选项, 1))
    赋值 (摄像机位置., 相加 (X位置, 相乘 (30, 求正弦 (相乘 (相加 (旋转角度, 90), 相除 (3.14, 180))))))
    赋值 (摄像机位置., 相加 (Y位置, 30, 相除 (摄像机角度, 5)))
    赋值 (摄像机位置., 相加 (Z位置, 相乘 (30, 求余弦 (相乘 (相加 (旋转角度, 90), 相除 (3.14, 180))))))
    
    视图矩阵.未知支持库函数_315 (眼睛位置, 摄像机位置, 上方向位置)
    设备.未知支持库函数_158 (#., 视图矩阵)
.判断 (等于 (前后运动选项, 2))
    赋值 (摄像机位置., 相加 (X位置, 相乘 (30, 求正弦 (相乘 (相减 (旋转角度, 90), 相除 (3.14, 180))))))
    赋值 (摄像机位置., 相加 (Y位置, 30, 相除 (摄像机角度, 5)))
    赋值 (摄像机位置., 相加 (Z位置, 相乘 (30, 求余弦 (相乘 (相减 (旋转角度, 90), 相除 (3.14, 180))))))
    
    视图矩阵.未知支持库函数_315 (眼睛位置, 摄像机位置, 上方向位置)
    设备.未知支持库函数_158 (#., 视图矩阵)
.默认
    
.判断结束


.子程序 渲染, 空白型, 公开, 
.局部变量 记数, 整数型, , , 

准备渲染 ()

设备.未知支持库函数_148 (位或 (#., #.), 未知支持库函数_287 (255, 0, 0, 0), 1, , )

设备.未知支持库函数_149 ()
变换矩阵 (1, 1, 1, 0, 0, 0, 0, 0, 0)

.计次循环首 (建筑材质数量, 记数)
    设备.未知支持库函数_134 (0, 建筑纹理 [记数])
    设备.未知支持库函数_147 (建筑材质 [记数])
    建筑模型.未知支持库函数_360 (记数)
.计次循环尾 ()
变换矩阵 (1, 1, 1, 0, 旋转角度, 0, X位置, 相加 (Y位置, 1), Z位置)

设备.未知支持库函数_150 ()

设备.未知支持库函数_151 ()

控制 ()
设备.未知支持库函数_162 (偏移x坐标, 偏移y坐标, 光标页面)

设备.未知支持库函数_188 (真)


.子程序 变换矩阵, 空白型, , 
.参数 缩放X, 小数型, , 
.参数 缩放Y, 小数型, , 
.参数 缩放Z, 小数型, , 
.参数 角X, 整数型, , 
.参数 角Y, 整数型, , 
.参数 角Z, 整数型, , 
.参数 位置X, 小数型, , 
.参数 位置Y, 小数型, , 
.参数 位置Z, 小数型, , 

.局部变量 矩阵, 未知类型0x20004, , , 


赋值 (余弦x, 求余弦 (相乘 (角X, 相除 (3.14, 180))))
赋值 (余弦y, 求余弦 (相乘 (角Y, 相除 (3.14, 180))))
赋值 (余弦z, 求余弦 (相乘 (角Z, 相除 (3.14, 180))))
赋值 (正弦x, 求正弦 (相乘 (角X, 相除 (3.14, 180))))
赋值 (正弦y, 求正弦 (相乘 (角Y, 相除 (3.14, 180))))
赋值 (正弦z, 求正弦 (相乘 (角Z, 相除 (3.14, 180))))

赋值 (矩阵., 相乘 (缩放X, 余弦y, 余弦z))
赋值 (矩阵., 相乘 (缩放X, 余弦y, 正弦z))
赋值 (矩阵., 负 (相乘 (缩放X, 正弦y)))

赋值 (矩阵., 相加 (负 (相乘 (缩放Y, 余弦x, 正弦z)), 相乘 (缩放Y, 正弦x, 正弦y, 余弦z)))
赋值 (矩阵., 相加 (相乘 (缩放Y, 余弦x, 余弦z), 相乘 (缩放Y, 正弦x, 正弦y, 正弦z)))
赋值 (矩阵., 相乘 (缩放Y, 正弦x, 余弦y))

赋值 (矩阵., 相加 (相乘 (缩放Z, 正弦x, 正弦z), 相乘 (缩放Z, 余弦x, 正弦y, 余弦z)))
赋值 (矩阵., 相加 (负 (相乘 (缩放Z, 正弦x, 余弦z)), 相乘 (缩放Z, 余弦x, 正弦y, 正弦z)))
赋值 (矩阵., 相乘 (缩放Z, 余弦x, 余弦y))

赋值 (矩阵., 位置X)
赋值 (矩阵., 位置Y)
赋值 (矩阵., 位置Z)
赋值 (矩阵., 1)

设备.未知支持库函数_158 (#., 矩阵)


.子程序 取Y平面高度, 小数型, , 
.参数 参点, 未知类型0x20002, , 

.局部变量 返回值, 小数型, , , 
.局部变量 最大点, 整数型, , , 
.局部变量 序号, 整数型, , , 
.局部变量 顶点数组, 顶点数据, , "0", 
.局部变量 临顶点数据, 字节集, , , 
.局部变量 索引数组, 短整数型, , "0", 
.局部变量 区域, 小数型, , , 
.局部变量 区域1, 小数型, , , 
.局部变量 区域2, 小数型, , , 
.局部变量 区域3, 小数型, , , 
.局部变量 向量1, 未知类型0x20002, , , 
.局部变量 向量2, 未知类型0x20002, , , 
.局部变量 向量3, 未知类型0x20002, , , 
.局部变量 平面1, 未知类型0x20005, , , 

赋值 (返回值, -99)

建筑模型.未知支持库函数_375 (相乘 (#顶点数据结构大小, 建筑模型.未知支持库函数_369 ()), 临顶点数据)
重定义数组 (顶点数组, 假, 建筑模型.未知支持库函数_369 ())
字节集到顶点数据 (临顶点数据, 顶点数组)

建筑模型.未知支持库函数_377 (相乘 (建筑模型.未知支持库函数_368 (), 3, 2), 临顶点数据)
重定义数组 (索引数组, 假, 相乘 (建筑模型.未知支持库函数_368 (), 3))
字节集到索引数组 (临顶点数据, 索引数组)

.变量循环首 (1, 相乘 (建筑模型.未知支持库函数_368 (), 3), 3, 序号)
    
    赋值 (向量1., 顶点数组 [相加 (索引数组 [序号], 1)].x)
    赋值 (向量1., 顶点数组 [相加 (索引数组 [序号], 1)].y)
    赋值 (向量1., 顶点数组 [相加 (索引数组 [序号], 1)].z)
    
    赋值 (向量2., 顶点数组 [相加 (索引数组 [相加 (序号, 1)], 1)].x)
    赋值 (向量2., 顶点数组 [相加 (索引数组 [相加 (序号, 1)], 1)].y)
    赋值 (向量2., 顶点数组 [相加 (索引数组 [相加 (序号, 1)], 1)].z)
    
    赋值 (向量3., 顶点数组 [相加 (索引数组 [相加 (序号, 2)], 1)].x)
    赋值 (向量3., 顶点数组 [相加 (索引数组 [相加 (序号, 2)], 1)].y)
    赋值 (向量3., 顶点数组 [相加 (索引数组 [相加 (序号, 2)], 1)].z)
    
    赋值 (区域, 取绝对值 (相加 (相乘 (向量1., 相减 (向量2., 向量3.)), 相乘 (向量2., 相减 (向量3., 向量1.)), 相乘 (向量3., 相减 (向量1., 向量2.)))))
    赋值 (区域1, 取绝对值 (相加 (相乘 (参点., 相减 (向量2., 向量3.)), 相乘 (向量2., 相减 (向量3., 参点.)), 相乘 (向量3., 相减 (参点., 向量2.)))))
    赋值 (区域2, 取绝对值 (相加 (相乘 (向量1., 相减 (参点., 向量3.)), 相乘 (参点., 相减 (向量3., 向量1.)), 相乘 (向量3., 相减 (向量1., 参点.)))))
    赋值 (区域3, 取绝对值 (相加 (相乘 (向量1., 相减 (向量2., 参点.)), 相乘 (向量2., 相减 (参点., 向量1.)), 相乘 (参点., 相减 (向量1., 向量2.)))))
    
    .如果真 (大于或等于 (相加 (区域, 1), 相加 (区域1, 区域2, 区域3)))
        平面1.未知支持库函数_331 (向量1, 向量2, 向量3)
        
        .如果真 (不等于 (取绝对值 (平面1.), 0))
            赋值 (最大点, 相除 (相减 (相乘 (负 (参点.), 平面1.), 相乘 (参点., 平面1.), 平面1.), 平面1.))
            .如果真 (并且 (大于 (最大点, 返回值), 小于或等于 (最大点, 相加 (参点., 5)), 大于 (顶点数组 [相加 (索引数组 [序号], 1)].ny, 0)))
                赋值 (返回值, 最大点)
            .如果真结束
            
        .如果真结束
        
    .如果真结束
    
.变量循环尾 ()

返回 (返回值)


.子程序 字节集到顶点数据, 空白型, , 
.参数 参字节集, 字节集, , 
.参数 参顶点数组, 顶点数据, 参考 数组, 

.局部变量 记数, 整数型, , , 
.局部变量 局位置, 整数型, , , 

赋值 (局位置, 1)
.计次循环首 (建筑模型.未知支持库函数_369 (), 记数)
    赋值 (参顶点数组 [记数], x, 取字节集数据 (参字节集, 5, 局位置))
    赋值 (参顶点数组 [记数], y, 取字节集数据 (参字节集, 5, 局位置))
    赋值 (参顶点数组 [记数], z, 取字节集数据 (参字节集, 5, 局位置))
    赋值 (参顶点数组 [记数], nx, 取字节集数据 (参字节集, 5, 局位置))
    赋值 (参顶点数组 [记数], ny, 取字节集数据 (参字节集, 5, 局位置))
    赋值 (参顶点数组 [记数], nz, 取字节集数据 (参字节集, 5, 局位置))
    赋值 (参顶点数组 [记数], tu, 取字节集数据 (参字节集, 5, 局位置))
    赋值 (参顶点数组 [记数], tv, 取字节集数据 (参字节集, 5, 局位置))
.计次循环尾 ()


.子程序 字节集到索引数组, 空白型, , 
.参数 参字节集, 字节集, , 
.参数 参索引数组, 短整数型, 参考 数组, 

.局部变量 记数, 整数型, , , 
.局部变量 局位置, 整数型, , , 

赋值 (局位置, 1)
.计次循环首 (相乘 (建筑模型.未知支持库函数_368 (), 3), 记数)
    赋值 (参索引数组 [记数], 取字节集数据 (参字节集, #短整数型, 局位置))
.计次循环尾 ()


.子程序 模型碰撞, 空白型, , 
.参数 原点, 未知类型0x20002, , 
.参数 终点, 未知类型0x20002, , 
.参数 参角度, 小数型, 参考, 
.参数 方向, 小数型, 参考, 

.局部变量 面数, 整数型, , , 
.局部变量 局向量, 未知类型0x20002, , , 
.局部变量 索引数组, 短整数型, , "0", 
.局部变量 顶点数组, 顶点数据, , "0", 
.局部变量 临顶点数据, 字节集, , , 
.局部变量 向量1, 未知类型0x20002, , , 
.局部变量 向量2, 未知类型0x20002, , , 
.局部变量 向量3, 未知类型0x20002, , , 
.局部变量 平面1, 未知类型0x20005, , , 
.局部变量 平面2, 未知类型0x20005, , , 
.局部变量 临小数, 小数型, , , 


赋值 (局向量., 相减 (终点., 原点.))
赋值 (局向量., 相减 (终点., 原点.))
赋值 (局向量., 相减 (终点., 原点.))

未知支持库函数_345 (建筑模型, 原点, 局向量, 面数, , , , )

建筑模型.未知支持库函数_375 (相乘 (#顶点数据结构大小, 建筑模型.未知支持库函数_369 ()), 临顶点数据)
重定义数组 (顶点数组, 假, 建筑模型.未知支持库函数_369 ())
字节集到顶点数据 (临顶点数据, 顶点数组)

建筑模型.未知支持库函数_377 (相乘 (建筑模型.未知支持库函数_368 (), 3, 2), 临顶点数据)
重定义数组 (索引数组, 假, 相乘 (建筑模型.未知支持库函数_368 (), 3))
字节集到索引数组 (临顶点数据, 索引数组)
 ' dwFace ＝ dwFace ＋ 1

赋值 (向量1., 顶点数组 [相加 (索引数组 [相加 (相乘 (面数, 3), 1)], 1)].x)
赋值 (向量1., 顶点数组 [相加 (索引数组 [相加 (相乘 (面数, 3), 1)], 1)].y)
赋值 (向量1., 顶点数组 [相加 (索引数组 [相加 (相乘 (面数, 3), 1)], 1)].z)

赋值 (向量2., 顶点数组 [相加 (索引数组 [相加 (相乘 (面数, 3), 2)], 1)].x)
赋值 (向量2., 顶点数组 [相加 (索引数组 [相加 (相乘 (面数, 3), 2)], 1)].y)
赋值 (向量2., 顶点数组 [相加 (索引数组 [相加 (相乘 (面数, 3), 2)], 1)].z)

赋值 (向量3., 顶点数组 [相加 (索引数组 [相加 (相乘 (面数, 3), 3)], 1)].x)
赋值 (向量3., 顶点数组 [相加 (索引数组 [相加 (相乘 (面数, 3), 3)], 1)].y)
赋值 (向量3., 顶点数组 [相加 (索引数组 [相加 (相乘 (面数, 3), 3)], 1)].z)

平面1.未知支持库函数_331 (向量1, 向量2, 向量3)

赋值 (临小数, 求平方根 (相加 (相乘 (平面1., 平面1.), 相乘 (平面1., 平面1.), 相乘 (平面1., 平面1.))))

.如果 (等于 (临小数, 0))
    赋值 (方向, 0)
.否则
    赋值 (方向, 取绝对值 (相加 (相乘 (平面1., 原点.), 相乘 (平面1., 原点.), 相乘 (平面1., 原点.), 相除 (平面1., 临小数))))
.如果结束

赋值 (向量1., 原点.)
赋值 (向量1., 原点.)
赋值 (向量1., 原点.)

赋值 (向量2., 终点.)
赋值 (向量2., 终点.)
赋值 (向量2., 终点.)

赋值 (向量3., 相除 (相加 (原点., 终点.), 2))
赋值 (向量3., 相加 (相除 (相加 (原点., 终点.), 2), 10))
赋值 (向量3., 相除 (相加 (原点., 终点.), 2))

平面2.未知支持库函数_331 (向量1, 向量2, 向量3)
 ' 赋值 (临小数, 相乘 (求平方根 (相加 (相乘 (平面1., 平面1.), 相乘 (平面1., 平面1.), 相乘 (平面1., 平面1.))), 求平方根 (相加 (相乘 (平面2., 平面2.), 相乘 (平面2., 平面2.), 相乘 (平面2., 平面2.)))))

.如果 (等于 (临小数, 0))
    赋值 (参角度, 0)
.否则
    赋值 (参角度, 相除 (相加 (相乘 (平面1., 平面2.), 相乘 (平面1., 平面2.), 相乘 (平面1., 平面2.)), 临小数))
.如果结束

赋值 (参角度, 相加 (求反正切 (相除 (负 (参角度), 求平方根 (相加 (相乘 (负 (参角度), 参角度), 1)))), 相乘 (2, 求反正切 (1))))
赋值 (参角度, 相除 (参角度, 相除 (3.14, 180)))


.子程序 向上, 空白型, , 
.判断开始 (等于 (前后运动选项, 0))
    赋值 (向前系数, 1.5)
    赋值 (左运动选项, 1)
    赋值 (右运动选项, 1)
    
.判断 (等于 (前后运动选项, 1))
    赋值 (向前系数, 1.5)
    赋值 (旋转值, 相加 (旋转值, 相除 (90, 系数)))
    赋值 (前后运动选项, 0)
    赋值 (左运动选项, 1)
    赋值 (右运动选项, 1)
    
.判断 (等于 (前后运动选项, 2))
    赋值 (向前系数, 1.5)
    赋值 (旋转值, 相减 (旋转值, 相除 (90, 系数)))
    赋值 (前后运动选项, 0)
    赋值 (左运动选项, 1)
    赋值 (右运动选项, 1)
    
.默认
    
.判断结束


.子程序 向下, 空白型, , 

.判断开始 (等于 (前后运动选项, 0))
    赋值 (向前系数, -1.5)
    赋值 (左运动选项, 1)
    赋值 (右运动选项, 1)
    
.判断 (等于 (前后运动选项, 1))
    赋值 (向前系数, -1.5)
    赋值 (旋转值, 相加 (旋转值, 相除 (90, 系数)))
    赋值 (前后运动选项, 0)
    赋值 (左运动选项, 1)
    赋值 (右运动选项, 1)
    
.判断 (等于 (前后运动选项, 2))
    赋值 (向前系数, -1.5)
    赋值 (旋转值, 相减 (旋转值, 相除 (90, 系数)))
    赋值 (前后运动选项, 0)
    赋值 (左运动选项, 1)
    赋值 (右运动选项, 1)
    
.默认
    
.判断结束


.子程序 向左, 空白型, , 
.判断开始 (等于 (左运动选项, 0))
    赋值 (向前系数, 1.5)
    赋值 (前后运动选项, 1)
    
.判断 (等于 (左运动选项, 1))
    赋值 (向前系数, 1.5)
    赋值 (前后运动选项, 1)
    赋值 (旋转值, 相减 (旋转值, 相除 (90, 系数)))
    赋值 (左运动选项, 0)
    赋值 (右运动选项, 2)
    
.判断 (等于 (左运动选项, 2))
    赋值 (向前系数, 1.5)
    赋值 (前后运动选项, 1)
    赋值 (旋转值, 相减 (旋转值, 相除 (180, 系数)))
    赋值 (左运动选项, 0)
    赋值 (右运动选项, 2)
    
.默认
    
.判断结束


.子程序 向右, 空白型, , 
.判断开始 (等于 (右运动选项, 0))
    赋值 (向前系数, 1.5)
    赋值 (前后运动选项, 2)
    
.判断 (等于 (右运动选项, 1))
    赋值 (向前系数, 1.5)
    赋值 (前后运动选项, 2)
    赋值 (旋转值, 相加 (旋转值, 相除 (90, 系数)))
    赋值 (左运动选项, 2)
    赋值 (右运动选项, 0)
    
.判断 (等于 (右运动选项, 2))
    赋值 (向前系数, 1.5)
    赋值 (前后运动选项, 2)
    赋值 (旋转值, 相加 (旋转值, 相除 (180, 系数)))
    赋值 (左运动选项, 2)
    赋值 (右运动选项, 0)
    
.默认
    
.判断结束


.子程序 控制, 空白型, 公开, 
.局部变量 X, 整数型, , , 
.局部变量 Y, 整数型, , , 

.如果真 (或者 (等于 (_启动窗口.未知支持库函数_46 (., #), 3), 等于 (_启动窗口.未知支持库函数_46 (., #), 3)))
    向上 ()
.如果真结束

.如果真 (或者 (等于 (_启动窗口.未知支持库函数_46 (., #), 3), 等于 (_启动窗口.未知支持库函数_46 (., #), 3)))
    向下 ()
.如果真结束

.如果真 (或者 (等于 (_启动窗口.未知支持库函数_46 (., #), 3), 等于 (_启动窗口.未知支持库函数_46 (., #), 3)))
    向左 ()
.如果真结束

.如果真 (或者 (等于 (_启动窗口.未知支持库函数_46 (., #), 3), 等于 (_启动窗口.未知支持库函数_46 (., #), 3)))
    向右 ()
.如果真结束

_启动窗口.未知支持库函数_28 (., X, Y)

.如果真 (不等于 (X, 0))
    _启动窗口.未知支持库函数_28 (., X, Y)
.如果真结束

.如果真 (不等于 (X, 0))
    赋值 (旋转值, 相加 (旋转值, X))
.如果真结束

赋值 (旋转角度, 相乘 (旋转值, 系数))

.如果真 (不等于 (Y, 0))
    赋值 (摄像机角度, 相减 (摄像机角度, Y))
.如果真结束

.如果真 (等于 (_启动窗口.未知支持库函数_46 (., #), 2))
    赋值 (是否碰撞, 假)
.如果真结束

.如果真 (小于 (摄像机角度, -150))
    赋值 (摄像机角度, -150)
.如果真结束

.如果真 (大于 (旋转角度, 359))
    赋值 (旋转角度, 相减 (旋转角度, 360))
.如果真结束

.如果真 (小于 (旋转角度, 0))
    赋值 (旋转角度, 相加 (旋转角度, 360))
.如果真结束




 ' 不属于任何一个程序集、类模块的函数：
