 ' 文件类型：Windows窗口程序

 ' 程序名称：
 ' 程序描述：
 ' 程序作者：
 ' 邮政编码：
 ' 联系地址：
 ' 联系电话：
 ' 传真号码：
 ' 电子信箱：
 ' 主页地址：
 ' 版权声明：
 ' 版本号：1.0
 ' 创建号：0.0

窗口 _启动窗口 ' 在程序启动后自动调入本窗口
    左边 = 50
    顶边 = 50
    宽度 = 271
    高度 = 200
    鼠标指针 = { 0,0,0,0 }
    标记 = “”
    可视 = 真
    禁止 = 假
    边框 = 2
    底图方式 = 1
    底色 = -16777216 '  0xFF000000
    最大化按钮 = 假
    最小化按钮 = 真
    控制按钮 = 真
    位置 = 1
    可否移动 = 真
    背景音乐播放次数 = 0
    回车下移焦点 = 假
    Esc键关闭 = 真
    F1键打开帮助 = 假
    帮助标志值 = 0
    在任务栏中显示 = 真
    随意移动 = 真
    外形 = 0
    总在最前 = 假
    保持标题栏激活 = 假
    底图 =  ' 空
    图标 =  ' 空
    背景音乐 =  ' 空
    标题 = “晴窗 - 专用登陆网关”
    帮助文件名 = “”

窗口 窗口1
    左边 = 50
    顶边 = 50
    宽度 = 359
    高度 = 250
    鼠标指针 = { 0,0,0,0 }
    标记 = “”
    可视 = 真
    禁止 = 假
    边框 = 2
    底图方式 = 1
    底色 = -16777216 '  0xFF000000
    最大化按钮 = 假
    最小化按钮 = 假
    控制按钮 = 真
    位置 = 1
    可否移动 = 真
    背景音乐播放次数 = 0
    回车下移焦点 = 假
    Esc键关闭 = 真
    F1键打开帮助 = 假
    帮助标志值 = 0
    在任务栏中显示 = 真
    随意移动 = 假
    外形 = 0
    总在最前 = 假
    保持标题栏激活 = 假
    底图 =  ' 空
    图标 =  ' 空
    背景音乐 =  ' 空
    标题 = “基本设置”
    帮助文件名 = “”

窗口 窗口3
    左边 = 50
    顶边 = 50
    宽度 = 297
    高度 = 197
    鼠标指针 = { 0,0,0,0 }
    标记 = “”
    可视 = 真
    禁止 = 假
    边框 = 2
    底图方式 = 1
    底色 = -16777216 '  0xFF000000
    最大化按钮 = 假
    最小化按钮 = 假
    控制按钮 = 真
    位置 = 1
    可否移动 = 真
    背景音乐播放次数 = 0
    回车下移焦点 = 假
    Esc键关闭 = 真
    F1键打开帮助 = 假
    帮助标志值 = 0
    在任务栏中显示 = 真
    随意移动 = 假
    外形 = 0
    总在最前 = 假
    保持标题栏激活 = 假
    底图 =  ' 空
    图标 =  ' 空
    背景音乐 =  ' 空
    标题 = “黑名单IP设置”
    帮助文件名 = “”

窗口 窗口4
    左边 = 50
    顶边 = 50
    宽度 = 383
    高度 = 245
    鼠标指针 = { 0,0,0,0 }
    标记 = “”
    可视 = 真
    禁止 = 假
    边框 = 2
    底图方式 = 1
    底色 = -16777216 '  0xFF000000
    最大化按钮 = 假
    最小化按钮 = 假
    控制按钮 = 真
    位置 = 1
    可否移动 = 真
    背景音乐播放次数 = 0
    回车下移焦点 = 假
    Esc键关闭 = 真
    F1键打开帮助 = 假
    帮助标志值 = 0
    在任务栏中显示 = 真
    随意移动 = 假
    外形 = 0
    总在最前 = 假
    保持标题栏激活 = 假
    底图 =  ' 空
    图标 =  ' 空
    背景音乐 =  ' 空
    标题 = “非法登陆器登陆提示文本:”
    帮助文件名 = “”



.常量 传奇3G_连接网关, "“#1<L<N<<Intq!”", 隐藏, +字符(13)  登陆器需要先连接网关
.常量 传奇3G_连接网关成功, "“<L<G<<”", 隐藏, 连接网关成功后返回的包
.常量 传奇3G_申请识别码, "“#1<\<q<L!”", 隐藏, +字符(13)  向传奇3私服申请一个验证码,用于注册帐号等使用
.常量 传奇3G_帐号注册成功, "“<l>=?L”", 隐藏, 
.常量 传奇3G_帐号已被注册, "“<l<[<<”", 隐藏, 
.常量 传奇3G_密码修改成功, "“=<>=?L”", 隐藏, 密码修改成功
.常量 传奇3G_密码修改失败, "“=<<e<<”", 隐藏, 提供修改的原密码错误
.常量 传奇3G_未知错误, "“<l><?L”", 隐藏, 


 ' 所需要的支持库：
 ' krnln d09f2340818511d396f6aaf844c7e325 4 4 系统核心支持库
 ' EThread 5F99C1642A2F4e03850721B4F5D7C3F8 1 1 多线程支持库
 ' iext 27bb20fdd3e145e4bee3db39ddd6e64c 1 2 扩展界面支持库一
 ' eAPI F7FC1AE45C5C4758AF03EF19F18A395D 1 1 应用接口支持库
 ' eWinSock 669902C8A13C48fd815F460DD17C8C25 1 6 TCP/UDP网络通信支持库
 ' shell 52F260023059454187AF826A3C07AF2A 1 0 操作系统界面功能支持库



 ' 所需要的模块
 ' TCP网络服务器模块 E:\EC模块\TCP服务器.ec
 ' 封包加解密 E:\EC模块\封包加解密.ec


数据类型 人物信息, 公开, 
    .成员 默认, 逻辑型, , , 
    .成员 人物, 文本型, , , 
    .成员 等级, 整数型, , , 
    .成员 职业, 整数型, , , 
    .成员 性别, 整数型, , , 

数据类型 网关, 公开, 
    .成员 网关地址, 文本型, , , 网关的IP地址
    .成员 网关端口, 整数型, , , 网关的连接端口

.全局变量 延时, 整数型, , , 

.窗口程序集 窗口程序集1, , , 

.程序集变量 版本号, 文本型, , , 
.子程序 __启动窗口_创建完毕, 空白型, , 
赋值 (版本号, “0910”)
未知支持库函数_0 (&启动完毕, )
相加 (取程序时间 (), “正在启动服务...”, #换行符).加入文本 ()

.子程序 启动完毕, 空白型, , 
.如果真 (等于 (文件是否存在 (相加 (取当前目录 (), “\Config.ini”)), 假))
    
    写配置项 (相加 (取当前目录 (), “\Config.ini”), “LoginGate”, “Title”, “登陆网关”)
    写配置项 (相加 (取当前目录 (), “\Config.ini”), “LoginGate”, “GatePort”, “7000”)
    写配置项 (相加 (取当前目录 (), “\Config.ini”), “LoginGate”, “ServerPort”, “5500”)
    写配置项 (相加 (取当前目录 (), “\Config.ini”), “LoginGate”, “ServerAddr”, “127.0.0.1”)
    写配置项 (相加 (取当前目录 (), “\Config.ini”), “LoginGate”, “GateAddr”, 未知支持库函数_47 ())
    写配置项 (相加 (取当前目录 (), “\Config.ini”), “LoginGate”, “PassWord”, “1234567890”)
    写配置项 (相加 (取当前目录 (), “\Config.ini”), “LoginGate”, “PassWordKb”, “1”)
    写配置项 (相加 (取当前目录 (), “\Config.ini”), “LoginGate”, “Data”, “600”)
    写配置项 (相加 (取当前目录 (), “\Config.ini”), “LoginGate”, “Start”, 版本号)
    
.如果真结束
.如果真 (不等于 (读配置项 (相加 (取当前目录 (), “\Config.ini”), “LoginGate”, “Start”, “0”), 版本号))
    
    删除文件 (相加 (取当前目录 (), “\Config.ini”))
    写配置项 (相加 (取当前目录 (), “\Config.ini”), “LoginGate”, “Title”, “登陆网关”)
    写配置项 (相加 (取当前目录 (), “\Config.ini”), “LoginGate”, “GatePort”, “7000”)
    写配置项 (相加 (取当前目录 (), “\Config.ini”), “LoginGate”, “ServerPort”, “5500”)
    写配置项 (相加 (取当前目录 (), “\Config.ini”), “LoginGate”, “ServerAddr”, “127.0.0.1”)
    写配置项 (相加 (取当前目录 (), “\Config.ini”), “LoginGate”, “GateAddr”, 未知支持库函数_47 ())
    写配置项 (相加 (取当前目录 (), “\Config.ini”), “LoginGate”, “PassWord”, “1234567890”)
    写配置项 (相加 (取当前目录 (), “\Config.ini”), “LoginGate”, “PassWordKb”, “1”)
    写配置项 (相加 (取当前目录 (), “\Config.ini”), “LoginGate”, “Data”, “600”)
    写配置项 (相加 (取当前目录 (), “\Config.ini”), “LoginGate”, “Start”, 版本号)
    
.如果真结束
.如果真 (等于 (文件是否存在 (相加 (未知支持库函数_7 (10), “\Msg.txt”)), 假))
    
    写到文件 (相加 (未知支持库函数_7 (10), “\Msg.txt”), 到字节集 (.内容))
    
.如果真结束
.如果真 (等于 (TCP服务器_初始化 (_启动窗口), 真))
    
    延时 (1000)
    
    客户请求事件反馈标签 ()
    
    数据抵达事件反馈标签 ()
    
    客户断开事件反馈标签 ()
    
    .如果真 (TCP服务器_绑定端口 (到数值 (读配置项 (相加 (取当前目录 (), “\Config.ini”), “LoginGate”, “GatePort”, ))))
        
        赋值 (_启动窗口., 读配置项 (相加 (取当前目录 (), “\Config.ini”), “LoginGate”, “Title”, ))
        
        .如果真 (TCP服务器_开始监听 ())
            
            未知支持库函数_0 (&程序假死演示, )
            
            未知支持库函数_0 (&连接登陆服务器, )
            
            3.置文本 (相加 (读配置项 (相加 (取当前目录 (), “\Config.ini”), “LoginGate”, “Data”, ), “ B”))
            
            0.置文本 (相加 (“  ”, 读配置项 (相加 (取当前目录 (), “\Config.ini”), “LoginGate”, “GatePort”, )))
            
            相加 (取程序时间 (), “服务启动成功...”, #换行符).加入文本 ()
            
            返回 ()
        .如果真结束
        
    .如果真结束
    
.如果真结束
相加 (取程序时间 (), “网关端口冲突...”, #换行符).加入文本 ()
延时 (4000)
运行 (相加 (取当前目录 (), “\”, 取执行文件名 ()), 假, )
结束 ()

.子程序 连接登陆服务器, 空白型, , 
.局部变量 登陆服务器地址, 文本型, , , 
.局部变量 登陆服务器端口, 文本型, , , 

赋值 (登陆服务器地址, 读配置项 (相加 (取当前目录 (), “\Config.ini”), “LoginGate”, “ServerAddr”, ))

赋值 (登陆服务器端口, 读配置项 (相加 (取当前目录 (), “\Config.ini”), “LoginGate”, “ServerPort”, ))

登陆服务器地址.未知支持库函数_2 (到数值 (登陆服务器端口))

.子程序 _客户1_连接成功, 空白型, , 
1.置文本 (“ 已连接”)

未知支持库函数_0 (&连接成功, )

.子程序 _客户1_连接失败, 空白型, , 
未知支持库函数_0 (&连接失败, )

.子程序 连接成功, 空白型, , 
“%--$”.未知支持库函数_1 ()

延时 (4000)

连接成功 ()

.子程序 连接失败, 空白型, , 
延时 (1000)

连接登陆服务器 ()

.子程序 _客户1_连接断开, 空白型, , 
1.置文本 (“ 未连接”)
未知支持库函数_0 (&连接失败, )

.子程序 _请求连接_反馈事件, 整数型, , 
.参数 参数一, 整数型, , 
.参数 参数二, 整数型, , 

.局部变量 套接字, 整数型, , , 
.局部变量 本机IP, 文本型, , , 
.局部变量 客户IP, 文本型, , "0", 
.局部变量 欢迎词, 文本型, , , 

赋值 (套接字, TCP服务器_接受请求 (参数一))

赋值 (客户IP, 分割文本 (TCP服务器_取回客户 (套接字), “:”, ))

赋值 (本机IP, 读配置项 (相加 (取当前目录 (), “\Config.ini”), “LoginGate”, “GateAddr”, ))

赋值 (欢迎词, 到文本 (传世加密 (读入文件 (相加 (未知支持库函数_7 (10), “\Logo.txt”)))))

.如果真 (等于 (寻找文本 (到文本 (读入文件 (相加 (未知支持库函数_7 (10), “\BackList.txt”))), 客户IP [1], , 假), -1))
    
    相加 (“%O”, 到文本 (套接字), “/”, 客户IP [1], “/”, 本机IP, “$”).未知支持库函数_1 ()
    
    .如果真 (等于 (读配置项 (相加 (取当前目录 (), “\Config.ini”), “LoginGate”, “Logo”, ), “1”))
        
        TCP服务器_发送数据 (套接字, 到字节集 (相加 (“#vvfuv@\svvfuvvfu”, 欢迎词, “=!”)))
        
    .如果真结束
    
    返回 ()
    
.如果真结束
TCP服务器_断开连接 (套接字)

.子程序 _数据到达_反馈事件, 整数型, , 
.参数 参数一, 整数型, , 
.参数 参数二, 整数型, , 

未知支持库函数_0 (&处理程序, 参数一)

.子程序 处理程序, 空白型, , 
.参数 套接字, 整数型, , 

.局部变量 客户数据, 文本型, , , 
.局部变量 允许数据, 整数型, , , 
.局部变量 密码开关, 文本型, , , 
.局部变量 登陆密码, 文本型, , , 
.局部变量 封包头部, 字节集, , , 
.局部变量 提示文字, 字节集, , , 

 ' ----------------------------------（变量）--------------------------------------------
赋值 (封包头部, 到字节集 (“#vvfuv@\svvfuvvfu”))
赋值 (客户数据, 到文本 (TCP服务器_取回数据 (套接字)))
赋值 (提示文字, 读入文件 (相加 (未知支持库函数_7 (10), “\Msg.txt”)))
赋值 (登陆密码, 读配置项 (相加 (取当前目录 (), “\Config.ini”), “LoginGate”, “PassWord”, ))
赋值 (密码开关, 读配置项 (相加 (取当前目录 (), “\Config.ini”), “LoginGate”, “PassWordKb”, ))
赋值 (允许数据, 到数值 (读配置项 (相加 (取当前目录 (), “\Config.ini”), “LoginGate”, “Data”, )))
 ' ----------------------------------（变量）--------------------------------------------


.如果真 (大于 (取字节集长度 (到字节集 (客户数据)), 允许数据))
    
    相加 (“过滤连接:”, TCP服务器_取回客户 (套接字), #换行符).加入文本 ()
    
    TCP服务器_断开连接 (套接字)
    
    返回 ()
    
.如果真结束
.如果真 (等于 (密码开关, “1”))
    
    .如果真 (等于 (寻找文本 (客户数据, 登陆密码, , 假), -1))
        
        TCP服务器_发送数据 (套接字, 相加 (封包头部, 传世加密 (提示文字), 到字节集 (“=!”)))
        
        返回 ()
    .如果真结束
    
.如果真结束
相加 (“%A”, 到文本 (套接字), “/”, 到文本 (客户数据), “$”).未知支持库函数_1 ()

.子程序 _连接断开_反馈事件, 整数型, , 
.参数 参数一, 整数型, , 
.参数 参数二, 整数型, , 

相加 (“%X”, 到文本 (参数一), “$”).未知支持库函数_1 ()

.子程序 _客户1_数据到达, 空白型, , 
客户处理核心 (未知支持库函数_3 ())

.子程序 客户处理核心, 空白型, , 
.参数 Data, 字节集, , 

.局部变量 数组文本, 文本型, , "0", 
.局部变量 客户句柄, 整数型, , , 
.局部变量 替换数据, 字节集, , , 
.局部变量 完整数据, 字节集, , , 

.如果真 (不等于 (到文本 (Data), “%++$”))
    
    赋值 (数组文本, 分割文本 (到文本 (Data), “/”, ))
    
    赋值 (客户句柄, 到数值 (到文本 (子字节集替换 (到字节集 (数组文本 [1]), 到字节集 (“%”), 到字节集 (“”), , 1))))
    
    赋值 (替换数据, 子字节集替换 (Data, 到字节集 (相加 (“%”, 到文本 (客户句柄), “/”)), 到字节集 (“”), , ))
    
    赋值 (完整数据, 子字节集替换 (替换数据, 到字节集 (“$”), 到字节集 (“”), , ))
    
    TCP服务器_发送数据 (客户句柄, 完整数据)
.如果真结束


.子程序 __启动窗口_可否被关闭, 逻辑型, , 
.如果真 (等于 (信息框 (“服务器正在运行,是否要退出?”, 相加 (#是否钮, #信息图标), ), #否钮))
    返回 (假)
.如果真结束


.子程序 _编辑框1_内容被改变, 空白型, , 
.如果真 (大于 (取字节集长度 (到字节集 (.内容)), 3000))
    
    赋值 (.内容, “”)
.如果真结束


.子程序 _参数设置_被选择, 空白型, , 
载入 (窗口1, , 真)

.子程序 _清除日志_被选择, 空白型, , 
赋值 (.内容, “”)

.子程序 _退出网关_被选择, 空白型, , 
.如果真 (等于 (信息框 (“服务器正在运行,是否要退出?”, 相加 (#是否钮, #信息图标), ), #是钮))
    
    结束 ()
.如果真结束


.子程序 _设置过滤_被选择, 空白型, , 
载入 (窗口3, , 真)

.子程序 _非法提示_被选择, 空白型, , 
载入 (窗口4, , 真)

.子程序 _程序制作_被选择, 空白型, , 
相加 (取程序时间 (), “晴窗 Bata:”, 版本号, #换行符).加入文本 ()

.窗口程序集 窗口程序集2, , , 

.子程序 _窗口1_创建完毕, 空白型, , 
.如果真 (等于 (读配置项 (相加 (取当前目录 (), “\Config.ini”), “LoginGate”, “PassWordKb”, ), “1”))
    
    赋值 (.选中, 真)
    赋值 (.禁止, 假)
    
.如果真结束
.如果真 (等于 (读配置项 (相加 (取当前目录 (), “\Config.ini”), “LoginGate”, “PassWordKb”, ), “0”))
    
    赋值 (.选中, 假)
    赋值 (.禁止, 真)
    
.如果真结束
.如果真 (等于 (读配置项 (相加 (取当前目录 (), “\Config.ini”), “LoginGate”, “Logo”, ), “1”))
    
    赋值 (窗口1., 418)
    
    赋值 (.选中, 真)
    
.如果真结束
赋值 (.内容, 读配置项 (相加 (取当前目录 (), “\Config.ini”), “LoginGate”, “GateAddr”, ))
赋值 (.内容, 读配置项 (相加 (取当前目录 (), “\Config.ini”), “LoginGate”, “GatePort”, ))
赋值 (.内容, 读配置项 (相加 (取当前目录 (), “\Config.ini”), “LoginGate”, “ServerAddr”, ))
赋值 (.内容, 读配置项 (相加 (取当前目录 (), “\Config.ini”), “LoginGate”, “ServerPort”, ))
赋值 (.内容, 读配置项 (相加 (取当前目录 (), “\Config.ini”), “LoginGate”, “Title”, ))
赋值 (.内容, 读配置项 (相加 (取当前目录 (), “\Config.ini”), “LoginGate”, “PassWord”, ))
.如果真 (文件是否存在 (相加 (未知支持库函数_7 (10), “\Logo.txt”)))
    
    赋值 (.内容, 到文本 (读入文件 (相加 (未知支持库函数_7 (10), “\Logo.txt”))))
    
.如果真结束
赋值 (.内容, 读配置项 (相加 (取当前目录 (), “\Config.ini”), “LoginGate”, “Data”, ))

.子程序 _按钮1_被单击, 空白型, , 
写配置项 (相加 (取当前目录 (), “\Config.ini”), “LoginGate”, “Title”, .内容)
写配置项 (相加 (取当前目录 (), “\Config.ini”), “LoginGate”, “Data”, .内容)
写配置项 (相加 (取当前目录 (), “\Config.ini”), “LoginGate”, “GatePort”, .内容)
写配置项 (相加 (取当前目录 (), “\Config.ini”), “LoginGate”, “GateAddr”, .内容)
写配置项 (相加 (取当前目录 (), “\Config.ini”), “LoginGate”, “ServerAddr”, .内容)
写配置项 (相加 (取当前目录 (), “\Config.ini”), “LoginGate”, “ServerPort”, .内容)
写配置项 (相加 (取当前目录 (), “\Config.ini”), “LoginGate”, “PassWord”, .内容)
写到文件 (相加 (未知支持库函数_7 (10), “\Logo.txt”), 到字节集 (.内容))
_启动窗口.置文本 (., 3, 相加 (读配置项 (相加 (取当前目录 (), “\Config.ini”), “LoginGate”, “Data”, ), “ B”))
销毁 ()

.子程序 _选择框1_被单击, 空白型, , 
.如果真 (等于 (.选中, 真))
    
    赋值 (.禁止, 假)
    写配置项 (相加 (取当前目录 (), “\Config.ini”), “LoginGate”, “PassWordKb”, “1”)
    
.如果真结束
.如果真 (等于 (.选中, 假))
    
    赋值 (.禁止, 真)
    写配置项 (相加 (取当前目录 (), “\Config.ini”), “LoginGate”, “PassWordKb”, “0”)
.如果真结束


.子程序 _选择框2_被单击, 空白型, , 
.如果真 (等于 (.选中, 真))
    
    赋值 (窗口1., 418)
    写配置项 (相加 (取当前目录 (), “\Config.ini”), “LoginGate”, “Logo”, “1”)
    
.如果真结束
.如果真 (等于 (.选中, 假))
    
    赋值 (窗口1., 250)
    写配置项 (相加 (取当前目录 (), “\Config.ini”), “LoginGate”, “Logo”, “0”)
    
.如果真结束


.程序集 程序集1, , , 

.子程序 取程序时间, 文本型, , 
返回 (相加 (“[”, 到文本 (取小时 (取现行时间 ())), “:”, 到文本 (取分钟 (取现行时间 ())), “:”, 到文本 (取秒 (取现行时间 ())), “] ”))

.子程序 程序假死演示, 空白型, , 
_启动窗口.置文本 (., 2, “ --”)
_启动窗口.置文本 (., 4, 取程序时间 ())
延时 (1000)
_启动窗口.置文本 (., 2, “ \”)
_启动窗口.置文本 (., 4, 取程序时间 ())
延时 (1000)
_启动窗口.置文本 (., 2, “ |”)
_启动窗口.置文本 (., 4, 取程序时间 ())
延时 (1000)
_启动窗口.置文本 (., 2, “ /”)
_启动窗口.置文本 (., 4, 取程序时间 ())
延时 (1000)
_启动窗口.置文本 (., 2, “ --”)
_启动窗口.置文本 (., 4, 取程序时间 ())
延时 (1000)
_启动窗口.置文本 (., 2, “ \”)
_启动窗口.置文本 (., 4, 取程序时间 ())
延时 (1000)
_启动窗口.置文本 (., 2, “ |”)
_启动窗口.置文本 (., 4, 取程序时间 ())
延时 (1000)
_启动窗口.置文本 (., 2, “ /”)
_启动窗口.置文本 (., 4, 取程序时间 ())
延时 (1000)
_启动窗口.置文本 (., 4, 取程序时间 ())
程序假死演示 ()

.程序集 __HIDDEN_TEMP_MOD__, , , 

.子程序 TCP服务器_初始化, 逻辑型, , 必须调用的子程序,在窗口创建完毕事件里
.参数 窗口, 窗口, , 



.子程序 TCP服务器_绑定端口, 逻辑型, , 
.参数 端口, 短整数型, , 



.子程序 TCP服务器_开始监听, 逻辑型, , 


.子程序 客户请求事件反馈标签, 空白型, , 该标签的反馈事件的参数一为套接字句柄
.参数 反馈标签, 标签, , 



.子程序 数据抵达事件反馈标签, 空白型, , 该标签的反馈事件的参数一为套接字句柄
.参数 反馈标签, 标签, , 



.子程序 客户断开事件反馈标签, 空白型, , 该标签的反馈事件的参数一为套接字句柄
.参数 反馈标签, 标签, , 



.子程序 TCP服务器_断开连接, 空白型, , 
.参数 套接字句柄, 整数型, , 



.子程序 TCP服务器_接受请求, 整数型, , 返回的是客户端的套接字,可用TCP服务器_取回客户()取回地址
.参数 套接字句柄, 整数型, , 



.子程序 TCP服务器_取回数据, 字节集, , 
.参数 套接字句柄, 整数型, , 



.子程序 TCP服务器_发送数据, 空白型, , 
.参数 套接字句柄, 整数型, , 
.参数 数据, 字节集, 参考, 



.子程序 TCP服务器_取回客户, 文本型, , 
.参数 套接字句柄, 整数型, , 



.程序集 __HIDDEN_TEMP_MOD__, , , 

.子程序 传奇_帐号注册, 文本型, , 返回加密处理过的传奇帐号注册封包
.参数 游戏帐号, 文本型, , 
.参数 游戏密码, 文本型, , 
.参数 姓名, 文本型, , 
.参数 生日, 文本型, , 格式： 1980/01/01
.参数 提示问题1, 文本型, , 
.参数 提示回答1, 文本型, , 
.参数 提示问题2, 文本型, , 
.参数 提示回答2, 文本型, , 
.参数 电话号码, 文本型, 可空, 
.参数 手机号码, 文本型, 可空, 
.参数 电子邮箱, 文本型, 可空, 



.子程序 输出字节集, 文本型, , 
.参数 源数据, 字节集, , 
.参数 分隔符, 文本型, 可空, 若空以 , 为分隔符
.参数 十六进制格式, 逻辑型, 可空, 



.子程序 传奇_密码修改, 文本型, , 返回修改传奇密码用的封包
.参数 游戏帐号, 文本型, , 
.参数 原密码, 文本型, , 
.参数 新密码, 文本型, , 



.子程序 传奇3提取识别码, 文本型, , 
.参数 验证码包, 字节集, , 



.子程序 传奇3注册加密, 文本型, , 传奇3私服的帐号注册加密功能
.参数 帐号, 文本型, , 由4-15位数字、字母、或下划线组成
.参数 密码, 文本型, , 由4-15位数字、字母和符号组成
.参数 提示问题1, 文本型, , 密码保护用的提示问题
.参数 提示回答1, 文本型, , 答案为30位以为的字符（15个以内汉字）
.参数 提示问题2, 文本型, , 很多私服这项都为默认 “■问题2■”
.参数 提示回答2, 文本型, , 如果问题2为默认的话，回答2等于 保护密钥
.参数 电子邮箱, 文本型, , 电子邮箱
.参数 识别码, 文本型, , 申请到的识别码，字母不区分大小写



.子程序 传奇3密码修改, 文本型, , 
.参数 帐号, 文本型, , 
.参数 原密码, 文本型, , 
.参数 新密码, 文本型, , 
.参数 识别码, 文本型, , 



.子程序 传世_取回密码, 字节集, , 
.参数 游戏帐号, 文本型, , 
.参数 提示问题1, 文本型, , 
.参数 提示回答1, 文本型, , 
.参数 提示问题2, 文本型, , 
.参数 提示回答2, 文本型, , 
.参数 生日, 文本型, , 



.子程序 传世_取回密码返回, 文本型, , 成功返回密码文本，找回失败返回空文本“”，其它数据返回“-1”
.参数 源封包, 字节集, , 



.子程序 传世_申取人物返回, 整数型, , 如果没有人物返回0，如果只有一个人物返回1，两个人物返回2
.参数 原封包, 字节集, , 
.参数 人物一, 人物信息, 参考, 
.参数 人物二, 人物信息, 参考, 



.子程序 传奇_红字公告, 文本型, , 把加密后的封包数据发送给传奇客户端即可
.参数 公告内容, 文本型, , 



.子程序 传奇_蓝字公告, 文本型, , 把加密后的封包数据发送给传奇客户端即可
.参数 公告内容, 文本型, , 



.子程序 传奇_聊天加密, 文本型, , 把加密后的封包数据发送给传奇服务端即可
.参数 聊天内容, 文本型, , 



.子程序 传世_选服务器, 字节集, , 
.参数 服务器名, 文本型, , 



.子程序 传世_人物网关返回, 逻辑型, , 
.参数 原封包, 字节集, , 
.参数 网关, 网关, 参考, 
.参数 验证码, 文本型, 参考, 



.子程序 传世_游戏网关返回, 逻辑型, , 
.参数 原封包, 字节集, , 
.参数 网关, 网关, 参考, 



.子程序 传世_进入游戏, 字节集, , 
.参数 游戏帐号, 文本型, , 
.参数 游戏人物, 文本型, , 
.参数 验证码, 文本型, , 
.参数 版本号, 文本型, 可空, 默认=“20050815”



.子程序 传世加密, 字节集, , 
.参数 原数据, 字节集, , 
.参数 命令头, 字节集, 可空, 
.参数 命令尾, 逻辑型, 可空, 



.子程序 传奇加密, 文本型, , 
.参数 原数据, 字节集, , 
.参数 命令头, 文本型, 可空, 
.参数 命令尾, 逻辑型, 可空, 



.子程序 传奇解密, 文本型, , 
.参数 原数据, 字节集, , 
.参数 命令头, 整数型, 可空, 
.参数 命令尾, 逻辑型, 可空, 



.子程序 传奇_帐号登陆, 文本型, , 
.参数 游戏帐号, 文本型, , 
.参数 游戏密码, 文本型, , 



.子程序 传奇_服务器组返回, 逻辑型, , 
.参数 源封包, 字节集, , 
.参数 服务器组, 文本型, 参考 数组, 



.子程序 传奇_人物网关返回, 逻辑型, , 
.参数 源封包, 字节集, , 
.参数 网关, 网关, 参考, 
.参数 验证码, 文本型, , 



.子程序 传奇_申取人物, 文本型, , 
.参数 游戏帐号, 文本型, , 
.参数 验证码, 文本型, , 



.子程序 传奇_选服务器, 文本型, , 
.参数 服务器名, 文本型, , 



.子程序 传奇_申取人物返回, 整数型, , 如果没有人物返回0，如果只有一个人物返回1，两个人物返回2
.参数 源封包, 字节集, , 
.参数 人物一, 人物信息, 参考, 
.参数 人物二, 人物信息, 参考, 



.子程序 传奇_游戏网关返回, 逻辑型, , 
.参数 源封包, 字节集, , 
.参数 网关, 网关, , 



.子程序 传奇_进入游戏, 文本型, , 
.参数 游戏帐号, 文本型, , 
.参数 游戏人物, 文本型, , 
.参数 验证码, 文本型, , 
.参数 版本号, 文本型, 可空, 默认版本号“20020522”



.子程序 传奇_删除人物, 文本型, , 
.参数 游戏人物, 文本型, , 



.子程序 传奇_选择人物, 文本型, , 
.参数 游戏帐号, 文本型, , 
.参数 游戏人物, 文本型, , 



.子程序 传奇_创建人物, 文本型, , 
.参数 游戏帐号, 文本型, , 游戏帐号
.参数 新建人物, 文本型, , 要创建的人物名
.参数 职业, 整数型, , 战士＝0，法师＝1，道士＝2
.参数 性别, 整数型, , 男＝0，女＝1



.子程序 传世_获取其它人物, 整数型, , 
.参数 源封包, 字节集, , 
.参数 人物数组, 文本型, 参考 数组, 



.子程序 传世_帐号登陆返回, 整数型, , 登陆成功返回0，密码错误＝1，帐号错误＝2，帐号锁定＝3，其它数据返回-1
.参数 源封包, 字节集, 参考, 



.子程序 传世_帐号注册返回, 整数型, , 注册成功返回0，已被注册＝1，注册失败＝2，其它数据返回-1
.参数 源封包, 字节集, 参考, 



.子程序 传世_创建人物返回, 整数型, , 创建人物成功返回0，人物存在＝1，删除成功＝2，其它数据返回-1
.参数 源封包, 字节集, , 



.子程序 传世_密码修改返回, 整数型, , 修改成功返回0，原密码错误＝1，帐号错误＝2，其它数据返回-1
.参数 源封包, 字节集, 参考, 



.子程序 传世解密, 字节集, , 
.参数 原数据, 字节集, , 
.参数 命令头, 整数型, 可空, 
.参数 命令尾, 逻辑型, 可空, 



.子程序 传奇_帐号登陆返回, 整数型, , 其它数据返回0，密码错误＝1，帐号错误＝2，帐号锁定＝3
.参数 源封包, 字节集, 参考, 



.子程序 传奇_创建人物返回, 整数型, , 创建人物成功返回0，人物存在＝1，创建失败＝2，删除成功＝3，其它数据返回-1
.参数 源封包, 字节集, 参考, 



.子程序 传奇_帐号注册返回, 整数型, , 注册成功返回0，已被注册＝1，注册失败＝2，其它数据返回-1
.参数 源封包, 字节集, 参考, 



.子程序 传奇_密码修改返回, 整数型, , 修改成功返回0，原密码错误＝1，帐号错误＝2，其它数据返回-1
.参数 源封包, 字节集, 参考, 



.子程序 传世_帐号登陆, 字节集, , 
.参数 游戏帐号, 文本型, , 
.参数 游戏密码, 文本型, , 



.子程序 传世_帐号注册, 字节集, , 返回加密处理过的传世帐号注册封包(适用于传世私服)
.参数 游戏帐号, 文本型, , 
.参数 游戏密码, 文本型, , 
.参数 姓名, 文本型, , 
.参数 身份证, 文本型, , 
.参数 生日, 文本型, , 格式： 1980/01/01
.参数 提示问题1, 文本型, , 
.参数 提示回答1, 文本型, , 
.参数 提示问题2, 文本型, , 
.参数 提示回答2, 文本型, , 
.参数 电话号码, 文本型, 可空, 
.参数 手机号码, 文本型, 可空, 
.参数 电子邮箱, 文本型, 可空, 
.参数 备注1, 文本型, 可空, 
.参数 备注2, 文本型, 可空, 



.子程序 传世_密码修改, 字节集, , 返回修改传世密码用的封包
.参数 游戏帐号, 文本型, , 
.参数 原密码, 文本型, , 
.参数 新密码, 文本型, , 



.子程序 传世_创建人物, 字节集, , 
.参数 游戏帐号, 文本型, , 游戏帐号
.参数 新建人物, 文本型, , 要创建的人物名
.参数 职业, 整数型, , 战士＝0，法师＝1，道士＝2
.参数 性别, 整数型, , 男＝0，女＝1



.子程序 传世_删除人物, 字节集, , 
.参数 人物名, 文本型, , 



.子程序 传世_申取人物, 字节集, , 
.参数 游戏帐号, 文本型, , 
.参数 验证码, 文本型, , 



.子程序 传世_选择人物, 字节集, , 
.参数 游戏帐号, 文本型, , 
.参数 登陆人物, 文本型, , 



.子程序 传世_聊天加密, 字节集, , 
.参数 聊天内容, 文本型, , 



.子程序 传世_保持连接, 字节集, , 


.子程序 传奇_保持连接, 文本型, , 


.子程序 传奇_获取其它人物, 整数型, , 
.参数 源封包, 字节集, , 
.参数 人物数组, 文本型, 参考 数组, 



.子程序 传奇_取回密码, 文本型, , 
.参数 游戏帐号, 文本型, , 
.参数 提示问题一, 文本型, , 
.参数 提示回答一, 文本型, , 
.参数 提示问题二, 文本型, , 
.参数 提示回答二, 文本型, , 
.参数 生日, 文本型, , 



.子程序 传奇_取回密码返回, 文本型, , 成功返回密码文本，找回失败返回空文本“”，其它数据返回“-1”
.参数 源封包, 字节集, , 



.窗口程序集 窗口程序集3, , , 

.子程序 _窗口3_创建完毕, 空白型, , 
.局部变量 数组项目, 文本型, , "0", 
.局部变量 计次变量, 整数型, , , 

赋值 (数组项目, 取配置节名 (相加 (未知支持库函数_7 (10), “\BackList.txt”)))

.计次循环首 (取数组成员数 (数组项目), 计次变量)
    
    读配置项 (相加 (未知支持库函数_7 (10), “\BackList.txt”), 数组项目 [计次变量], “黑IP”, ).加入项目 ()
    
.计次循环尾 ()

.子程序 _按钮1_被单击, 空白型, , 
.局部变量 黑IP, 文本型, , , 
.局部变量 删除列表, 文本型, , , 

.如果真 (等于 (.内容, “”))
    
    信息框 (“请填写一个被过滤的IP地址 !”, 16, )
    
    返回 ()
.如果真结束
.如果真 (等于 (.内容, “0.0.0.0”))
    
    信息框 (“请添写正确过滤IP地址 !”, 16, )
    
    返回 ()
    
.如果真结束
.如果真 (等于 (.选中, 真))
    
    赋值 (黑IP, .内容)
    
    写配置项 (相加 (未知支持库函数_7 (10), “\BackList.txt”), 黑IP, “黑IP”, 黑IP)
    
    黑IP.加入项目 ()
    
    信息框 (“添加完毕,”, 64, )
    
    返回 ()
    
.如果真结束
.如果真 (等于 (.选中, 真))
    
    .如果真 (等于 (.现行选中项, -1))
        
        信息框 (“无IP过滤列表..”, 16, )
        
        返回 ()
        
    .如果真结束
    赋值 (删除列表, .取项目文本 (.现行选中项))
    
    写配置项 (相加 (未知支持库函数_7 (10), “\BackList.txt”), 删除列表, , )
    
    .删除项目 (.现行选中项)
    
    信息框 (“成功删除过滤IP...”, 64, )
.如果真结束


.子程序 _列表框1_列表项被选择, 空白型, , 
赋值 (.内容, .取项目文本 (.现行选中项))

.窗口程序集 窗口程序集4, , , 

.子程序 _窗口4_创建完毕, 空白型, , 
赋值 (.内容, 到文本 (读入文件 (相加 (未知支持库函数_7 (10), “\Msg.txt”))))

.子程序 _按钮1_被单击, 空白型, , 
写到文件 (相加 (未知支持库函数_7 (10), “\Msg.txt”), 到字节集 (.内容))
信息框 (“修改完毕!”, 64, )
销毁 ()


 ' 不属于任何一个程序集、类模块的函数：
