 ' 文件类型：Windows窗口程序

 ' 程序名称：
 ' 程序描述：
 ' 程序作者：
 ' 邮政编码：
 ' 联系地址：
 ' 联系电话：
 ' 传真号码：
 ' 电子信箱：
 ' 主页地址：
 ' 版权声明：
 ' 版本号：1.0
 ' 创建号：0.0

窗口 _启动窗口 ' 在程序启动后自动调入本窗口
    左边 = 50
    顶边 = 50
    宽度 = 787
    高度 = 511
    鼠标指针 = { 0,0,0,0 }
    标记 = “”
    可视 = 真
    禁止 = 假



.声音 发射, " ' 已保存到：D:\易语言学习\Data\坦克大战2.0.e\发射", , 
.声音 爆炸, " ' 已保存到：D:\易语言学习\Data\坦克大战2.0.e\爆炸", , 
.常量 我方坦克行动速度, "10", , 
.常量 我方坦克行动距离, "10", , 
.常量 我方坦克付加数据, "“我坦克”", , 
.常量 敌坦克付加数据, "“敌坦克”", , 
.常量 敌坦克子弹, "“敌子弹”", , 
.常量 我坦克子弹, "“我子弹”", , 


 ' 所需要的支持库：
 ' krnln d09f2340818511d396f6aaf844c7e325 5 0 系统核心支持库
 ' iext2 AF6AD80AA4244A59AFB3D83ECF5173CC 2 0 扩展界面支持库二
 ' spec A512548E76954B6E92C21055517615B0 3 0 特殊功能支持库




数据类型 我方子弹类, , 
    .成员 子弹发射速度, 整数型, , , 
    .成员 子弹发射行进距离, 整数型, , , 
    .成员 子弹连发, 逻辑型, , , 
    .成员 匿名成员73, 空白型, , , 

数据类型 敌方子弹类, , 
    .成员 子弹发射速度, 整数型, , , 
    .成员 子弹发射行进距离, 整数型, , , 
    .成员 子弹连发, 逻辑型, , , 

.全局变量 集红方分数, 整数型, , , 
.全局变量 集蓝方分数, 整数型, , , 

.窗口程序集 窗口程序集1, , , 

.程序集变量 我方坦克标识, 整数型, , , 
.程序集变量 敌方坦克标识, 整数型, , "0", 
.程序集变量 我方子弹标识, 整数型, , , 
.程序集变量 敌方子弹标识, 整数型, , "0", 
.程序集变量 打中火花标识, 整数型, , , 
.程序集变量 我子弹行为, 我方子弹类, , , 
.程序集变量 敌子弹行为, 敌方子弹类, , , 
.程序集变量 敌坦克数量, 整数型, , , 
.程序集变量 方向1, 整数型, , , 
.程序集变量 我坦克数量, 整数型, , , 
.程序集变量 匿名程序集变量_430, 空白型, , , 
.子程序 __启动窗口_创建完毕, 空白型, , 
.局部变量 a, 整数型, , , 
.局部变量 i, 整数型, , , 
.局部变量 x, 整数型, , , 
.局部变量 y, 整数型, , , 

置随机数种子 ()
 ' 我子弹行为.子弹连发 ＝ 真
赋值 (我子弹行为.子弹发射速度, 50)
赋值 (我子弹行为.子弹发射行进距离, 20)
赋值 (敌子弹行为.子弹发射行进距离, 20)
赋值 (敌子弹行为.子弹发射速度, 50)
赋值 (方向1, 3)
赋值 (我坦克数量, 到数值 (.内容))
.计次循环首 (10, i)
    到文本 (i).加入项目 ()
.计次循环尾 ()
赋值 (.现行选中项, 0)
赋值 (敌坦克数量, 到数值 (.取项目文本 (.现行选中项)))


.子程序 _时钟我方行动_周期事件, 空白型, , 
.局部变量 x, 整数型, , , 
.局部变量 y, 整数型, , , 


 ' 红方移动
.判断开始 (#上光标键.未知支持库函数_116 ())
    我方坦克标识.未知支持库函数_63 (0)
    我方坦克标识.未知支持库函数_68 (5)
    
.判断 (#下光标键.未知支持库函数_116 ())
    我方坦克标识.未知支持库函数_63 (180)
    我方坦克标识.未知支持库函数_68 (5)
    
    
.判断 (#左光标键.未知支持库函数_116 ())
    我方坦克标识.未知支持库函数_63 (-90)
    我方坦克标识.未知支持库函数_68 (5)
    
    
.判断 (#右光标键.未知支持库函数_116 ())
    我方坦克标识.未知支持库函数_63 (-270)
    我方坦克标识.未知支持库函数_68 (5)
.判断 (#空格键.未知支持库函数_116 ()) ' 发子弹
    .如果 (等于 (我子弹行为.子弹连发, 真)) ' 连发
        赋值 (x, 相加 (我方坦克标识.未知支持库函数_57 (), 20))
        赋值 (y, 相加 (我方坦克标识.未知支持库函数_58 (), 20))
        赋值 (我方子弹标识, .未知支持库函数_35 (x, y, , ))
        播放音乐 (#发射, )
        我方子弹标识.未知支持库函数_63 (我方坦克标识.未知支持库函数_64 ())
        我方子弹标识.未知支持库函数_72 (我子弹行为.子弹发射行进距离, 我子弹行为.子弹发射速度, , , 真, 1, 真, , )
    .否则
        .如果 (等于 (我方子弹标识.未知支持库函数_40 (), 假)) ' 单发
            赋值 (x, 相加 (我方坦克标识.未知支持库函数_57 (), 20))
            赋值 (y, 相加 (我方坦克标识.未知支持库函数_58 (), 20))
            赋值 (我方子弹标识, .未知支持库函数_35 (x, y, , #我坦克子弹)) ' 注意:""创建物体"这个第2,3,个变量是参数的时候所生成的图形和常量不同,
             ' 我方子弹标识 ＝ 动画框1.创建物体 (动画物体我方子弹, a, b, , )
             ' 调试输出 (“我方子弹标识” ＋ 到文本 (我方子弹标识))
            播放音乐 (#发射, )
            我方子弹标识.未知支持库函数_63 (我方坦克标识.未知支持库函数_64 ())
            我方子弹标识.未知支持库函数_72 (我子弹行为.子弹发射行进距离, 我子弹行为.子弹发射速度, , , 真, 1, 真, , )
            
        .否则
            
        .如果结束
        
    .如果结束
    
.默认
    
.判断结束




.子程序 _动画框1_碰撞到边界, 逻辑型, , 
.参数 物体标识值, 整数型, , 
.参数 碰撞前横坐标, 整数型, , 
.参数 碰撞前纵坐标, 整数型, , 
.参数 边界类型, 整数型, , 

.局部变量 i, 整数型, , , 
.局部变量 方向, 整数型, , , 

 ' 动画框1.置物体位置 (物体标识值, 碰撞前横坐标, 碰撞前纵坐标, 真)
.如果 (等于 (物体标识值.未知支持库函数_55 (), “敌坦克”))
    .如果真 (等于 (.选中, 真))
        物体标识值.未知支持库函数_56 (碰撞前横坐标, 碰撞前纵坐标, 真)
        返回 ()
    .如果真结束
    
    碰撞转向 (物体标识值, 碰撞前横坐标, 碰撞前纵坐标)
.否则
    
.如果结束

.如果 (等于 (我方坦克标识, 物体标识值))
    物体标识值.未知支持库函数_56 (碰撞前横坐标, 碰撞前纵坐标, 真)
.否则
    
.如果结束



.子程序 碰撞转向, 空白型, , 
.参数 标识1, 整数型, , 
.参数 x, 整数型, , 
.参数 y, 整数型, , 

.局部变量 i, 整数型, , , 
.局部变量 方向, 整数型, , , 

 ' 动画框1.置物体位置 (物体标识值, 碰撞前横坐标, 碰撞前纵坐标, 真)
标识1.未知支持库函数_56 (x, y, 真)
赋值 (方向, 取随机数 (1, 4))

.判断开始 (等于 (方向, 1))
    标识1.未知支持库函数_63 (0)
    标识1.未知支持库函数_72 (5, 100, 0, 0, 假, , , , )
    
.判断 (等于 (方向, 3))
    标识1.未知支持库函数_63 (180)
    标识1.未知支持库函数_72 (5, 100, 0, 0, 假, , , , )
    
    
.判断 (等于 (方向, 2))
    标识1.未知支持库函数_63 (-90)
    标识1.未知支持库函数_72 (5, 100, 0, 0, 假, , , , )
    
    
.判断 (等于 (方向, 4))
    标识1.未知支持库函数_63 (-270)
    标识1.未知支持库函数_72 (5, 100, 0, 0, 假, , , , )
.默认
    
.判断结束



.子程序 _时钟敌方子弹_周期事件, 空白型, , 
.局部变量 n, 整数型, , , 
.局部变量 x, 整数型, , , 
.局部变量 y, 整数型, , , 


赋值 (n, 取随机数 (1, 取数组成员数 (敌方坦克标识)))
.如果真 (等于 (取数组成员数 (敌方坦克标识), 0))
    赋值 (.时钟周期, 0)
    调试输出 (“敌方坦克已全部消灭”)
    返回 ()
.如果真结束

.如果 (等于 (敌方子弹标识.未知支持库函数_40 ( [n]), 假))
    赋值 (x, 相加 (敌方坦克标识.未知支持库函数_57 ( [n]), 20))
    赋值 (y, 相加 (敌方坦克标识.未知支持库函数_58 ( [n]), 20))
     ' 动画框1.置物体位置 (敌方子弹标识 [n], x, y, 真)
    赋值 (敌方子弹标识 [n], .未知支持库函数_35 (x, y, , #敌坦克子弹)) ' 注意:""创建物体"这个第2,3,个变量是参数的时候所生成的图形和常量不同,
    播放音乐 (#发射, )
    敌方子弹标识.未知支持库函数_63 ( [n], 敌方坦克标识.未知支持库函数_64 ( [n]))
    敌方子弹标识.未知支持库函数_90 ( [n], 敌方坦克标识.未知支持库函数_91 ( [n]))
    
    敌方子弹标识.未知支持库函数_72 ( [n], 敌子弹行为.子弹发射行进距离, 敌子弹行为.子弹发射速度, , , 真, 1, 真, , )
    
    
.否则
    
.如果结束


 ' 如果 (动画框1.是否在区域内 (敌方子弹标识 [n], , , 动画框1.左边, 动画框1.顶边, 动画框1.宽度, 动画框1.高度) ＝ 真)



.子程序 _动画框1_碰撞到物体, 空白型, , 
.参数 碰撞物体标识值, 整数型, , 
.参数 碰撞前横坐标, 整数型, , 
.参数 碰撞前纵坐标, 整数型, , 
.参数 被碰撞物体标识值, 整数型, , 


.如果 (等于 (碰撞物体标识值.未知支持库函数_55 (), “我坦克”)) ' 碰到物体停在当前位置
    碰撞物体标识值.未知支持库函数_56 (碰撞前横坐标, 碰撞前纵坐标, 真)
    返回 ()
.否则
    
.如果结束


.如果 (等于 (碰撞物体标识值.未知支持库函数_55 (), “敌坦克”)) ' 碰到物体自动转向
    碰撞转向 (碰撞物体标识值, 碰撞前横坐标, 碰撞前纵坐标)
    返回 ()
.否则
    
.如果结束



.判断开始 (等于 (碰撞物体标识值.未知支持库函数_55 (), #我坦克子弹))
    .如果真 (等于 (被碰撞物体标识值.未知支持库函数_55 (), #敌坦克子弹)) ' 子弹对碰子弹
        播放音乐 (#爆炸, )
        碰撞物体标识值.未知支持库函数_36 ()
        被碰撞物体标识值.未知支持库函数_36 ()
        返回 ()
    .如果真结束
    
    .如果真 (等于 (被碰撞物体标识值.未知支持库函数_55 (), #敌坦克付加数据)) ' 我方子弹打到了敌坦克
        播放音乐 (#爆炸, )
        
         ' 打中爆炸效果 (碰撞前横坐标, 碰撞前纵坐标)
        碰撞物体标识值.未知支持库函数_36 ()
        被碰撞物体标识值.未知支持库函数_36 ()
        销毁敌坦克数组 (被碰撞物体标识值)
        赋值 (.标题, 到文本 (相加 (到数值 (.标题), 1)))
        返回 ()
    .如果真结束
    
.判断 (等于 (碰撞物体标识值.未知支持库函数_55 (), #敌坦克子弹))
    .如果真 (等于 (被碰撞物体标识值.未知支持库函数_55 (), #我坦克子弹)) ' 子弹对碰子弹
        播放音乐 (#爆炸, )
        碰撞物体标识值.未知支持库函数_36 ()
        被碰撞物体标识值.未知支持库函数_36 ()
        返回 ()
    .如果真结束
    
    .如果真 (等于 (被碰撞物体标识值.未知支持库函数_55 (), #我方坦克付加数据)) ' 敌方子弹打到了我坦克
        播放音乐 (#爆炸, )
        碰撞物体标识值.未知支持库函数_36 ()
        被碰撞物体标识值.未知支持库函数_36 ()
        赋值 (.标题, 到文本 (相加 (到数值 (.标题), 1)))
        我坦克计数 ()
        返回 ()
    .如果真结束
    
    
    
    
.默认
    
.判断结束





.子程序 打中爆炸效果, 空白型, , 
.参数 x, 整数型, , 
.参数 y, 整数型, , 

 ' 动画框1.置物体位置 (敌方子弹标识 [n], x, y, 真)
赋值 (打中火花标识, .未知支持库函数_35 (真, ))
延迟 (20)
打中火花标识.未知支持库函数_36 ()

.子程序 _按钮开始_被单击, 空白型, , 
.局部变量 方向, 整数型, , , 
.局部变量 i, 整数型, , , 
.局部变量 x, 整数型, , , 
.局部变量 y, 整数型, , , 

.如果真 (等于 (.选中, 真)) ' 人机对战
    赋值 ()

.子程序 敌坦克行进, 空白型, , 
.局部变量 方向, 整数型, , , 
.局部变量 i, 整数型, , , 


.如果真 (等于 (取数组成员数 (敌方坦克标识), 0))
    信息框 (“OKOKOK”, 0, )
    返回 ()
.如果真结束


.计次循环首 (取数组下标 (敌方坦克标识, ), i)
    赋值 (方向, 方向1) ' 1=上,2=左,3=下,4=右
    .判断开始 (等于 (方向, 1))
        敌方坦克标识.未知支持库函数_63 ( [i], 0)
        敌方坦克标识.未知支持库函数_72 ( [i], 5, 100, , , , , , , )
        
    .判断 (等于 (方向, 3))
        敌方坦克标识.未知支持库函数_63 ( [i], 180)
        敌方坦克标识.未知支持库函数_72 ( [i], 5, 100, , , , , , , )
        
        
    .判断 (等于 (方向, 2))
        敌方坦克标识.未知支持库函数_63 ( [i], -90)
        敌方坦克标识.未知支持库函数_72 ( [i], 5, 100, , , , , , , )
        
        
    .判断 (等于 (方向, 4))
        敌方坦克标识.未知支持库函数_63 ( [i], -270)
        敌方坦克标识.未知支持库函数_72 ( [i], 5, 100, , , , , , , )
    .默认
        
    .判断结束
    
.计次循环尾 ()


.子程序 _按钮重新_被单击, 空白型, , 
赋值 (.时钟周期, 0)
赋值 (.时钟周期, 0)
清除数组 (敌方坦克标识)
清除数组 (敌方子弹标识)
未知支持库函数_37 ()
赋值 (.禁止, 假)
赋值 (.标题, “0”)
赋值 (.标题, “0”)
赋值 (.内容, “3”)
获取焦点 ()


.子程序 销毁敌坦克数组, 空白型, , 
.参数 物体标识值, 整数型, , 

.局部变量 n1, 整数型, , , 

.计次循环首 (取数组成员数 (敌方坦克标识), n1)
    .如果真 (等于 (物体标识值, 敌方坦克标识 [n1]))
        删除成员 (敌方坦克标识, n1, )
        返回 ()
    .如果真结束
    
.计次循环尾 ()


.子程序 _组合框1_列表项被选择, 空白型, , 
赋值 (敌坦克数量, 到数值 (.取项目文本 (.现行选中项)))

.子程序 我坦克计数, 空白型, , 
赋值 (我坦克数量, 相减 (我坦克数量, 1))
.如果 (大于 (我坦克数量, 0))
    赋值 (.内容, 到文本 (我坦克数量))
    赋值 (我方坦克标识, .未知支持库函数_35 (260, 430, , #我方坦克付加数据))
    返回 ()
    
.否则
    赋值 (.内容, “0”)
    信息框 (“我输得好惨(- -|)”, 0, )
    
.如果结束


.子程序 _时钟人人对战_周期事件, 空白型, , 
.局部变量 x, 整数型, , , 
.局部变量 y, 整数型, , , 

 ' 37 左    38 上    39 右    40 下    32 空格

 ' 敌方移动
.判断开始 (#W键.未知支持库函数_116 ())
    敌方坦克标识.未知支持库函数_63 ( [1], 0)
    敌方坦克标识.未知支持库函数_68 ( [1], 5)
    
.判断 (#S键.未知支持库函数_116 ())
    敌方坦克标识.未知支持库函数_63 ( [1], 180)
    敌方坦克标识.未知支持库函数_68 ( [1], 5)
    
    
.判断 (#A键.未知支持库函数_116 ())
    敌方坦克标识.未知支持库函数_63 ( [1], -90)
    敌方坦克标识.未知支持库函数_68 ( [1], 5)
    
    
.判断 (#D键.未知支持库函数_116 ())
    敌方坦克标识.未知支持库函数_63 ( [1], -270)
    敌方坦克标识.未知支持库函数_68 ( [1], 5)
.判断 (#键0.未知支持库函数_116 ()) ' 发子弹
    .如果 (等于 (敌方子弹标识.未知支持库函数_40 ( [1]), 假)) ' 单发
        赋值 (x, 相加 (敌方坦克标识.未知支持库函数_57 ( [1]), 18))
        
        赋值 (y, 相加 (敌方坦克标识.未知支持库函数_58 ( [1]), 18))
        
        赋值 (敌方子弹标识 [1], .未知支持库函数_35 (x, y, , #敌坦克子弹))
        敌方子弹标识.未知支持库函数_90 ( [1], 1)
        播放音乐 (#发射, )
        敌方子弹标识.未知支持库函数_63 ( [1], 敌方坦克标识.未知支持库函数_64 ( [1]))
        敌方子弹标识.未知支持库函数_72 ( [1], 敌子弹行为.子弹发射行进距离, 敌子弹行为.子弹发射速度, , , 真, 1, 真, , )
        
    .否则
        
    .如果结束
    
    
.默认
    
.判断结束



 ' 不属于任何一个程序集、类模块的函数：
