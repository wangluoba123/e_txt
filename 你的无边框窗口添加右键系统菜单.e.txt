 ' 文件类型：Windows窗口程序

 ' 程序名称：
 ' 程序描述：
 ' 程序作者：方圆软件工作室－林炳崇（近在眼前）出品
 ' 邮政编码：
 ' 联系地址：
 ' 联系电话：
 ' 传真号码：
 ' 电子信箱：
 ' 主页地址：
 ' 版权声明：
 ' 版本号：1.0
 ' 创建号：0.0

窗口 _启动窗口 ' 在程序启动后自动调入本窗口
    左边 = 50
    顶边 = 50
    宽度 = 421
    高度 = 425
    鼠标指针 = { 0,0,0,0 }
    标记 = “”
    可视 = 真
    禁止 = 假
    边框 = 0
    底图方式 = 1
    底色 = 16314055 '  0xF8EEC7
    最大化按钮 = 假
    最小化按钮 = 真
    控制按钮 = 真
    位置 = 1
    可否移动 = 真
    背景音乐播放次数 = 0
    回车下移焦点 = 假
    Esc键关闭 = 真
    F1键打开帮助 = 假
    帮助标志值 = 0
    在任务栏中显示 = 真
    随意移动 = 真
    外形 = 0
    总在最前 = 假
    保持标题栏激活 = 真
    底图 =  ' 空
    图标 =  ' 空
    背景音乐 =  ' 空
    标题 = “方圆软件－聊天助手V1.6”
    帮助文件名 = “”



.图片 tb, " ' 已保存到：D:\易语言学习\Data\你的无边框窗口添加右键系统菜单.e\tb", , 


 ' 所需要的支持库：
 ' krnln d09f2340818511d396f6aaf844c7e325 4 4 系统核心支持库
 ' iext 27bb20fdd3e145e4bee3db39ddd6e64c 1 2 扩展界面支持库一
 ' iext2 AF6AD80AA4244A59AFB3D83ECF5173CC 1 1 扩展界面支持库二
 ' spec A512548E76954B6E92C21055517615B0 2 1 特殊功能支持库





.DLL命令 GetWindowLong, 整数型, "", "GetWindowLongA", , 
    .参数 a, 整数型, , 
    .参数 b, 整数型, , 

.DLL命令 GetSystemMenu, 整数型, "", "GetSystemMenu", , 
    .参数 hwnd, 整数型, , 
    .参数 bRevert, 整数型, , 

.DLL命令 TrackPopupMenu, 整数型, "", "TrackPopupMenu", , 
    .参数 hMenu, 整数型, , 
    .参数 wFlags, 整数型, , 
    .参数 x, 整数型, , 
    .参数 y, 整数型, , 
    .参数 nReserved, 整数型, , 
    .参数 hwnd, 整数型, , 
    .参数 rect, 整数型, , 

.DLL命令 SetWindowLong, 整数型, "", "SetWindowLongA", , 
    .参数 a, 整数型, , 
    .参数 b, 整数型, , 
    .参数 c, 整数型, , 

.DLL命令 SetWindowLong1, 子程序指针, "user32", "SetWindowLongA", , 
    .参数 hwnd, 整数型, , 
    .参数 nIndex, 整数型, , 
    .参数 dwNewLong, 子程序指针, , 

.DLL命令 CallWindowProc, 整数型, "user32", "CallWindowProcA", , 
    .参数 lpPrevWndFunc, 子程序指针, , 
    .参数 hWnd, 整数型, , 
    .参数 Msg, 整数型, , 
    .参数 wParam, 整数型, , 
    .参数 lParam, 整数型, , 

.DLL命令 EnableMenuItem, 整数型, "user32", "EnableMenuItem", , 
    .参数 hMenu, 整数型, , 
    .参数 wIDEnableItem, 整数型, , 
    .参数 wEnable, 整数型, , 

.窗口程序集 窗口程序集1, , , 

.程序集变量 old, 子程序指针, , , 
.程序集变量 hmenu, 整数型, , , 
.子程序 _图形按钮2_被单击, 空白型, , 
结束 ()

.子程序 _图形按钮1_被单击, 空白型, , 
赋值 (., 2)

.子程序 __启动窗口_创建完毕, 空白型, , 
30.定位写出 (7, “ 方圆软件－聊天助手V2.2”)
载入图片 (#tb).画图片 (5, 2, 20, 20, )
SetWindowLong (取窗口句柄 (), -16, 相加 (GetWindowLong (取窗口句柄 (), -16), 524288)) ' 添加任务栏右键菜单
赋值 (old, SetWindowLong1 (取窗口句柄 (), -4, &处理))
赋值 (hmenu, GetSystemMenu (取窗口句柄 (), 0))

.子程序 _画板1_鼠标位置被移动, 逻辑型, , 
.参数 横向位置, 整数型, , 
.参数 纵向位置, 整数型, , 
.参数 功能键状态, 整数型, , 

发送信息 (161, 2, 0)

.子程序 _画板1_鼠标右键被放开, 逻辑型, , 
.参数 横向位置, 整数型, , 
.参数 纵向位置, 整数型, , 
.参数 功能键状态, 整数型, , 

TrackPopupMenu (hmenu, 0, 相加 (取鼠标水平位置 (), 5), 相加 (取鼠标垂直位置 (), 5), 0, 取窗口句柄 (), 0)

.子程序 _画板1_鼠标左键被按下, 逻辑型, , 
.参数 横向位置, 整数型, , 
.参数 纵向位置, 整数型, , 
.参数 功能键状态, 整数型, , 

调试输出 (横向位置, 纵向位置)
.如果真 (并且 (大于 (横向位置, 5), 小于 (横向位置, 20), 大于 (纵向位置, 2), 小于 (纵向位置, 20)))
    TrackPopupMenu (hmenu, 0, 相加 (取鼠标水平位置 (), 5), 相加 (取鼠标垂直位置 (), 5), 0, 取窗口句柄 (), 0)
.如果真结束


.子程序 处理, 整数型, , 
.参数 hwnd, 空白型, , 
.参数 msg, 空白型, , 
.参数 wp, 空白型, , 
.参数 lp, 空白型, , 

.如果真 (等于 (msg, 273))
    发送信息 (274, wp, 0)
.如果真结束
返回 (CallWindowProc (old, hwnd, msg, wp, lp))



 ' 不属于任何一个程序集、类模块的函数：
