 ' 文件类型：Windows窗口程序

 ' 程序名称：精灵
 ' 程序描述：显示DirectX支持库基本使用方法
 ' 程序作者：大有吴涛易语言软件公司
 ' 邮政编码：116001
 ' 联系地址：辽宁省大连市中山区人民路55号亚太国际金融中心
 ' 联系电话：+86(0411)88995831
 ' 传真号码：+86(0411)88995834
 ' 电子信箱：service@dywt.com.cn
 ' 主页地址：http://dywt.com.cn
 ' 版权声明：
 ' 版本号：1.0
 ' 创建号：0.0

窗口 _启动窗口 ' 在程序启动后自动调入本窗口
    左边 = 50
    顶边 = 50
    宽度 = 380
    高度 = 250
    鼠标指针 = { 0,0,0,0 }
    标记 = “”
    可视 = 真
    禁止 = 假



.常量 屏幕宽度, "800", , 
.常量 屏幕高度, "600", , 
.常量 屏幕位数, "16", , 
.常量 精灵宽度, "78", , 
.常量 精灵高度, "80", , 
.常量 精灵个数, "20", , 
.常量 帮助文本, "“按ESC键退出”", , 


 ' 所需要的支持库：
 ' krnln d09f2340818511d396f6aaf844c7e325 4 3 系统核心支持库
 ' EdirectX 81690053A86045bf9E362F5DE0BC4095 1 2 DirectX支持库




数据类型 精灵结构, , 
    .成员 X坐标, 小数型, , , 
    .成员 Y坐标, 小数型, , , 
    .成员 X速度, 小数型, , , 
    .成员 Y速度, 小数型, , , 


.窗口程序集 窗口程序集1, , , 

.程序集变量 显示, 未知类型0x20007, , , 
.程序集变量 精灵页面, 未知类型0x2000B, , , 
.程序集变量 文本页面, 未知类型0x2000B, , , 
.程序集变量 视口矩形, 未知类型0x2000D, , , 
.程序集变量 屏幕矩形, 未知类型0x2000D, , , 
.程序集变量 是否活动, 逻辑型, , , 
.程序集变量 精灵数组, 精灵结构, , "0", 
.程序集变量 最后计时, 整数型, , , 
.程序集变量 midi, 未知类型0x20005, , , 
.子程序 __启动窗口_创建完毕, 空白型, , 
.如果真 (等于 (初始化 (), 假))
    信息框 (“初始化失败！”, 0, )
    销毁 ()
.如果真结束
 ' 
文本页面.未知支持库函数_124 (取颜色值 (0, 0, 0))
文本页面.未知支持库函数_126 (50, 30, 取颜色值 (255, 255, 0), #帮助文本)

赋值 (最后计时, 取启动时间 ())

midi.未知支持库函数_195 (取窗口句柄 ())
midi.未知支持库函数_196 (“play.mid”)

.子程序 处理下一帧, 空白型, , 
.局部变量 计时, 整数型, , , 
.局部变量 间隔, 整数型, , , 
.局部变量 计次, 整数型, , , 

 ' 赋值 (计时, 取启动时间 ())
 ' 赋值 (间隔, 相减 (计时, 最后计时))
 ' 如果真 (间隔 ＝ 0)
 ' 返回 ()

.计次循环首 (#精灵个数, 计次)
    更新精灵 (精灵数组 [计次])
.计次循环尾 ()

 ' 在屏幕上显示精灵
显示精灵 ()


.子程序 更新精灵, 空白型, , 
.参数 精灵, 精灵结构, 参考, 

 ' 更新精灵位置
赋值 (精灵.X坐标, 相加 (精灵.X坐标, 相除 (相乘 (精灵.X速度, 取随机数 (0, 100)), 1000)))
赋值 (精灵.Y坐标, 相加 (精灵.Y坐标, 相除 (相乘 (精灵.Y速度, 取随机数 (0, 100)), 1000)))

 ' 检测精灵位置
.如果真 (小于 (精灵.X坐标, 0))
    赋值 (精灵.X坐标, 0)
    赋值 (精灵.X速度, 相乘 (精灵.X速度, -1))
.如果真结束

.如果真 (大于或等于 (精灵.X坐标, 相减 (显示.未知支持库函数_79 (), #精灵宽度)))
    赋值 (精灵.X坐标, 相减 (显示.未知支持库函数_79 (), 1, #精灵宽度))
    赋值 (精灵.X速度, 相乘 (精灵.X速度, -1))
.如果真结束

.如果真 (小于 (精灵.Y坐标, 0))
    赋值 (精灵.Y坐标, 0)
    赋值 (精灵.Y速度, 相乘 (精灵.Y速度, -1))
.如果真结束

.如果真 (大于或等于 (精灵.Y坐标, 相减 (显示.未知支持库函数_80 (), #精灵高度)))
    赋值 (精灵.Y坐标, 相减 (显示.未知支持库函数_80 (), 1, #精灵高度))
    赋值 (精灵.Y速度, 相乘 (精灵.Y速度, -1))
.如果真结束


.子程序 显示精灵, 空白型, , 
.局部变量 计次, 整数型, , , 

文本页面.未知支持库函数_132 (显示.未知支持库函数_83 (), 0, 0, )

.计次循环首 (#精灵个数, 计次)
    精灵页面.未知支持库函数_157 ()
    精灵页面.未知支持库函数_134 (显示.未知支持库函数_83 (), 精灵数组 [计次], X坐标, 精灵数组 [计次], Y坐标, )
     ' 精灵页面.透明透空块复制 (显示.取后台页面 (), 精灵数组 [计次].X坐标, 精灵数组 [计次].Y坐标, , 取随机数 (0, 256))
.计次循环尾 ()

显示.未知支持库函数_69 (假, 假, 假)

.子程序 初始化, 逻辑型, , 
.局部变量 记数, 整数型, , , 

.如果真 (等于 (显示.未知支持库函数_63 (取窗口句柄 (), #屏幕宽度, #屏幕高度, #屏幕位数, 假), 假))
    信息框 (“当前显卡不支持 640*480*16”, 0, )
    返回 (假)
.如果真结束

.如果真 (等于 (精灵页面.未知支持库函数_111 (显示, “bug1.bmp”, #), 假))
    返回 (假)
.如果真结束

文本页面.未知支持库函数_110 (显示, #屏幕宽度, #屏幕高度, #)

重定义数组 (精灵数组, 假, #精灵个数)
.计次循环首 (#精灵个数, 记数)
    赋值 (精灵数组 [记数], X坐标, 求余数 (取随机数 (), 显示.未知支持库函数_79 ()))
    赋值 (精灵数组 [记数], Y坐标, 求余数 (取随机数 (), 显示.未知支持库函数_80 ()))
    
    赋值 (精灵数组 [记数], X速度, 相减 (相除 (相乘 (500, 取随机数 (0, 10000)), 10000), 250))
    赋值 (精灵数组 [记数], Y速度, 相减 (相除 (相乘 (500, 取随机数 (0, 10000)), 10000), 250))
.计次循环尾 ()

返回 (真)



.子程序 _时钟1_周期事件, 空白型, , 
处理下一帧 ()

 ' 文本页面.未知支持库函数_132 (显示.未知支持库函数_83 (), 0, 0, )
 ' 精灵页面.未知支持库函数_157 ()
 ' 精灵页面.未知支持库函数_134 (显示.未知支持库函数_83 (), , , )
 ' 赋值 (相加 (5))
 ' 赋值 (相加 (5))
 ' 
 ' 显示.未知支持库函数_69 (真, 假, 假)

.子程序 __启动窗口_将被销毁, 空白型, , 
midi.未知支持库函数_197 ()



 ' 不属于任何一个程序集、类模块的函数：
