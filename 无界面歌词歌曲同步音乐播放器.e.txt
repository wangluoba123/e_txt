 ' 文件类型：Windows窗口程序

 ' 程序名称：无界面歌词歌曲同步音乐播放器
 ' 程序描述：无界面歌词歌曲同步音乐播放器
@备注:
无界面歌词歌曲同步音乐播放器
 ' 程序作者：百鸟星辰
 ' 邮政编码：
 ' 联系地址：
 ' 联系电话：
 ' 传真号码：
 ' 电子信箱：
 ' 主页地址：
 ' 版权声明：
 ' 版本号：1.0
 ' 创建号：0.0

窗口 _启动窗口 ' 在程序启动后自动调入本窗口
    左边 = 50
    顶边 = 50
    宽度 = 410
    高度 = 48
    鼠标指针 = { 0,0,0,0 }
    标记 = “”
    可视 = 假
    禁止 = 假
    边框 = 2
    底图方式 = 1
    底色 = -16777216 '  0xFF000000
    最大化按钮 = 假
    最小化按钮 = 假
    控制按钮 = 真
    位置 = 1
    可否移动 = 真
    背景音乐播放次数 = 0
    回车下移焦点 = 假
    Esc键关闭 = 真
    F1键打开帮助 = 假
    帮助标志值 = 0
    在任务栏中显示 = 真
    随意移动 = 假
    外形 = 0
    总在最前 = 假
    保持标题栏激活 = 假
    窗口类名 = “”
    底图 =  ' 空
    图标 =  ' 空
    背景音乐 =  ' 空
    标题 = “”
    帮助文件名 = “”

窗口 歌词窗口
    左边 = 50
    顶边 = 50
    宽度 = 558
    高度 = 286
    鼠标指针 = { 0,0,0,0 }
    标记 = “”
    可视 = 真
    禁止 = 假
    边框 = 0
    底图方式 = 1
    底色 = 16711935 '  0xFF00FF
    最大化按钮 = 假
    最小化按钮 = 假
    控制按钮 = 假
    位置 = 1
    可否移动 = 真
    背景音乐播放次数 = 0
    回车下移焦点 = 假
    Esc键关闭 = 真
    F1键打开帮助 = 假
    帮助标志值 = 0
    在任务栏中显示 = 真
    随意移动 = 真
    外形 = 0
    总在最前 = 真
    保持标题栏激活 = 假
    窗口类名 = “”
    底图 =  ' 空
    图标 =  ' 空
    背景音乐 =  ' 空
    标题 = “歌词”
    帮助文件名 = “”





 ' 所需要的支持库：
 ' krnln d09f2340818511d396f6aaf844c7e325 5 0 系统核心支持库
 ' RegEx 684944CB04624eb7BD5412A519421D34 2 0 正则表达式支持库
 ' eMMedia 824F144B108A4bcbB966F45670D42A00 3 0 多媒体支持库
 ' spec A512548E76954B6E92C21055517615B0 3 1 特殊功能支持库
 ' BmpOperate 42305932-06E6-47a5-AC79-8BDCDC58DF61 2 0 位图操作支持库
 ' iext 27bb20fdd3e145e4bee3db39ddd6e64c 2 0 扩展界面支持库一
 ' iext2 AF6AD80AA4244A59AFB3D83ECF5173CC 2 0 扩展界面支持库二



 ' 所需要的模块
 ' 鼠标移入移出事件模块 C:\Documents and Settings\dell\桌面\新建文件夹\注册鼠标移出移入事件.ec


数据类型 歌词, , 
    .成员 时间, 整数型, , , 
    .成员 内容, 文本型, , , 
    .成员 时间标签, 文本型, , , 

数据类型 歌词管理配置, , 
    .成员 _前景色, 整数型, , , 
    .成员 _背景色, 整数型, , , 
    .成员 _高亮色, 整数型, , , 
    .成员 _边框色, 整数型, , , 
    .成员 _横向间距, 整数型, , , 
    .成员 _纵向间距, 整数型, , , 
    .成员 _歌词头部, 文本型, , , 
    .成员 _当前时间, 整数型, , , 
    .成员 _绘制方式, 整数型, , , 
    .成员 _渐变范围, 整数型, , , 边界的渐变范围百分比
    .成员 _热点类型, 整数型, , , 0. 空   1. 直线   2. 划线   3. 点线   4. 点划线   5. 双点划线  6. 内直线  7. 动画
    .成员 _热点动画_上次时间, 整数型, , , 
    .成员 _热点动画_上次类型, 整数型, , , 
    .成员 _渐变边界, 逻辑型, , , 
    .成员 _时间滚动轴, 逻辑型, , , 
    .成员 _卡拉OK效果, 逻辑型, , , 
    .成员 _省CPU模式, 逻辑型, , , 
    .成员 _省CPU模式_上次位置, 整数型, , , 

.全局变量 歌词操作, 歌词管理, , , 

.DLL命令 设置窗口, 整数型, "", "SetWindowLongA", , 
    .参数 hwnd, 整数型, , 
    .参数 nIndex, 整数型, , 
    .参数 dwNewLong, 空白型, , 

.DLL命令 取窗口风格, 整数型, "", "GetWindowLongA", , 
    .参数 hwnd, 整数型, , 
    .参数 nIndex, 整数型, , 

.DLL命令 设置透明, 整数型, "", "SetLayeredWindowAttributes", , 
    .参数 hwnd, 整数型, , 
    .参数 crkey, 整数型, , 
    .参数 alpha, 字节型, , 
    .参数 dwflags, 整数型, , 

.DLL命令 ReleaseCapture, 整数型, "user32", "ReleaseCapture", 公开, 为当前的应用程序释放鼠标捕获。

.DLL命令 CallWindowProc, 整数型, "user32.dll", "CallWindowProcA", 公开, ,
    .参数 前一窗口函数地址, 整数型, , 
    .参数 hwnd, 整数型, , 
    .参数 wMsg, 整数型, , 
    .参数 wParam, 整数型, , 
    .参数 lParam, 整数型, , 

.DLL命令 GetClientRect, 整数型, "user32", "GetClientRect", 公开, 返回指定窗口客户区矩形的大小  非零表示成功，零表示失败。会设置GetLastError
    .参数 hwnd, 整数型, , 欲计算大小的目标窗口
    .参数 RECT, 未知类型0x41010A44, , RECT，指定一个矩形，用客户区域的大小载入（以像素为单位）;

.DLL命令 CreateThread, 整数型, "kernel32", "CreateThread", 公开, 
    .参数 lpThreadAttributes, 整数型, , 
    .参数 dwStackSize, 整数型, , 
    .参数 lpStartAddress, 整数型, , 
    .参数 lpParameter, 整数型, , 
    .参数 dwCreationFlags, 整数型, , 
    .参数 lpThreadId, 整数型, , 

.DLL命令 SetWindowLong, 整数型, "user32", "SetWindowLongA", 公开, 在窗口结构中为指定的窗口设置信息  指定数据的前一个值
    .参数 hwnd, 整数型, , 
    .参数 nIndex, 整数型, , 
    .参数 dwNewLong, 整数型, , 

.DLL命令 SetCapture, 整数型, "user32", "SetCapture", 公开, 将鼠标捕获设置到指定的窗口。
    .参数 hwnd, 整数型, , 要接收所有鼠标输入的窗口的句柄;

.类模块 歌词管理, , , 

.程序集变量 _主画板, 画板, , , 
.程序集变量 _备用画板, 画板, , , 
.程序集变量 _效果画板A, 画板, , , 
.程序集变量 _效果画板B, 画板, , , 
.程序集变量 匿名程序集变量_62, 空白型, , , 
.程序集变量 _前景色, 整数型, , , 
.程序集变量 _背景色, 整数型, , , 
.程序集变量 _高亮色, 整数型, , , 
.程序集变量 _边框色, 整数型, , , 
.程序集变量 _横向间距, 整数型, , , 
.程序集变量 _纵向间距, 整数型, , , 
.程序集变量 匿名程序集变量_1388, 空白型, , , 
.程序集变量 _歌词头部, 文本型, , , 
.程序集变量 _当前歌词, 歌词, , "0", 
.程序集变量 _歌词路径, 文本型, , , 
.程序集变量 匿名程序集变量_324, 空白型, , , 
.程序集变量 _当前时间, 整数型, , , 
.程序集变量 _绘制方式, 整数型, , , 
.程序集变量 _渐变范围, 整数型, , , 边界的渐变范围百分比
.程序集变量 _热点类型, 整数型, , , 0. 空   1. 直线   2. 划线   3. 点线   4. 点划线   5. 双点划线  6. 内直线  7. 动画
.程序集变量 _热点动画_上次时间, 整数型, , , 
.程序集变量 _热点动画_上次类型, 整数型, , , 
.程序集变量 _渐变边界, 逻辑型, , , 
.程序集变量 匿名程序集变量_1043, 空白型, , , 
.程序集变量 _时间滚动轴, 逻辑型, , , 
.程序集变量 匿名程序集变量_1484, 空白型, , , 
.程序集变量 _卡拉OK效果, 逻辑型, , , 
.程序集变量 _省CPU模式, 逻辑型, , , 
.程序集变量 _省CPU模式_上次位置, 整数型, , , 
.子程序 _初始化, 空白型, , 当基于本类的对象被创建后，此方法会被自动调用
赋值 (_背景色, #黑色)
赋值 (_前景色, #天蓝)
赋值 (_高亮色, #绿色)
赋值 (_边框色, #墨绿)
赋值 (_热点类型, 0)

赋值 (_横向间距, 20)
赋值 (_纵向间距, 6)

赋值 (_渐变范围, 15)
赋值 (_渐变边界, 假)
赋值 (_时间滚动轴, 假)

赋值 (_卡拉OK效果, 假)
赋值 (_省CPU模式, 假)
 ' --========  易语言资源网  (www.5A5X.com)  ======--
 ' 努力创建完善、持续更新的易语言学习例程源码资源站
 ' --================   www.5A5X.com  ===========--
 ' --==================   易语言资源网注意事项  ================--
 ' * 易语言资源网为易语言官方站、易语言官方论坛提供辅助资源站；
 ' 本易语言资源网( www.5A5X.com)所有软件和资料均为软件作者提
 ' 供和网友推荐发布而来，其版权归该软件和程序源码的合法拥有者所
 ' 有，本站易语言资源网整理收集仅供易语言用户学习和易语言技术研
 ' 究探讨使用，不得用于任何商业用途。如果由于以上原因造成的版权
 ' 纠纷本站概不负责！
 ' * 本站资源未经许可，任何网站不得非法盗链及抄袭本站资源；如引用
 ' 页面，请注明来自易语言资源网，谢谢合作！
 ' --=====================   www.5A5X.com  ================--


.子程序 _销毁, 空白型, , 当基于本类的对象被销毁前，此方法会被自动调用
.如果真 (是否已创建 (_备用画板))
    _备用画板.销毁 ()
.如果真结束


.子程序 取文件路径信息, 文本型, 公开, 
.参数 文件路径_, 文本型, , 
.参数 获取类型_, 整数型, 可空, [0]文件名称  [1]不带后缀的文件名称  [2]标准格式路径  [3]文件后缀  [4]带"/"格式的目录路径  [5]不带"/"格式的目录路径

.局部变量 临时文本, 文本型, , , 
.局部变量 返回数据, 文本型, , , 

赋值 (临时文本, 子文本替换 (文件路径_, “\”, “/”, , , 真))
赋值 (返回数据, 临时文本)
.判断开始 (或者 (等于 (获取类型_, 0), 等于 (获取类型_, 1), 等于 (获取类型_, 3)))
    .如果真 (大于 (寻找文本 (临时文本, “/”, , 假), 0))
        赋值 (临时文本, 取文本右边 (临时文本, 相减 (取文本长度 (临时文本), 倒找文本 (临时文本, “/”, , 假))))
    .如果真结束
    .判断开始 (等于 (获取类型_, 0))
        赋值 (返回数据, 临时文本)
    .判断 (等于 (获取类型_, 1))
        .如果真 (大于 (寻找文本 (临时文本, “.”, , 假), 0))
            赋值 (临时文本, 取文本左边 (临时文本, 相减 (倒找文本 (临时文本, “.”, , 假), 1)))
        .如果真结束
        赋值 (返回数据, 临时文本)
    .判断 (等于 (获取类型_, 3))
        .如果真 (大于 (寻找文本 (临时文本, “.”, , 假), 0))
            赋值 (临时文本, 取文本右边 (临时文本, 相减 (取文本长度 (临时文本), 倒找文本 (临时文本, “.”, , 假))))
            赋值 (返回数据, 临时文本)
        .如果真结束
         ' 本源码来自易语言资源网(www.5A5X.com)
    .默认
        
    .判断结束
    
.判断 (等于 (获取类型_, 2))
    赋值 (返回数据, 临时文本)
.判断 (等于 (获取类型_, 4))
    .如果真 (不等于 (取文本右边 (临时文本, 1), “/”))
        赋值 (临时文本, 相加 (临时文本, “/”))
    .如果真结束
    赋值 (返回数据, 临时文本)
.判断 (等于 (获取类型_, 5))
    .如果真 (等于 (取文本右边 (临时文本, 1), “/”))
        赋值 (临时文本, 取文本左边 (临时文本, 相减 (取文本长度 (临时文本), 1)))
    .如果真结束
    赋值 (返回数据, 临时文本)
.默认
    
.判断结束
返回 (返回数据)


.子程序 _设备初始化, 空白型, 公开, 
.参数 画板_, 画板, 参考, 

赋值 (画板_.自动重画, 真)
赋值 (_主画板, 画板_)
.如果真 (是否已创建 (_备用画板))
    _备用画板.销毁 ()
.如果真结束
.如果真 (是否已创建 (_效果画板A))
    _效果画板A.销毁 ()
.如果真结束
.如果真 (是否已创建 (_效果画板B))
    _效果画板B.销毁 ()
.如果真结束
复制窗口组件 (_主画板, _备用画板)
复制窗口组件 (_主画板, _效果画板A)
复制窗口组件 (_主画板, _效果画板B)
.如果真 (等于 (是否已创建 (_主画板), 假))
    返回 ()
.如果真结束
赋值 (_备用画板.自动重画, 真)
赋值 (_效果画板A.自动重画, 真)
赋值 (_效果画板B.自动重画, 真)
连续赋值 (#透明, _备用画板.文本背景颜色, _效果画板A.文本背景颜色, _效果画板B.文本背景颜色)
刷新字体 ()
 ' 本源码来自易语言资源网(www.5A5X.com)

.子程序 _类初始化, 空白型, 公开, 
.参数 画板_, 画板, 参考 可空, 
.参数 前景色_, 整数型, 可空, 
.参数 背景色_, 整数型, 可空, 
.参数 高亮色_, 整数型, 可空, 
.参数 边框色_, 整数型, 可空, 
.参数 横向间距_, 整数型, 可空, 
.参数 纵向间距_, 整数型, 可空, 
.参数 渐变范围_, 整数型, 可空, 
.参数 热点类型_, 整数型, 可空, 
.参数 渐变边界_, 逻辑型, 可空, 
.参数 卡拉OK效果_, 逻辑型, 可空, 
.参数 省CPU模式_, 逻辑型, 可空, 

赋值 (_省CPU模式_上次位置, -1)
.如果真 (等于 (假, 是否为空 (画板_)))
    _设备初始化 (画板_)
.如果真结束
.如果真 (等于 (假, 是否为空 (前景色_)))
    赋值 (_前景色, 前景色_)
.如果真结束
.如果真 (等于 (假, 是否为空 (背景色_)))
    赋值 (_背景色, 背景色_)
    .如果真 (是否已创建 (_主画板))
        赋值 (_主画板.画板背景色, _背景色)
    .如果真结束
    .如果真 (是否已创建 (_备用画板))
        赋值 (_备用画板.画板背景色, _背景色)
    .如果真结束
    .如果真 (是否已创建 (_效果画板A))
        赋值 (_效果画板A.画板背景色, _背景色)
    .如果真结束
    .如果真 (是否已创建 (_效果画板B))
        赋值 (_效果画板B.画板背景色, _背景色)
    .如果真结束
     ' 本源码来自易语言资源网(www.5A5X.com)
.如果真结束
.如果真 (等于 (假, 是否为空 (高亮色_)))
    赋值 (_高亮色, 高亮色_)
.如果真结束
.如果真 (等于 (假, 是否为空 (横向间距_)))
    赋值 (_横向间距, 横向间距_)
.如果真结束
.如果真 (等于 (假, 是否为空 (纵向间距_)))
    赋值 (_纵向间距, 纵向间距_)
.如果真结束
.如果真 (等于 (假, 是否为空 (渐变范围_)))
    赋值 (_渐变范围, 渐变范围_)
.如果真结束
.如果真 (等于 (假, 是否为空 (热点类型_)))
    赋值 (_热点类型, 热点类型_)
.如果真结束
.如果真 (等于 (假, 是否为空 (渐变边界_)))
    赋值 (_渐变边界, 渐变边界_)
.如果真结束
.如果真 (等于 (假, 是否为空 (边框色_)))
    赋值 (_边框色, 边框色_)
.如果真结束
.如果真 (等于 (假, 是否为空 (边框色_)))
    赋值 (_边框色, 边框色_)
.如果真结束
.如果真 (等于 (假, 是否为空 (卡拉OK效果_)))
    赋值 (_卡拉OK效果, 卡拉OK效果_)
.如果真结束
.如果真 (等于 (假, 是否为空 (省CPU模式_)))
    赋值 (_省CPU模式, 省CPU模式_)
.如果真结束


.子程序 载入歌词, 逻辑型, 公开, 
.参数 文件路径_, 文本型, , 
.参数 文件类型_, 整数型, 可空, [0]音乐文件路径  [1]歌词文件路径  默认为 0

.局部变量 临时文本, 文本型, , , 
.局部变量 查找数据, 文本型, , , 
.局部变量 歌词路径, 文本型, , , 

当前时间 (0)
赋值 (歌词路径, 相加 (子文本替换 (取文件路径信息 (文件路径_, 5), 取文件路径信息 (文件路径_, 0), , , , 假), 取文件路径信息 (文件路径_, 1), “.lrc”))
赋值 (_歌词路径, 歌词路径)
置当前歌词_从文件 (_歌词路径)
返回 (真)
返回 (假)
 ' 本源码来自易语言资源网(www.5A5X.com)

.子程序 置当前歌词, 空白型, 公开, 
.参数 歌词_, 文本型, , 

.局部变量 歌词阵列, 文本型, , "0", 
.局部变量 本行数据, 文本型, , , 
.局部变量 本行歌词, 歌词, , , 
.局部变量 外循环次, 整数型, , , 
.局部变量 内循环次, 整数型, , , 
.局部变量 临时文本, 文本型, , , 
.局部变量 搜索结果, 未知类型0x20002, , , 
.局部变量 搜索结果结合, 未知类型0x20002, , "0", 

赋值 (_省CPU模式_上次位置, -1)
 ' 本源码来自易语言资源网(www.5A5X.com)
重定义数组 (_当前歌词, 假, 0)
赋值 (歌词阵列, 分割文本 (歌词_, #换行符, ))
赋值 (_歌词头部, “”)
.计次循环首 (取数组成员数 (歌词阵列), 外循环次)
    赋值 (本行数据, 删首尾空 (歌词阵列 [外循环次]))
    .如果真 (等于 (RegCheck (本行数据, “\[[0-9]+:[0-9]+\.[0-9]+\]”), 假))
        赋值 (_歌词头部, 相加 (_歌词头部, 本行数据, #换行符))
        到循环尾 ()
    .如果真结束
    赋值 (本行歌词.内容, 删首尾空 (RegReplace (本行数据, “\[[0-9]+:[0-9]+\.[0-9]+\]”, “”)))
    RegGet (本行数据, “\[([0-9]+:[0-9]+\.[0-9]+)\]”, 搜索结果结合)
    .计次循环首 (取数组成员数 (搜索结果结合), 内循环次)
        赋值 (临时文本, 搜索结果结合.未知支持库函数_12 ( [内循环次], 本行数据, 1, ))
        赋值 (搜索结果, RegGet (临时文本, “([0-9]+):([0-9]+)\.([0-9]+)”))
        赋值 (本行歌词.时间, 相乘 (到数值 (搜索结果.未知支持库函数_12 (临时文本, 1, )), 60))
        赋值 (本行歌词.时间, 相加 (本行歌词.时间, 到数值 (搜索结果.未知支持库函数_12 (临时文本, 2, ))))
        赋值 (本行歌词.时间, 相加 (本行歌词.时间, 到数值 (相加 (“0.”, 搜索结果.未知支持库函数_12 (临时文本, 2, )))))
        赋值 (本行歌词.时间, 相乘 (本行歌词.时间, 1000))
        加入成员 (_当前歌词, 本行歌词)
    .计次循环尾 ()
.计次循环尾 ()
.计次循环首 (取数组成员数 (_当前歌词), 外循环次)
    .变量循环首 (2, 取数组成员数 (_当前歌词), 1, 内循环次)
        .如果真 (大于 (_当前歌词 [相减 (内循环次, 1)].时间, _当前歌词 [内循环次], 时间))
            赋值 (本行歌词, _当前歌词 [相减 (内循环次, 1)])
            赋值 (_当前歌词 [相减 (内循环次, 1)], _当前歌词 [内循环次])
            赋值 (_当前歌词 [内循环次], 本行歌词)
        .如果真结束
         ' 本源码来自易语言资源网(www.5A5X.com)
    .变量循环尾 ()
.计次循环尾 ()


.子程序 置当前歌词_从文件, 空白型, 公开, 
.参数 文件路径_, 文本型, , 

赋值 (_歌词路径, 文件路径_)
置当前歌词 (到文本 (读入文件 (文件路径_)))


.子程序 取当前歌词路径, 文本型, 公开, 
返回 (_歌词路径)
 ' 本源码来自易语言资源网(www.5A5X.com)

.子程序 RegCheck, 逻辑型, 公开, 
.参数 Text_, 文本型, , 
.参数 RegText_, 文本型, , 

.局部变量 RegEx, 未知类型0x20001, 静态, , 
.局部变量 RegBack, 未知类型0x20002, 静态, , 

RegEx.未知支持库函数_3 (RegText_, 假)
赋值 (RegBack, RegEx.未知支持库函数_7 (Text_, 1, ))
返回 (等于 (RegBack.未知支持库函数_10 (), 假))


.子程序 RegReplace, 文本型, 公开, 
.参数 Text_, 文本型, , 
.参数 RegText_, 文本型, , 要替换的文本
.参数 SubRegText_, 文本型, , 被替换的文本或格式

.局部变量 RegEx, 未知类型0x20001, 静态, , 

.如果真 (等于 (RegCheck (Text_, RegText_), 假))
    返回 (Text_)
.如果真结束
RegEx.未知支持库函数_3 (RegText_, 假)
返回 (RegEx.未知支持库函数_15 (Text_, SubRegText_, 1, , 真, 真))
 ' 本源码来自易语言资源网(www.5A5X.com)

.子程序 RegGet, 未知类型0x20002, 公开, 取正则表达式结果
.参数 Text_, 文本型, , 
.参数 RegText_, 文本型, , 要替换的文本
.参数 结果集合_, 未知类型0x20002, 参考 可空 数组, 被替换的文本或格式

.局部变量 RegEx, 未知类型0x20001, 静态, , 

RegEx.未知支持库函数_3 (RegText_, 假)
赋值 (结果集合_, RegEx.未知支持库函数_16 (Text_))
返回 (RegEx.未知支持库函数_7 (Text_, 1, ))

.子程序 当前时间, 整数型, 公开, 
.参数 当前时间_, 整数型, 可空, 

.如果真 (等于 (是否为空 (当前时间_), 假))
    赋值 (_当前时间, 当前时间_)
.如果真结束
返回 (_当前时间)


.子程序 绘制方式, 整数型, 公开, 
.参数 绘制方式_, 整数型, 可空, [0]垂直  [1]水平

.如果真 (等于 (是否为空 (绘制方式_), 假))
    赋值 (_绘制方式, 绘制方式_)
.如果真结束
返回 (_绘制方式)
 ' 本源码来自易语言资源网(www.5A5X.com)

.子程序 刷新显示, 空白型, 公开, 
.局部变量 总共长度, 整数型, , , 
.局部变量 单行高度, 整数型, , , 
.局部变量 精确间距, 整数型, , , 
.局部变量 当前主行, 整数型, , , 
.局部变量 字幕顶端, 整数型, , , 
.局部变量 循环次数, 整数型, , , 
.局部变量 画板纵距, 整数型, , , 
.局部变量 画板横距, 整数型, , , 
.局部变量 匿名局部变量_1237, 空白型, , , 
.局部变量 外循环次, 整数型, , , 
.局部变量 内循环次, 整数型, , , 
.局部变量 匿名局部变量_1246, 空白型, , , 
.局部变量 左边位置, 整数型, , , 
.局部变量 顶边位置, 整数型, , , 
.局部变量 颜色分值, 整数型, , "3", 
.局部变量 背景分值, 整数型, , "3", 
.局部变量 匿名局部变量_1279, 空白型, , , 
.局部变量 纵行差距, 整数型, , , 
.局部变量 结束位置, 整数型, , , 

 ' 歌词播放的主要原理：
 ' #     1.获取所有歌词总高度
 ' #     2.获取单行的高度
 ' #     3.获取当前播放行跟下一行相对总歌词高度所在的位置（当前行获取方式通过时间来判断）
 ' #         [  当前行位置 / 歌词总高度 * 总时间 = 当前时间  ]
 ' #     4.绘制所有行，绘制的起始位置是画板正中央为原点

.如果真 (等于 (假, 是否已创建 (_备用画板)))
    返回 ()
.如果真结束

_备用画板.清除 ()
.如果真 (或者 (不等于 (_备用画板.宽度, _主画板.宽度), 不等于 (_备用画板.高度, _主画板.高度)))
    _备用画板.移动 (_主画板.宽度, _主画板.高度)
.如果真结束
.如果真 (小于 (取数组成员数 (_当前歌词), 1))
    _备用画板.复制 (_主画板, , , #拷贝)
    返回 ()
.如果真结束
 ' 本源码来自易语言资源网(www.5A5X.com)
赋值 (当前主行, 取当前主行 ())
.如果真 (_省CPU模式)
    .如果真 (等于 (_省CPU模式_上次位置, 当前主行))
        返回 ()
    .如果真结束
    赋值 (_省CPU模式_上次位置, 当前主行)
.如果真结束

赋值 (画板纵距, 相除 (_备用画板.高度, 2))
赋值 (画板横距, 相除 (_备用画板.宽度, 2))
赋值 (_备用画板.文本颜色, _前景色)
.判断开始 (等于 (_绘制方式, 0))
     ' 绘制拖动歌词中间横线的效果
    绘时间滚动轴 ()
    
     ' 获取所有歌词总高度跟单行的高度
    赋值 (单行高度, _备用画板.取高度 (_当前歌词 [1].内容))
    赋值 (总共长度, 相减 (相加 (相乘 (相减 (取数组成员数 (_当前歌词), 1), _纵向间距), 相乘 (取数组成员数 (_当前歌词), 单行高度)), 单行高度))
    赋值 (精确间距, 相加 (单行高度, _纵向间距)) ' 获取单行的精确高度(包含中间的空白间距)
    
     ' 获取结束位置
    赋值 (结束位置, 相加 (当前主行, 1))
    .判断开始 (大于或等于 (当前主行, 取数组成员数 (_当前歌词)))
        赋值 (字幕顶端, 相减 (画板纵距, 总共长度))
    .默认
        .如果真 (等于 (当前主行, -1))
            赋值 (当前主行, 取数组成员数 (_当前歌词))
            赋值 (结束位置, 当前主行)
        .如果真结束
        赋值 (字幕顶端, 相减 (画板纵距, 相加 (相乘 (相除 (总共长度, 取数组成员数 (_当前歌词)), 当前主行), 相乘 (相除 (相减 (_当前时间, _当前歌词 [当前主行], 时间), 相减 (_当前歌词 [结束位置], 时间, _当前歌词 [当前主行], 时间)), 精确间距))))
    .判断结束
    
    赋值 (_备用画板.文本颜色, _前景色)
    .计次循环首 (取数组成员数 (_当前歌词), 循环次数)
        赋值 (顶边位置, 相加 (字幕顶端, 相乘 (相除 (总共长度, 取数组成员数 (_当前歌词)), 循环次数)))
        .如果真 (或者 (小于 (相加 (顶边位置, _备用画板.取高度 (_当前歌词 [循环次数], 内容)), 0), 大于 (顶边位置, _备用画板.高度)))
            到循环尾 ()
        .如果真结束
        赋值 (左边位置, 相减 (画板横距, 相除 (_备用画板.取宽度 (_当前歌词 [循环次数], 内容), 2)))
        _备用画板.定位写出 (左边位置, 顶边位置, _当前歌词 [循环次数], 内容)
        赋值 (纵行差距, 相减 (_备用画板.高度, 相加 (字幕顶端, 相乘 (相除 (总共长度, 取数组成员数 (_当前歌词)), 循环次数))))
    .计次循环尾 ()
     ' 本源码来自易语言资源网(www.5A5X.com)
    赋值 (左边位置, 相减 (画板横距, 相除 (_备用画板.取宽度 (_当前歌词 [当前主行], 内容), 2)))
    赋值 (顶边位置, 相加 (字幕顶端, 相乘 (相除 (总共长度, 取数组成员数 (_当前歌词)), 当前主行)))
    
     ' 绘制当前歌词行的边框
    赋值 (_备用画板.文本颜色, _边框色)
    _备用画板.定位写出 (左边位置, 相减 (顶边位置, 1), _当前歌词 [当前主行], 内容)
    _备用画板.定位写出 (左边位置, 相加 (顶边位置, 1), _当前歌词 [当前主行], 内容)
    _备用画板.定位写出 (相减 (左边位置, 1), 顶边位置, _当前歌词 [当前主行], 内容)
    _备用画板.定位写出 (相加 (左边位置, 1), 顶边位置, _当前歌词 [当前主行], 内容)
    
    _备用画板.定位写出 (相减 (左边位置, 1), 相减 (顶边位置, 1), _当前歌词 [当前主行], 内容)
    _备用画板.定位写出 (相加 (左边位置, 1), 相减 (顶边位置, 1), _当前歌词 [当前主行], 内容)
    _备用画板.定位写出 (相加 (左边位置, 1), 相加 (顶边位置, 1), _当前歌词 [当前主行], 内容)
    _备用画板.定位写出 (相减 (左边位置, 1), 相加 (顶边位置, 1), _当前歌词 [当前主行], 内容)
    
    .如果 (_卡拉OK效果)
         ' 卡拉OK效果
         ' 实现逐字跟随时间顺序的高亮显示
        .如果 (或者 (等于 (当前主行, 取数组成员数 (_当前歌词)), _省CPU模式))
            赋值 (_备用画板.文本颜色, _高亮色)
            _备用画板.定位写出 (左边位置, 顶边位置, _当前歌词 [当前主行], 内容)
        .否则
            赋值 (_备用画板.文本颜色, _背景色)
            _备用画板.定位写出 (左边位置, 顶边位置, _当前歌词 [当前主行], 内容)
            _效果画板A.移动 (相加 (_效果画板A.取宽度 (_当前歌词 [当前主行], 内容), 1), 相加 (_效果画板A.取高度 (_当前歌词 [当前主行], 内容), 1))
            _备用画板.复制 (左边位置, 顶边位置, _效果画板A.取宽度 (_当前歌词 [当前主行], 内容), _效果画板A.取高度 (_当前歌词 [当前主行], 内容), _效果画板A, , , #拷贝)
            赋值 (_效果画板A.文本颜色, _高亮色)
            赋值 (_效果画板A.文本背景颜色, #透明)
            _效果画板A.定位写出 (0, 0, _当前歌词 [当前主行], 内容)
            .如果 (等于 (当前主行, 取数组成员数 (_当前歌词)))
                赋值 (结束位置, 当前主行)
            .否则
                赋值 (结束位置, 相加 (当前主行, 1))
            .如果结束
            _效果画板A.复制 (相乘 (相除 (相减 (当前时间 (), _当前歌词 [当前主行], 时间), 相减 (_当前歌词 [结束位置], 时间, _当前歌词 [当前主行], 时间)), _效果画板A.取宽度 (_当前歌词 [当前主行], 内容)), , _备用画板, 左边位置, 顶边位置, #拷贝)
        .如果结束
        
    .否则
         ' 常规类型高亮显示
        赋值 (_备用画板.文本颜色, _高亮色)
        _备用画板.定位写出 (左边位置, 顶边位置, _当前歌词 [当前主行], 内容)
    .如果结束
    
     ' 当前热点行边框效果
    .如果真 (不等于 (_热点类型, 0))
        赋值 (_备用画板.画笔颜色, _边框色)
        赋值 (_备用画板.画笔类型, _热点类型)
        赋值 (_备用画板.刷子类型, 0)
        .如果真 (等于 (_热点类型, 7))
            .如果真 (大于或等于 (相减 (取启动时间 (), _热点动画_上次时间), 300))
                赋值 (_热点动画_上次时间, 取启动时间 ())
                赋值 (_热点动画_上次类型, 选择 (不等于 (_热点动画_上次类型, 3), 3, 4))
            .如果真结束
            赋值 (_备用画板.画笔类型, _热点动画_上次类型)
        .如果真结束
        _备用画板.画矩形 (相减 (左边位置, 3), 相减 (顶边位置, 3), 相加 (相减 (画板横距, 相除 (_备用画板.取宽度 (_当前歌词 [当前主行], 内容), 2)), _备用画板.取宽度 (_当前歌词 [当前主行], 内容), 3), 相加 (相减 (相加 (字幕顶端, 相乘 (相除 (总共长度, 取数组成员数 (_当前歌词)), 当前主行)), 2), _备用画板.取高度 (_当前歌词 [当前主行], 内容), 4))
        赋值 (_备用画板.画笔类型, 1)
    .如果真结束
    
    
    绘制渐变边界 ()
.默认
    
.判断结束

赋值 (歌词窗口..正常图片, _备用画板.取图片 (_主画板.宽度, _主画板.高度))

.子程序 重置顶端, 空白型, 公开, 
.参数 顶端位置_, 整数型, , 

.局部变量 画板纵距, 整数型, , , 
.局部变量 临时数值, 双精度小数型, , , 
.局部变量 描定时间, 整数型, , , 
.局部变量 匿名局部变量_1078, 空白型, , , 
.局部变量 起始位置, 整数型, , , 
.局部变量 结束位置, 整数型, , , 

.如果真 (小于 (取数组成员数 (_当前歌词), 2))
    返回 ()
.如果真结束
.判断开始 (等于 (_绘制方式, 0))
    赋值 (画板纵距, 相除 (_备用画板.高度, 2))
    赋值 (临时数值, 相乘 (相除 (相减 (画板纵距, 顶端位置_), 取字幕位置信息 (0)), 取数组成员数 (_当前歌词)))
    赋值 (起始位置, 取整 (临时数值))
    .判断开始 (大于或等于 (起始位置, 取数组成员数 (_当前歌词)))
        连续赋值 (取数组成员数 (_当前歌词), 起始位置, 结束位置)
    .默认
        赋值 (结束位置, 相加 (起始位置, 1))
    .判断结束
     ' 本源码来自易语言资源网(www.5A5X.com)
    .判断开始 (大于或等于 (临时数值, 取数组成员数 (_当前歌词)))
        当前时间 (_当前歌词 [取数组成员数 (_当前歌词)].时间)
        返回 ()
    .判断 (小于或等于 (临时数值, 1))
        当前时间 (_当前歌词 [1].时间)
        返回 ()
    .默认
        当前时间 (相加 (_当前歌词 [起始位置], 时间, 相除 (相乘 (相减 (_当前歌词 [结束位置], 时间, _当前歌词 [起始位置], 时间), 求余数 (相乘 (临时数值, 100), 100)), 100)))
    .判断结束
    
.默认
    
.判断结束


.子程序 取字幕位置信息, 整数型, 公开, 
.参数 获取类型_, 整数型, , [0]总行高度  [1]单行高度  [2]精确间距  [3]字母顶端

.局部变量 当前主行, 整数型, , , 
.局部变量 画板纵距, 整数型, , , 
.局部变量 画板横距, 整数型, , , 
.局部变量 单行高度, 整数型, , , 
.局部变量 总共长度, 整数型, , , 
.局部变量 精确间距, 整数型, , , 
.局部变量 字幕顶端, 整数型, , , 
.局部变量 当前位置, 整数型, , , 

.如果真 (小于 (取数组成员数 (_当前歌词), 1))
    返回 (0)
.如果真结束
赋值 (当前主行, 取当前主行 ())
赋值 (画板纵距, 相除 (_备用画板.高度, 2))
赋值 (画板横距, 相除 (_备用画板.宽度, 2))
.判断开始 (等于 (_绘制方式, 0))
    赋值 (单行高度, _备用画板.取高度 (_当前歌词 [1].内容))
    赋值 (总共长度, 相减 (相加 (相乘 (相减 (取数组成员数 (_当前歌词), 1), _纵向间距), 相乘 (取数组成员数 (_当前歌词), 单行高度)), 单行高度))
    赋值 (精确间距, 相加 (单行高度, _纵向间距))
    赋值 (当前位置, 相加 (当前主行, 1))
    .判断开始 (等于 (当前主行, 取数组成员数 (_当前歌词)))
        赋值 (字幕顶端, 相减 (画板纵距, 总共长度))
        赋值 (当前位置, 当前主行)
    .默认
        .如果真 (等于 (当前主行, -1))
            赋值 (当前主行, 取数组成员数 (_当前歌词))
            赋值 (当前位置, 当前主行)
        .如果真结束
        赋值 (字幕顶端, 相减 (画板纵距, 相加 (相乘 (相除 (总共长度, 取数组成员数 (_当前歌词)), 当前主行), 相乘 (相除 (相减 (_当前时间, _当前歌词 [当前主行], 时间), 相减 (_当前歌词 [当前位置], 时间, _当前歌词 [当前主行], 时间)), 精确间距))))
    .判断结束
    .判断开始 (等于 (获取类型_, 0))
        返回 (总共长度)
    .判断 (等于 (获取类型_, 1))
        返回 (单行高度)
    .判断 (等于 (获取类型_, 2))
        返回 (精确间距)
    .判断 (等于 (获取类型_, 3))
        返回 (字幕顶端)
    .默认
        
    .判断结束
    
.默认
    
.判断结束
返回 (0)


.子程序 时间滚动轴, 逻辑型, 公开, 
.参数 时间滚动轴_, 逻辑型, 可空, 

.如果真 (等于 (是否为空 (时间滚动轴_), 假))
    赋值 (_时间滚动轴, 时间滚动轴_)
.如果真结束
返回 (_时间滚动轴)


.子程序 绘制渐变边界, 空白型, , 
.局部变量 渐变高度, 整数型, , , 
.局部变量 渐变宽度, 整数型, , , 
.局部变量 匿名局部变量_727, 空白型, , , 
.局部变量 横向位置, 整数型, , , 
.局部变量 纵向位置, 整数型, , , 
.局部变量 匿名局部变量_1685, 空白型, , , 
.局部变量 歌词宽度, 整数型, , , 
.局部变量 颜色分值, 整数型, , "3", 
.局部变量 当前颜色, 整数型, , , 
.局部变量 背景分值, 整数型, , "3", 
.局部变量 颜色差量, 小数型, , , 百分比
.局部变量 左边位置, 整数型, , , 
.局部变量 匿名局部变量_1701, 空白型, , , 
.局部变量 设备句柄, 整数型, , , 
.局部变量 临时位图A, 位图, 静态, , 
.局部变量 临时位图B, 位图, 静态, , 
.局部变量 图片句柄, 整数型, , , 

.如果真 (等于 (假, _渐变边界))
    返回 ()
.如果真结束

赋值 (渐变高度, 相除 (相乘 (_备用画板.高度, _渐变范围), 100))
赋值 (渐变宽度, 相除 (相乘 (_备用画板.宽度, _渐变范围), 100))

 ' .判断开始 (等于 (_绘制方式, 0))
     ' _备用画板.画渐变矩形 (0, 0, _备用画板.宽度, 渐变高度, #从上到下, _前景色, _背景色)
     ' _备用画板.画渐变矩形 (0, _备用画板.高度 － 渐变高度, _备用画板.宽度, 渐变高度, #从下到上, _前景色, _背景色)
.默认
    
.判断结束

赋值 (背景分值 [1], 相除 (_背景色, 65536))
赋值 (背景分值 [3], 求余数 (_背景色, 256))
赋值 (背景分值 [2], 相除 (相减 (_背景色, 背景分值 [3], 相乘 (背景分值 [1], 65536)), 256))

赋值 (颜色分值 [1], 相除 (_前景色, 65536))
赋值 (颜色分值 [3], 求余数 (_前景色, 256))
赋值 (颜色分值 [2], 相除 (相减 (_前景色, 颜色分值 [3], 相乘 (颜色分值 [1], 65536)), 256))
 ' 本源码来自易语言资源网(www.5A5X.com)
赋值 (颜色分值 [1], 颜色分值 [1])
赋值 (颜色分值 [2], 颜色分值 [2])
赋值 (颜色分值 [3], 颜色分值 [3])

 ' _备用画板.画笔粗细 ＝ 4
 ' _备用画板.画出方式 ＝ _启动窗口.组合框1.现行选中项
 ' _备用画板.画出方式 ＝ 8
 ' _备用画板.画直线 (0, 0, _备用画板.宽度, _备用画板.高度)

 ' _效果画板A.移动 (, , _备用画板.宽度, 渐变高度)
 ' _效果画板B.移动 (, , _备用画板.宽度, 渐变高度)

 ' _效果画板A.画渐变矩形 (0, 0, _效果画板A.宽度, _效果画板B.高度, #从上到下, _背景色, _前景色)
 ' _效果画板A.复制 (, , , , _效果画板B, , , _启动窗口.组合框1.现行选中项 ＋ 1)
 ' ' _效果画板B.翻转矩形区 (0, 0, _效果画板B.宽度, _效果画板B.高度)
 ' _备用画板.复制 (0, _备用画板.高度 － _效果画板A.高度, _备用画板.宽度, _效果画板A.高度, _效果画板A, 0, 0, _启动窗口.组合框1.现行选中项)
 ' _效果画板A.复制 (, , , , _效果画板B, , , _启动窗口.组合框2.现行选中项 ＋ 1)
 ' _效果画板B.复制 (, , , , _备用画板, 0, _备用画板.高度 － _效果画板A.高度, _启动窗口.组合框3.现行选中项 ＋ 1)

 ' .计次循环首 (相除 (渐变高度, 4), 纵向位置)
    
     ' 颜色差量 ＝ 纵向位置 × 4 ÷ 渐变高度
    
     ' _备用画板.画笔颜色 ＝ 取颜色值 (背景分值 [3] ＋ (背景分值 [3] － 颜色分值 [3]) × 颜色差量, 背景分值 [2] ＋ (背景分值 [2] － 颜色分值 [2]) × 颜色差量, 背景分值 [1] ＋ (背景分值 [1] － 颜色分值 [1]) × 颜色差量)
     ' _备用画板.画直线 (0, _备用画板.高度 － 渐变高度 ＋ 纵向位置 × 4, _备用画板.宽度, _备用画板.高度 － 渐变高度 ＋ 纵向位置 × 4)
     ' _备用画板.画直线 (0, 渐变高度 － 纵向位置 × 4 － 1, _备用画板.宽度, 渐变高度 － 纵向位置 × 4 － 1)
    
 ' .计次循环尾 ()

赋值 (歌词宽度, 取歌词宽度 ())
赋值 (左边位置, 相除 (相减 (_备用画板.宽度, 歌词宽度), 2))
_效果画板A.移动 (歌词宽度, 渐变高度)
_效果画板B.移动 (歌词宽度, 渐变高度)
_备用画板.复制 (左边位置, 0, 歌词宽度, 渐变高度, _效果画板A, , , #拷贝)
_备用画板.复制 (左边位置, 相减 (_备用画板.高度, 渐变高度), 歌词宽度, 渐变高度, _效果画板B, , , #拷贝)
临时位图A.载入数据 (_效果画板A.取图片 ())
临时位图B.载入数据 (_效果画板B.取图片 ())
 ' 设备句柄 ＝ _备用画板.取设备句柄 ()
 ' 临时位图A.载入数据 (_备用画板.取图片 (, ))
.计次循环首 (渐变高度, 纵向位置)
    .计次循环首 (歌词宽度, 横向位置)
         ' 输出调试文本 (GetPixel (设备句柄, 左边位置 ＋ 横向位置, 纵向位置))
         ' .如果真 (不等于 (临时位图A.取某点颜色 (相减 (相加 (左边位置, 横向位置), 1), 相减 (纵向位置, 1)), _背景色))
             ' 颜色差量 ＝ 纵向位置 ÷ 渐变高度
             ' 临时位图A.置某点颜色 (左边位置 ＋ 横向位置 － 1, 纵向位置 － 1, 取颜色值 (背景分值 [3] ＋ (颜色分值 [3] － 背景分值 [3]) × 颜色差量, 背景分值 [2] ＋ (颜色分值 [2] － 背景分值 [2]) × 颜色差量, 背景分值 [1] ＋ (颜色分值 [1] － 背景分值 [1]) × 颜色差量))
        .如果真结束
         ' .如果真 (不等于 (相减 (相加 (左边位置, 横向位置), 1).取某点颜色 (相减 (_备用画板.高度, 纵向位置)), _背景色))
             ' 颜色差量 ＝ 纵向位置 ÷ 渐变高度
             ' 临时位图A.置某点颜色 (左边位置 ＋ 横向位置 － 1, _备用画板.高度 － 纵向位置, 取颜色值 (背景分值 [3] ＋ (颜色分值 [3] － 背景分值 [3]) × 颜色差量, 背景分值 [2] ＋ (颜色分值 [2] － 背景分值 [2]) × 颜色差量, 背景分值 [1] ＋ (颜色分值 [1] － 背景分值 [1]) × 颜色差量))
        .如果真结束
        .如果真 (不等于 (临时位图A.取某点颜色 (相减 (横向位置, 1), 相减 (纵向位置, 1)), _背景色))
            赋值 (颜色差量, 相除 (纵向位置, 渐变高度))
            临时位图A.置某点颜色 (相减 (横向位置, 1), 相减 (纵向位置, 1), 取颜色值 (相加 (背景分值 [3], 相乘 (相减 (颜色分值 [3], 背景分值 [3]), 颜色差量)), 相加 (背景分值 [2], 相乘 (相减 (颜色分值 [2], 背景分值 [2]), 颜色差量)), 相加 (背景分值 [1], 相乘 (相减 (颜色分值 [1], 背景分值 [1]), 颜色差量))))
        .如果真结束
        .如果真 (不等于 (临时位图B.取某点颜色 (相减 (横向位置, 1), 相减 (纵向位置, 1)), _背景色))
            赋值 (颜色差量, 相减 (1, 相除 (纵向位置, 渐变高度)))
            临时位图B.置某点颜色 (相减 (横向位置, 1), 相减 (纵向位置, 1), 取颜色值 (相加 (背景分值 [3], 相乘 (相减 (颜色分值 [3], 背景分值 [3]), 颜色差量)), 相加 (背景分值 [2], 相乘 (相减 (颜色分值 [2], 背景分值 [2]), 颜色差量)), 相加 (背景分值 [1], 相乘 (相减 (颜色分值 [1], 背景分值 [1]), 颜色差量))))
        .如果真结束
        
    .计次循环尾 ()
.计次循环尾 ()
赋值 (图片句柄, 载入图片 (临时位图A.取位图数据 ()))
_备用画板.画图片 (图片句柄, 左边位置, 0, , , )
卸载图片 (图片句柄)
赋值 (图片句柄, 载入图片 (临时位图B.取位图数据 ()))
_备用画板.画图片 (图片句柄, 左边位置, 相减 (_备用画板.高度, 渐变高度), , , )
卸载图片 (图片句柄)
 ' .计次循环首 (_备用画板.高度, 纵向位置)
     ' .计次循环首 (_备用画板.宽度, 横向位置)
         ' .判断开始 (小于或等于 (横向位置, 渐变宽度))
             ' 当前颜色 ＝ _备用画板.取点 (横向位置, 纵向位置)
             ' .如果真 (不等于 (当前颜色, _背景色))
                 ' 颜色分值 [1] ＝ 当前颜色 ÷ 65536
                 ' 颜色分值 [3] ＝ 当前颜色 ％ 256
                 ' 颜色分值 [2] ＝ (当前颜色 － 颜色分值 [3] － 颜色分值 [1] × 65536) ÷ 256
                 ' 到循环尾 ()
            .如果真结束
            
         ' .判断 (小于或等于 (相减 (_备用画板.宽度, 横向位置), 渐变宽度))
             ' 当前颜色 ＝ _备用画板.取点 (横向位置, 纵向位置)
             ' .如果真 (不等于 (当前颜色, _背景色))
                 ' 颜色分值 [1] ＝ 当前颜色 ÷ 65536
                 ' 颜色分值 [3] ＝ 当前颜色 ％ 256
                 ' 颜色分值 [2] ＝ (当前颜色 － 颜色分值 [3] － 颜色分值 [1] × 65536) ÷ 256
                 ' 到循环尾 ()
            .如果真结束
            
         ' .判断 (小于或等于 (纵向位置, 渐变高度))
             ' 当前颜色 ＝ _备用画板.取点 (横向位置, 纵向位置)
             ' .如果真 (不等于 (当前颜色, _背景色))
                 ' 颜色分值 [1] ＝ 当前颜色 ÷ 65536
                 ' 颜色分值 [3] ＝ 当前颜色 ％ 256
                 ' 颜色分值 [2] ＝ (当前颜色 － 颜色分值 [3] － 颜色分值 [1] × 65536) ÷ 256
                 ' 到循环尾 ()
            .如果真结束
            
         ' .判断 (小于或等于 (相减 (_备用画板.高度, 纵向位置), 渐变高度))
             ' 当前颜色 ＝ _备用画板.取点 (横向位置, 纵向位置)
             ' .如果真 (不等于 (当前颜色, _背景色))
                 ' 颜色差量 ＝ (_备用画板.高度 － 纵向位置) ÷ 渐变高度
                
                 ' 颜色分值 [1] ＝ 当前颜色 ÷ 65536
                 ' 颜色分值 [3] ＝ 当前颜色 ％ 256
                 ' 颜色分值 [2] ＝ (当前颜色 － 颜色分值 [3] － 颜色分值 [1] × 65536) ÷ 256
                
                 ' _备用画板.画点 (横向位置, 纵向位置, 取颜色值 (背景分值 [1] ＋ (背景分值 [1] － 颜色分值 [1]) × 颜色差量, 背景分值 [2] ＋ (背景分值 [2] － 颜色分值 [2]) × 颜色差量, 背景分值 [3] ＋ (背景分值 [3] － 颜色分值 [3]) × 颜色差量))
                
                 ' 到循环尾 ()
            .如果真结束
            
        .默认
            
        .判断结束
        
     ' .计次循环尾 ()
 ' .计次循环尾 ()


.子程序 绘时间滚动轴, 空白型, , 
.参数 绘制类型_, 整数型, 可空, [0]全部  [1]前景  [2]背景

.局部变量 画板纵距, 整数型, , , 

.如果真 (_时间滚动轴)
    赋值 (画板纵距, 相除 (_备用画板.高度, 2))
    
    .如果真 (或者 (等于 (绘制类型_, 2), 等于 (绘制类型_, 0)))
        .如果真 (大于 (取数组成员数 (_当前歌词), 0))
            赋值 (_备用画板.刷子颜色, _边框色)
            赋值 (_备用画板.刷子类型, 1)
            _备用画板.填充矩形 (3, 相减 (画板纵距, 4), 相加 (3, 相乘 (相除 (当前时间 (), _当前歌词 [取数组成员数 (_当前歌词)].时间), 相减 (_备用画板.宽度, 9))), 相减 (画板纵距, 2))
        .如果真结束
        _备用画板.画渐变矩形 (0, 画板纵距, _备用画板.宽度, 16, #从下到上, _背景色, _边框色)
    .如果真结束
    ' 本源码来自易语言资源网(www.5A5X.com)
    .如果真 (或者 (等于 (绘制类型_, 1), 等于 (绘制类型_, 0)))
        赋值 (_备用画板.画笔粗细, 1)
        赋值 (_备用画板.画出方式, 12)
        赋值 (_备用画板.画笔颜色, _高亮色)
        _备用画板.画直线 (0, 画板纵距, _备用画板.宽度, 画板纵距)
        _备用画板.画直线 (1, 相减 (画板纵距, 4), 1, 相加 (画板纵距, 4))
        _备用画板.画直线 (相减 (_备用画板.宽度, 5), 相减 (画板纵距, 4), 相减 (_备用画板.宽度, 5), 相加 (画板纵距, 4))
        赋值 (_备用画板.文本颜色, _高亮色)
        _备用画板.定位写出 (相加 (0, 3), 相加 (画板纵距, 1), 取标准格式时间 (_当前时间, “mm:ss”))
    .如果真结束
    
.如果真结束


.子程序 取标准格式时间, 文本型, 公开, 
.参数 时间值_, 整数型, , 需要精确到毫秒
.参数 时间格式_, 文本型, 可空, "M"分钟  "S"秒钟   "mm" 分钟   "ss" 秒钟   "ms"毫秒

.局部变量 毫秒, 整数型, , , 
.局部变量 秒钟, 整数型, , , 
.局部变量 分钟, 整数型, , , 
.局部变量 返回数据, 文本型, , , 

.如果真 (是否为空 (时间格式_))
    赋值 (时间格式_, “mm:ss”)
.如果真结束
赋值 (返回数据, 时间格式_)

赋值 (毫秒, 取整 (求余数 (时间值_, 1000)))
赋值 (秒钟, 求余数 (取整 (相除 (时间值_, 1000)), 60))
赋值 (分钟, 相除 (相减 (取整 (相除 (时间值_, 1000)), 秒钟), 60))

赋值 (返回数据, 子文本替换 (返回数据, “ms”, 到文本 (毫秒), , , 真))
赋值 (返回数据, 子文本替换 (返回数据, “S”, 到文本 (秒钟), , , 真))
赋值 (返回数据, 子文本替换 (返回数据, “M”, 到文本 (分钟), , , 真))

赋值 (返回数据, 子文本替换 (返回数据, “ss”, 取文本右边 (相加 (“00”, 到文本 (秒钟)), 2), , , 真))
赋值 (返回数据, 子文本替换 (返回数据, “mm”, 取文本右边 (相加 (“00”, 到文本 (分钟)), 2), , , 真))

返回 (返回数据)


.子程序 取当前主行, 整数型, 公开, 
.局部变量 循环次数, 整数型, , , 
.局部变量 返回数据, 整数型, , , 

.变量循环首 (取数组成员数 (_当前歌词), 1, -1, 循环次数)
    .如果真 (大于或等于 (_当前歌词 [循环次数], 时间, _当前时间))
        赋值 (返回数据, 相减 (循环次数, 1))
    .如果真结束
    ' 本源码来自易语言资源网(www.5A5X.com)
.变量循环尾 ()
.如果真 (小于或等于 (_当前歌词 [取数组成员数 (_当前歌词)].时间, _当前时间))
    赋值 (返回数据, 取数组成员数 (_当前歌词))
.如果真结束
.如果真 (等于 (返回数据, 0))
    赋值 (返回数据, 1)
.如果真结束
返回 (返回数据)


.子程序 取当前歌词行数, 整数型, 公开, 
返回 (取数组成员数 (_当前歌词))


.子程序 取当前歌词, 文本型, 公开, 
.参数 获取歌词类型_, 整数型, 可空, [0]标准LRC歌词  [1]顺序歌词文本  默认0

.局部变量 返回数据, 文本型, , , 
.局部变量 外循环次, 整数型, , , 
.局部变量 内循环次, 整数型, , , 
.局部变量 输出歌词, 歌词, , "0", 
.局部变量 位置索引, 整数型, , , 
.局部变量 临时歌词, 歌词, , , 

赋值 (返回数据, _歌词头部)
.计次循环首 (取数组成员数 (_当前歌词), 外循环次)
    .如果 (等于 (获取歌词类型_, 1))
        赋值 (返回数据, 相加 (返回数据, _当前歌词 [外循环次], 内容, #换行符))
    .否则
        赋值 (位置索引, 0)
        .计次循环首 (取数组成员数 (输出歌词), 内循环次)
            .如果真 (等于 (输出歌词 [内循环次], 内容, _当前歌词 [外循环次], 内容))
                赋值 (位置索引, 内循环次)
                跳出循环 ()
            .如果真结束
            ' 本源码来自易语言资源网(www.5A5X.com)
        .计次循环尾 ()
        .如果真 (等于 (位置索引, 0))
            赋值 (临时歌词.内容, _当前歌词 [外循环次], 内容)
            赋值 (临时歌词.时间标签, “”)
            加入成员 (输出歌词, 临时歌词)
            赋值 (位置索引, 取数组成员数 (输出歌词))
        .如果真结束
        赋值 (输出歌词 [位置索引], 时间标签, 相加 (输出歌词 [位置索引], 时间标签, 转换时间为歌词时间标签 (_当前歌词 [外循环次], 时间)))
    .如果结束
    
.计次循环尾 ()
.如果真 (等于 (获取歌词类型_, 1))
    返回 (返回数据)
.如果真结束
.计次循环首 (取数组成员数 (输出歌词), 内循环次)
    赋值 (返回数据, 相加 (返回数据, 输出歌词 [内循环次], 时间标签, 输出歌词 [内循环次], 内容, #换行符))
.计次循环尾 ()
返回 (返回数据)


.子程序 取歌词宽度, 整数型, 公开, 
.局部变量 外循环次, 整数型, , , 
.局部变量 本行宽度, 整数型, , , 
.局部变量 返回数据, 整数型, , , 

赋值 (返回数据, 0)
.计次循环首 (取数组成员数 (_当前歌词), 外循环次)
    赋值 (本行宽度, _备用画板.取宽度 (_当前歌词 [外循环次], 内容))
    .如果真 (大于 (本行宽度, 返回数据))
        赋值 (返回数据, 本行宽度)
    .如果真结束
    
.计次循环尾 ()
返回 (相加 (返回数据, 2))


.子程序 转换时间为歌词时间标签, 文本型, 公开, 
.参数 时间_, 整数型, , 

.局部变量 时间_分, 整数型, , , 
.局部变量 时间_秒, 整数型, , , 
.局部变量 时间_毫秒, 整数型, , , 

赋值 (时间_毫秒, 求余数 (时间_, 1000))
赋值 (时间_秒, 求余数 (相除 (相减 (时间_, 时间_毫秒), 1000), 60))
赋值 (时间_分, 相除 (相减 (时间_, 时间_毫秒, 相乘 (时间_秒, 1000)), 1000, 60))
返回 (取文本 (“[%s:%s.%s]”, 取文本右边 (相加 (“00”, 到文本 (时间_分)), 2), 取文本右边 (相加 (“00”, 到文本 (时间_秒)), 2), 取文本右边 (相加 (“00”, 到文本 (时间_毫秒)), 2)))
' 本源码来自易语言资源网(www.5A5X.com)

.子程序 取系统配置, 歌词管理配置, 公开, 
.局部变量 临时歌词管理配置内容, 歌词管理配置, , , 

赋值 (临时歌词管理配置内容._前景色, _前景色)
赋值 (临时歌词管理配置内容._背景色, _背景色)
赋值 (临时歌词管理配置内容._高亮色, _高亮色)
赋值 (临时歌词管理配置内容._边框色, _边框色)
赋值 (临时歌词管理配置内容._横向间距, _横向间距)
赋值 (临时歌词管理配置内容._纵向间距, _纵向间距)
赋值 (临时歌词管理配置内容._歌词头部, _歌词头部)
赋值 (临时歌词管理配置内容._当前时间, _当前时间)
赋值 (临时歌词管理配置内容._绘制方式, _绘制方式)
赋值 (临时歌词管理配置内容._渐变范围, _渐变范围)
赋值 (临时歌词管理配置内容._热点类型, _热点类型)
赋值 (临时歌词管理配置内容._渐变边界, _渐变边界)
赋值 (临时歌词管理配置内容._省CPU模式, _省CPU模式)
赋值 (临时歌词管理配置内容._时间滚动轴, _时间滚动轴)
赋值 (临时歌词管理配置内容._卡拉OK效果, _卡拉OK效果)
赋值 (临时歌词管理配置内容._热点动画_上次时间, _热点动画_上次时间)
赋值 (临时歌词管理配置内容._热点动画_上次类型, _热点动画_上次类型)
赋值 (临时歌词管理配置内容._省CPU模式_上次位置, _省CPU模式_上次位置)
返回 (临时歌词管理配置内容)


.子程序 刷新字体, 空白型, 公开, 
.如果真 (是否已创建 (_备用画板))
    赋值 (_备用画板.字体, _主画板.字体)
    赋值 (_效果画板A.字体, _主画板.字体)
    赋值 (_效果画板B.字体, _主画板.字体)
.如果真结束


.窗口程序集 窗口程序集1, , , 

.程序集变量 匿名程序集变量_998, 空白型, , , 
.子程序 开始播放, 空白型, , 
赋值 (.内容, “”)
歌词操作.置当前歌词 (“”)
歌词操作.载入歌词 (.内容)
赋值 (.内容, 歌词操作.取当前歌词 ())
未知支持库函数_68 ()
未知支持库函数_57 ()
.未知支持库函数_56 (.内容)
-1.未知支持库函数_66 ()
 ' --========  易语言资源网  (www.5A5X.com)  ======--
 ' 努力创建完善、持续更新的易语言学习例程源码资源站
 ' --================   www.5A5X.com  ===========--
 ' --==================   易语言资源网注意事项  ================--
 ' * 易语言资源网为易语言官方站、易语言官方论坛提供辅助资源站；
 ' 本易语言资源网( www.5A5X.com)所有软件和资料均为软件作者提
 ' 供和网友推荐发布而来，其版权归该软件和程序源码的合法拥有者所
 ' 有，本站易语言资源网整理收集仅供易语言用户学习和易语言技术研
 ' 究探讨使用，不得用于任何商业用途。如果由于以上原因造成的版权
 ' 纠纷本站概不负责！
 ' * 本站资源未经许可，任何网站不得非法盗链及抄袭本站资源；如引用
 ' 页面，请注明来自易语言资源网，谢谢合作！
 ' --=====================   www.5A5X.com  ================--


.子程序 __启动窗口_创建完毕, 空白型, , 
载入 (歌词窗口, _启动窗口, 假)
' 本源码来自易语言资源网(www.5A5X.com)

.子程序 __启动窗口_将被销毁, 空白型, , 
结束 ()


.子程序 打开歌曲, 空白型, 公开, 
.如果真 (打开 ())
    赋值 (.内容, .文件名)
    开始播放 ()
.如果真结束
 ' 本源码来自易语言资源网(www.5A5X.com)

.子程序 _按钮3_被单击, 空白型, , 
.如果真 (打开 ())
    赋值 (.内容, 到文本 (读入文件 (.文件名)))
    歌词操作.置当前歌词_从文件 (.文件名)
.如果真结束
 ' 本源码来自易语言资源网(www.5A5X.com)

.窗口程序集 窗口程序集2, , , 

.程序集变量 _位置偏移, 整数型, , "2", 
.程序集变量 匿名程序集变量_1151, 空白型, , , 
.程序集变量 _拖放操作_顶端位置, 整数型, , , 
.程序集变量 _拖放操作_操作时间, 整数型, , , 
.程序集变量 _拖放操作_起始横坐标, 整数型, , , 
.程序集变量 _拖放操作_起始纵坐标, 整数型, , , 
.程序集变量 _拖放操作_起始字幕顶边, 整数型, , , 
.子程序 _时钟1_周期事件, 空白型, , 
 ' --========  易语言资源网  (www.5A5X.com)  ======--
 ' 努力创建完善、持续更新的易语言学习例程源码资源站
 ' --================   www.5A5X.com  ===========--
 ' --==================   易语言资源网注意事项  ================--
 ' * 易语言资源网为易语言官方站、易语言官方论坛提供辅助资源站；
 ' 本易语言资源网( www.5A5X.com)所有软件和资料均为软件作者提
 ' 供和网友推荐发布而来，其版权归该软件和程序源码的合法拥有者所
 ' 有，本站易语言资源网整理收集仅供易语言用户学习和易语言技术研
 ' 究探讨使用，不得用于任何商业用途。如果由于以上原因造成的版权
 ' 纠纷本站概不负责！
 ' * 本站资源未经许可，任何网站不得非法盗链及抄袭本站资源；如引用
 ' 页面，请注明来自易语言资源网，谢谢合作！
 ' --=====================   www.5A5X.com  ================--

歌词操作.当前时间 (相乘 (相除 (相乘 (_启动窗口.未知支持库函数_64 (.), _启动窗口.未知支持库函数_63 (.)), _启动窗口.未知支持库函数_62 (.)), 1000))
歌词操作.刷新显示 ()

.子程序 _歌词窗口_创建完毕, 空白型, ,  
歌词操作._类初始化 (到数值 (.内容), , .现行选中项, .选中, .选中, .选中)
移动 (_启动窗口., 相加 (_启动窗口., _启动窗口.), , )
赋值 (_位置偏移 [1], 相减 (., .宽度))
赋值 (_位置偏移 [2], 相减 (., .高度))
设置窗口 (取窗口句柄 (), -20, 位或 (取窗口风格 (取窗口句柄 (), -2), 524288))
设置透明 (取窗口句柄 (), #品红, 300, 1)
赋值 (.正常图片, .取图片 (.宽度, .高度))
注册鼠标移出移入事件 (取窗口句柄 (), &移入, )

.子程序 _歌词窗口_将被销毁, 空白型, , 
结束 ()
 ' 本源码来自易语言资源网(www.5A5X.com)

.子程序 _颜色选择器1_颜色被改变, 空白型, , 
歌词操作._类初始化 (.颜色, , , , )


.子程序 _颜色选择器2_颜色被改变, 空白型, , 
歌词操作._类初始化 (.颜色, , , )


.子程序 _颜色选择器3_颜色被改变, 空白型, , 
歌词操作._类初始化 (.颜色, , )
 ' 本源码来自易语言资源网(www.5A5X.com)

.子程序 _组合框1_列表项被选择, 空白型, , 
歌词操作._类初始化 (.现行选中项)


.子程序 _选择框1_被单击, 空白型, , 
歌词操作._类初始化 (.选中)
 ' 本源码来自易语言资源网(www.5A5X.com)

.子程序 _颜色选择器4_颜色被改变, 空白型, , 
歌词操作._类初始化 (.颜色, , , , , )


.子程序 _选择框2_被单击, 空白型, , 
歌词操作._类初始化 (.选中)


.子程序 _选择框3_被单击, 空白型, , 
歌词操作._类初始化 (.选中)


.子程序 _编辑框1_内容被改变, 空白型, , 
歌词操作._类初始化 (到数值 (.内容))
 ' 本源码来自易语言资源网(www.5A5X.com)

.子程序 _编辑框2_内容被改变, 空白型, , 
歌词操作._类初始化 (到数值 (.内容), , , , )


.子程序 _按钮1_鼠标左键被按下, 逻辑型, , 
.参数 横向位置, 整数型, , 
.参数 纵向位置, 整数型, , 
.参数 功能键状态, 整数型, , 

.局部变量 临时字体, 字体, , , 

赋值 (临时字体, .字体)
赋值 (.字体名称, 临时字体.字体名称)
赋值 (.字体大小, 临时字体.字体大小)
赋值 (.加粗, 临时字体.加粗)
赋值 (.倾斜, 临时字体.倾斜)
赋值 (.删除线, 临时字体.删除线)
赋值 (.下划线, 临时字体.下划线)
.如果真 (打开 ())
    赋值 (临时字体.字体名称, .字体名称)
    赋值 (临时字体.字体大小, .字体大小)
    赋值 (临时字体.加粗, .加粗)
    赋值 (临时字体.倾斜, .倾斜)
    赋值 (临时字体.删除线, .删除线)
    赋值 (临时字体.下划线, .下划线)
     ' 本源码来自易语言资源网(www.5A5X.com)
    赋值 (.字体, 临时字体)
    歌词操作.刷新字体 ()
.如果真结束


.子程序 _按钮2_鼠标左键被按下, 逻辑型, , 


.子程序 _按钮3_鼠标左键被按下, 逻辑型, , 


.子程序 _按钮4_鼠标左键被按下, 逻辑型, , 


.子程序 _按钮5_鼠标左键被按下, 逻辑型, , 


.子程序 移入, 空白型, , 
赋值 (.可视, 真)


.子程序 _歌词窗口_被取消激活, 空白型, , 
赋值 (.可视, 假)

.子程序 _歌词窗口_失去焦点, 空白型, , 
赋值 (.可视, 假)

.子程序 _按钮6_鼠标左键被按下, 逻辑型, , 
 ' 本源码来自易语言资源网(www.5A5X.com)

.子程序 _透明标签1_鼠标左键被按下, 逻辑型, , 
.参数 横向位置, 整数型, , 
.参数 纵向位置, 整数型, , 
.参数 功能键状态, 整数型, , 

赋值 (_拖放操作_起始横坐标, 横向位置)
赋值 (_拖放操作_起始纵坐标, 纵向位置)
赋值 (_拖放操作_顶端位置, 歌词操作.取字幕位置信息 (3))

歌词操作.时间滚动轴 (真)
歌词操作.刷新显示 ()
赋值 (.时钟周期, 0)


.子程序 _透明标签1_鼠标左键被放开, 逻辑型, , 
.参数 横向位置, 整数型, , 
.参数 纵向位置, 整数型, , 
.参数 功能键状态, 整数型, , 

.局部变量 原始配置, 歌词管理配置, , , 

 ' 本源码来自易语言资源网(www.5A5X.com)
歌词操作.时间滚动轴 (假)
赋值 (原始配置, 歌词操作.取系统配置 ())
歌词操作._类初始化 (假)
歌词操作.刷新显示 ()
歌词操作._类初始化 (原始配置._省CPU模式)
_启动窗口.未知支持库函数_66 (., 歌词操作.当前时间 ())
赋值 (.时钟周期, 150)


.子程序 _透明标签1_鼠标位置被移动, 逻辑型, , 
.参数 横向位置, 整数型, , 
.参数 纵向位置, 整数型, , 
.参数 功能键状态, 整数型, , 

.如果真 (等于 (.时钟周期, 0))
    歌词操作.重置顶端 (相减 (相加 (_拖放操作_顶端位置, 纵向位置), _拖放操作_起始纵坐标))
    歌词操作.刷新显示 ()
.如果真结束

 ' 本源码来自易语言资源网(www.5A5X.com)

.子程序 _添加按钮_被单击, 空白型, , 
.局部变量 横向位置, 整数型, , , 
.局部变量 纵向位置, 整数型, , , 
.局部变量 功能键状态, 整数型, , , 

打开歌曲 ()


.子程序 _播放按钮_被单击, 空白型, , 
.局部变量 横向位置, 整数型, , , 
.局部变量 纵向位置, 整数型, , , 
.局部变量 功能键状态, 整数型, , , 

_启动窗口.未知支持库函数_66 (., -1)


.子程序 _暂停按钮_被单击, 空白型, , 
.局部变量 横向位置, 整数型, , , 
.局部变量 纵向位置, 整数型, , , 
.局部变量 功能键状态, 整数型, , , 

_启动窗口.未知支持库函数_67 (.)


.子程序 _停止按钮_被单击, 空白型, , 
.局部变量 横向位置, 整数型, , , 
.局部变量 纵向位置, 整数型, , , 
.局部变量 功能键状态, 整数型, , , 

_启动窗口.未知支持库函数_68 (.)


.子程序 _退出按钮_被单击, 空白型, , 
.局部变量 横向位置, 整数型, , , 
.局部变量 纵向位置, 整数型, , , 
.局部变量 功能键状态, 整数型, , , 

_启动窗口.销毁 ()
' 本源码来自易语言资源网(www.5A5X.com)

.子程序 _标签1_反馈事件, 整数型, , 
.参数 参数一, 整数型, , 
.参数 参数二, 整数型, , 



.程序集 __HIDDEN_TEMP_MOD__, , , 

.子程序 注册鼠标移出移入事件, 整数型, , 同一窗口句柄,在未注销前只需注册一次.成功返回非0值
.参数 窗口句柄, 整数型, , 需要注册的窗口或组件句柄
.参数 移入事件回调子程序, 子程序指针, 可空, 鼠标移入时调用该子程序
.参数 移出事件回调子程序, 子程序指针, 可空, 鼠标移出时调用该子程序



.子程序 注销鼠标移出移入事件, 整数型, , 成功返回非0值
.参数 窗口句柄, 整数型, , 需要注销移出移入事件的窗口或组件句柄




 ' 不属于任何一个程序集、类模块的函数：
