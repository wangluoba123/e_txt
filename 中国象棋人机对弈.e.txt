 ' 文件类型：Windows窗口程序

 ' 程序名称：
 ' 程序描述：
 ' 程序作者：李恒
 ' 邮政编码：
 ' 联系地址：
 ' 联系电话：
 ' 传真号码：
 ' 电子信箱：liheng994@sina.com
 ' 主页地址：
 ' 版权声明：
 ' 版本号：1.1
 ' 创建号：0.0

窗口 _启动窗口 ' 在程序启动后自动调入本窗口
    左边 = 50
    顶边 = 50
    宽度 = 562
    高度 = 507
    鼠标指针 = { 0,0,0,0 }
    标记 = “”
    可视 = 真
    禁止 = 假
    边框 = 2
    底图方式 = 1
    底色 = -16777216 '  0xFF000000
    最大化按钮 = 假
    最小化按钮 = 假
    控制按钮 = 真
    位置 = 1
    可否移动 = 真
    背景音乐播放次数 = 0
    回车下移焦点 = 假
    Esc键关闭 = 真
    F1键打开帮助 = 假
    帮助标志值 = 0
    在任务栏中显示 = 真
    随意移动 = 真
    外形 = 0
    总在最前 = 假
    保持标题栏激活 = 假
    底图 =  ' 空
    图标 =  ' 已保存到：D:\易语言学习\Data\中国象棋人机对弈.e\_启动窗口_图标.ico
    背景音乐 =  ' 空
    标题 = “E版中国象棋人机对弈”
    帮助文件名 = “”

窗口 关于
    左边 = 50
    顶边 = 50
    宽度 = 385
    高度 = 304
    鼠标指针 = { 0,0,0,0 }
    标记 = “”
    可视 = 真
    禁止 = 假
    边框 = 2
    底图方式 = 1
    底色 = -16777216 '  0xFF000000
    最大化按钮 = 假
    最小化按钮 = 假
    控制按钮 = 真
    位置 = 1
    可否移动 = 真
    背景音乐播放次数 = 0
    回车下移焦点 = 假
    Esc键关闭 = 真
    F1键打开帮助 = 假
    帮助标志值 = 0
    在任务栏中显示 = 真
    随意移动 = 假
    外形 = 0
    总在最前 = 假
    保持标题栏激活 = 假
    底图 =  ' 空
    图标 =  ' 空
    背景音乐 =  ' 空
    标题 = “E版中国象棋人机对弈”
    帮助文件名 = “”



.常量 , , , 
.图片 黑帅, " ' 已保存到：D:\易语言学习\Data\中国象棋人机对弈.e\黑帅", , 
.图片 黑车, " ' 已保存到：D:\易语言学习\Data\中国象棋人机对弈.e\黑车", , 
.图片 黑马, " ' 已保存到：D:\易语言学习\Data\中国象棋人机对弈.e\黑马", , 
.图片 黑炮, " ' 已保存到：D:\易语言学习\Data\中国象棋人机对弈.e\黑炮", , 
.图片 黑士, " ' 已保存到：D:\易语言学习\Data\中国象棋人机对弈.e\黑士", , 
.图片 黑象, " ' 已保存到：D:\易语言学习\Data\中国象棋人机对弈.e\黑象", , 
.图片 黑兵, " ' 已保存到：D:\易语言学习\Data\中国象棋人机对弈.e\黑兵", , 
.图片 红将, " ' 已保存到：D:\易语言学习\Data\中国象棋人机对弈.e\红将", , 
.图片 红车, " ' 已保存到：D:\易语言学习\Data\中国象棋人机对弈.e\红车", , 
.图片 红马, " ' 已保存到：D:\易语言学习\Data\中国象棋人机对弈.e\红马", , 
.图片 红象, " ' 已保存到：D:\易语言学习\Data\中国象棋人机对弈.e\红象", , 
.图片 红炮, " ' 已保存到：D:\易语言学习\Data\中国象棋人机对弈.e\红炮", , 
.图片 红兵, " ' 已保存到：D:\易语言学习\Data\中国象棋人机对弈.e\红兵", , 
.图片 红士, " ' 已保存到：D:\易语言学习\Data\中国象棋人机对弈.e\红士", , 
.图片 黑帅1, " ' 已保存到：D:\易语言学习\Data\中国象棋人机对弈.e\黑帅1", , 
.图片 黑车1, " ' 已保存到：D:\易语言学习\Data\中国象棋人机对弈.e\黑车1", , 
.图片 黑马1, " ' 已保存到：D:\易语言学习\Data\中国象棋人机对弈.e\黑马1", , 
.图片 黑炮1, " ' 已保存到：D:\易语言学习\Data\中国象棋人机对弈.e\黑炮1", , 
.图片 黑士1, " ' 已保存到：D:\易语言学习\Data\中国象棋人机对弈.e\黑士1", , 
.图片 黑象1, " ' 已保存到：D:\易语言学习\Data\中国象棋人机对弈.e\黑象1", , 
.图片 黑兵1, " ' 已保存到：D:\易语言学习\Data\中国象棋人机对弈.e\黑兵1", , 
.图片 红将1, " ' 已保存到：D:\易语言学习\Data\中国象棋人机对弈.e\红将1", , 
.图片 红车1, " ' 已保存到：D:\易语言学习\Data\中国象棋人机对弈.e\红车1", , 
.图片 红马1, " ' 已保存到：D:\易语言学习\Data\中国象棋人机对弈.e\红马1", , 
.图片 红象1, " ' 已保存到：D:\易语言学习\Data\中国象棋人机对弈.e\红象1", , 
.图片 红炮1, " ' 已保存到：D:\易语言学习\Data\中国象棋人机对弈.e\红炮1", , 
.图片 红兵1, " ' 已保存到：D:\易语言学习\Data\中国象棋人机对弈.e\红兵1", , 
.图片 红士1, " ' 已保存到：D:\易语言学习\Data\中国象棋人机对弈.e\红士1", , 


 ' 所需要的支持库：
 ' krnln d09f2340818511d396f6aaf844c7e325 4 4 系统核心支持库
 ' iext 27bb20fdd3e145e4bee3db39ddd6e64c 1 2 扩展界面支持库一
 ' xplib 7F54B9CE8887428dBA9CEEB94CEF4C72 1 6 XP风格界面库




数据类型 棋子点, , 棋子坐标
    .成员 横坐标, 字节型, , , 
    .成员 纵坐标, 字节型, , , 

数据类型 走法, , 
    .成员 起始位置, 棋子点, , , 起始位置
    .成员 终点位置, 棋子点, , , 走到的位置

数据类型 历史走法, , 
    .成员 红走法, 走法, , , 
    .成员 黑走法, 走法, , , 

.全局变量 棋盘数据, 字节型, , "10,9", 
.全局变量 游戏类型, 短整数型, , , 
.全局变量 起始点, 棋子点, , , 
.全局变量 终点, 棋子点, , , 
.全局变量 走法数量, 短整数型, , , 
.全局变量 选中, 逻辑型, , , 
.全局变量 该谁走, 逻辑型, , , 真为红，假为黑
.全局变量 步数, 整数型, , , 
.全局变量 相关位置数, 整数型, , , 
.全局变量 相关位置, 棋子点, , "20", 
.全局变量 对战状态, 逻辑型, , , 真为两人对下，假为人机博弈
.全局变量 最大深度, 短整数型, , , 
.全局变量 当前节点棋盘状态, 字节型, , "10,9", 
.全局变量 红卒的附加值, 短整数型, , "10,9", 
.全局变量 黑兵的附加值, 短整数型, , "10,9", 
.全局变量 棋子基本价值, 整数型, , "15", 每种棋子的基本价值,兵 100，士 250，象 250， 500，R 350，炮 350
.全局变量 棋子灵活性价值, 短整数型, , "15", 每多一个可走位置应加上的分值,兵 15，士 1，象 1， 6，R 12，炮 6，王 0
.全局变量 最佳走法, 走法, , , 
.全局变量 是否结束, 逻辑型, , , 
.全局变量 走法列表, 走法, , "4,70", 
.全局变量 前棋子点, 棋子点, , , 
.全局变量 前棋子类型, 短整数型, , , 
.全局变量 历史走法, 历史走法, , "0", 

.窗口程序集 窗口程序集1, , , 

.子程序 __启动窗口_创建完毕, 空白型, , 
.局部变量 变量y, 整数型, , , 
.局部变量 变量x, 整数型, , , 
.局部变量 数组, 字节型, , "90", 

 ' 初始化游戏界面
未知支持库函数_0 (1)
赋值 (对战状态, 假)
_开局_被单击 ()
赋值 (数组, { 0, 0, 0, 0, 0, 0, 0, 0, 0, 120, 120, 140, 150, 150, 150, 140, 120, 120, 120, 120, 140, 150, 150, 150, 140, 120, 120, 100, 120, 140, 140, 140, 140, 140, 120, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 })
.计次循环首 (10, 变量y)
    .计次循环首 (9, 变量x)
        赋值 (红卒的附加值 [变量y] [变量x], 数组 [相加 (相乘 (相减 (变量y, 1), 9), 变量x)])
    .计次循环尾 ()
.计次循环尾 ()
赋值 (数组, { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 120, 140, 140, 140, 140, 140, 120, 100, 120, 120, 140, 150, 150, 150, 140, 120, 120, 120, 120, 140, 150, 150, 150, 140, 120, 120, 0, 0, 0, 0, 0, 0, 0, 0, 0 })
.计次循环首 (10, 变量y)
    .计次循环首 (9, 变量x)
        赋值 (黑兵的附加值 [变量y] [变量x], 数组 [相加 (相乘 (相减 (变量y, 1), 9), 变量x)])
    .计次循环尾 ()
.计次循环尾 ()
赋值 (棋子基本价值, { 10000, 1400, 700, 700, 250, 250, 100, 10000, 1400, 700, 700, 250, 250, 100 }) ' 兵 100，士 250，象 250， 1400，R 700，炮 700
赋值 (棋子灵活性价值, { 0, 6, 12, 6, 1, 1, 15, 0, 6, 12, 6, 1, 1, 15 }) ' 兵 15，士 1，象 1， 6，R 12，炮 6，王 0
赋值 (最大深度, 2)


.子程序 _画板游戏区_鼠标左键被按下, 逻辑型, , 
.参数 横向位置, 整数型, , 
.参数 纵向位置, 整数型, , 
.参数 功能键状态, 整数型, , 

.局部变量 红棋活着, 逻辑型, , , 
.局部变量 黑棋活着, 逻辑型, , , 
.局部变量 鼠标位置, 棋子点, , , 
.局部变量 变量x, 整数型, , , 
.局部变量 变量y, 整数型, , , 

.如果真 (等于 (是否结束, 假))
    .如果真 (或者 (小于 (横向位置, 0), 大于 (横向位置, 432), 小于 (纵向位置, 0), 大于 (纵向位置, 480)))
        返回 (假)
    .如果真结束
    赋值 (鼠标位置.横坐标, 相加 (整除 (横向位置, 48), 1))
    赋值 (鼠标位置.纵坐标, 相加 (整除 (纵向位置, 48), 1))
    .如果真 (并且 (等于 (选中, 真), 等于 (棋盘数据 [鼠标位置].纵坐标 [鼠标位置].横坐标, 0)))
        赋值 (终点.横坐标, 鼠标位置.横坐标)
        赋值 (终点.纵坐标, 鼠标位置.纵坐标)
        .如果真 (等于 (合法走法 (起始点, 终点, 棋盘数据), 真))
            移动棋子 (起始点, 终点)
            赋值 (棋盘数据 [终点].纵坐标 [终点].横坐标, 棋盘数据 [起始点].纵坐标 [起始点].横坐标)
            赋值 (棋盘数据 [起始点].纵坐标 [起始点].横坐标, 0)
            赋值 (选中, 假)
            赋值 (步数, 相加 (步数, 1))
            重定义数组 (历史走法, 真, 步数)
            赋值 (历史走法 [步数], 红走法.起始位置, 起始点)
            赋值 (历史走法 [步数], 红走法.终点位置, 终点)
            一步最佳走法 ()
            赋值 (.内容, 相加 (“步数:”, 到文本 (步数)))
            返回 (假)
        .如果真结束
        
    .如果真结束
    .如果真 (并且 (等于 (该谁走, 真), 等于 (判断棋子颜色 (棋盘数据 [鼠标位置].纵坐标 [鼠标位置].横坐标), 真)))
        赋值 (起始点.横坐标, 鼠标位置.横坐标)
        赋值 (起始点.纵坐标, 鼠标位置.纵坐标)
        选中棋子 (起始点)
        赋值 (选中, 真)
        返回 (假)
    .如果真结束
    .如果 (等于 (对战状态, 真))
        .如果真 (并且 (等于 (该谁走, 假), 等于 (判断棋子颜色 (棋盘数据 [鼠标位置].纵坐标 [鼠标位置].横坐标), 假)))
            赋值 (起始点.横坐标, 鼠标位置.横坐标)
            赋值 (起始点.纵坐标, 鼠标位置.纵坐标)
            赋值 (选中, 真)
            返回 (假)
        .如果真结束
        .如果真 (并且 (等于 (选中, 真), 等于 (判断两个棋子是否同色 (棋盘数据 [起始点].纵坐标 [起始点].横坐标, 棋盘数据 [鼠标位置].纵坐标 [鼠标位置].横坐标), 假)))
            赋值 (终点.横坐标, 鼠标位置.横坐标)
            赋值 (终点.纵坐标, 鼠标位置.纵坐标)
            .如果真 (等于 (合法走法 (起始点, 终点, 棋盘数据), 真))
                移动棋子 (起始点, 终点)
                赋值 (棋盘数据 [终点].纵坐标 [终点].横坐标, 棋盘数据 [起始点].纵坐标 [起始点].横坐标)
                赋值 (棋盘数据 [起始点].纵坐标 [起始点].横坐标, 0)
                赋值 (选中, 假)
                赋值 (步数, 相加 (步数, 1))
                重定义数组 (历史走法, 真, 步数)
                赋值 (历史走法 [步数], 红走法.起始位置, 起始点)
                赋值 (历史走法 [步数], 红走法.终点位置, 终点)
                赋值 (该谁走, 取反 (该谁走))
                .如果 (等于 (该谁走, 真))
                    赋值 (.内容, “到你了...”)
                .否则
                    赋值 (.内容, “电脑思考中...”)
                .如果结束
                返回 (假)
            .如果真结束
            
        .如果真结束
        
    .否则
        .如果真 (并且 (等于 (选中, 真), 等于 (判断两个棋子是否同色 (棋盘数据 [起始点].纵坐标 [起始点].横坐标, 棋盘数据 [鼠标位置].纵坐标 [鼠标位置].横坐标), 假)))
            赋值 (终点.横坐标, 鼠标位置.横坐标)
            赋值 (终点.纵坐标, 鼠标位置.纵坐标)
            .如果真 (等于 (合法走法 (起始点, 终点, 棋盘数据), 真))
                移动棋子 (起始点, 终点)
                赋值 (棋盘数据 [终点].纵坐标 [终点].横坐标, 棋盘数据 [起始点].纵坐标 [起始点].横坐标)
                赋值 (棋盘数据 [起始点].纵坐标 [起始点].横坐标, 0)
                赋值 (选中, 假)
                赋值 (步数, 相加 (步数, 1))
                重定义数组 (历史走法, 真, 步数)
                赋值 (历史走法 [步数], 红走法.起始位置, 起始点)
                赋值 (历史走法 [步数], 红走法.终点位置, 终点)
                一步最佳走法 ()
                返回 (假)
            .如果真结束
            
        .如果真结束
        
    .如果结束
    
    .变量循环首 (8, 10, 1, 变量y)
        .变量循环首 (4, 6, 1, 变量x)
            .如果真 (等于 (棋盘数据 [变量y] [变量x], 1))
                赋值 (黑棋活着, 真)
            .如果真结束
            .如果真 (等于 (棋盘数据 [变量y] [变量x], 8))
                赋值 (红棋活着, 真)
            .如果真结束
            
        .变量循环尾 ()
    .变量循环尾 ()
    .变量循环首 (1, 3, 1, 变量y)
        .变量循环首 (4, 6, 1, 变量x)
            .如果真 (等于 (棋盘数据 [变量y] [变量x], 1))
                赋值 (黑棋活着, 真)
            .如果真结束
            .如果真 (等于 (棋盘数据 [变量y] [变量x], 8))
                赋值 (红棋活着, 真)
            .如果真结束
            
        .变量循环尾 ()
    .变量循环尾 ()
    .如果真 (并且 (等于 (黑棋活着, 真), 等于 (红棋活着, 假)))
        赋值 (是否结束, 真)
        赋值 (.内容, “你输了”)
    .如果真结束
    .如果真 (并且 (等于 (黑棋活着, 假), 等于 (红棋活着, 真)))
        赋值 (是否结束, 真)
        赋值 (.内容, “你赢了”)
    .如果真结束
    .如果真 (并且 (等于 (黑棋活着, 真), 等于 (红棋活着, 真)))
        赋值 (是否结束, 假)
        
    .如果真结束
    
.如果真结束


.子程序 合法走法, 逻辑型, , 
.参数 初始棋子点, 棋子点, , 
.参数 最终棋子点, 棋子点, , 
.参数 当前棋盘, 字节型, 数组, 

.局部变量 变量1, 整数型, , , 
.局部变量 变量2, 整数型, , , 
.局部变量 初棋子, 整数型, , , 
.局部变量 终棋子, 整数型, , , 

赋值 (初棋子, 当前棋盘 [初始棋子点].纵坐标 [初始棋子点].横坐标)
赋值 (终棋子, 当前棋盘 [最终棋子点].纵坐标 [最终棋子点].横坐标)
.如果真 (并且 (等于 (初始棋子点.横坐标, 最终棋子点.横坐标), 等于 (初始棋子点.纵坐标, 最终棋子点.纵坐标)))
    返回 (假)
.如果真结束
.如果真 (不等于 (终棋子, 0))
    .如果真 (等于 (判断两个棋子是否同色 (初棋子, 终棋子), 真))
        返回 (假)
    .如果真结束
    
.如果真结束
.判断开始 (等于 (初棋子, 1))
    .如果 (等于 (终棋子, 8))
        .如果真 (不等于 (初始棋子点.横坐标, 最终棋子点.横坐标))
            返回 (假)
        .如果真结束
        赋值 (变量1, 相加 (初始棋子点.纵坐标, 1))
        .变量循环首 (变量1, 相减 (最终棋子点.纵坐标, 1), 1, 变量1)
            .如果真 (不等于 (当前棋盘 [变量1] [初始棋子点].横坐标, 0))
                返回 (假)
            .如果真结束
            
        .变量循环尾 ()
    .否则
        .如果真 (或者 (大于 (最终棋子点.纵坐标, 3), 小于 (最终棋子点.横坐标, 4), 大于 (最终棋子点.横坐标, 6)))
            返回 (假)
        .如果真结束
        .如果真 (大于 (相加 (取绝对值 (相减 (最终棋子点.纵坐标, 初始棋子点.纵坐标)), 取绝对值 (相减 (初始棋子点.横坐标, 最终棋子点.横坐标))), 1))
            返回 (假)
        .如果真结束
        
    .如果结束
    
.判断 (等于 (初棋子, 8))
    .如果 (等于 (终棋子, 1))
        .如果真 (不等于 (初始棋子点.横坐标, 最终棋子点.横坐标))
            返回 (假)
        .如果真结束
        赋值 (变量1, 相减 (初始棋子点.纵坐标, 1))
        .变量循环首 (变量1, 相加 (最终棋子点.纵坐标, 1), -1, 变量1)
            .如果真 (不等于 (当前棋盘 [变量1] [初始棋子点].横坐标, 0))
                返回 (假)
            .如果真结束
            
        .变量循环尾 ()
    .否则
        .如果真 (或者 (小于 (最终棋子点.纵坐标, 8), 小于 (最终棋子点.横坐标, 4), 大于 (最终棋子点.横坐标, 6)))
            返回 (假)
        .如果真结束
        .如果真 (大于 (相加 (取绝对值 (相减 (最终棋子点.纵坐标, 初始棋子点.纵坐标)), 取绝对值 (相减 (初始棋子点.横坐标, 最终棋子点.横坐标))), 1))
            返回 (假)
        .如果真结束
        
    .如果结束
    
.判断 (等于 (初棋子, 12))
    .如果真 (或者 (小于 (最终棋子点.纵坐标, 8), 小于 (最终棋子点.横坐标, 4), 大于 (最终棋子点.横坐标, 6)))
        返回 (假)
    .如果真结束
    .如果真 (或者 (不等于 (取绝对值 (相减 (最终棋子点.纵坐标, 初始棋子点.纵坐标)), 1), 不等于 (取绝对值 (相减 (最终棋子点.横坐标, 初始棋子点.横坐标)), 1)))
        返回 (假)
    .如果真结束
    
.判断 (等于 (初棋子, 5))
    .如果真 (或者 (大于 (最终棋子点.纵坐标, 3), 小于 (最终棋子点.横坐标, 4), 大于 (最终棋子点.横坐标, 6)))
        返回 (假)
    .如果真结束
    .如果真 (或者 (不等于 (取绝对值 (相减 (最终棋子点.纵坐标, 初始棋子点.纵坐标)), 1), 不等于 (取绝对值 (相减 (最终棋子点.横坐标, 初始棋子点.横坐标)), 1)))
        返回 (假)
    .如果真结束
    
.判断 (等于 (初棋子, 13))
    .如果真 (小于 (最终棋子点.纵坐标, 6))
        返回 (假)
    .如果真结束
    .如果真 (或者 (不等于 (取绝对值 (相减 (最终棋子点.纵坐标, 初始棋子点.纵坐标)), 2), 不等于 (取绝对值 (相减 (最终棋子点.横坐标, 初始棋子点.横坐标)), 2)))
        返回 (假)
    .如果真结束
    .如果真 (不等于 (当前棋盘 [相除 (相加 (初始棋子点.纵坐标, 最终棋子点.纵坐标), 2)] [相除 (相加 (初始棋子点.横坐标, 最终棋子点.横坐标), 2)], 0))
        返回 (假)
    .如果真结束
    
.判断 (等于 (初棋子, 6))
    .如果真 (大于 (最终棋子点.纵坐标, 5))
        返回 (假)
    .如果真结束
    .如果真 (或者 (不等于 (取绝对值 (相减 (最终棋子点.纵坐标, 初始棋子点.纵坐标)), 2), 不等于 (取绝对值 (相减 (最终棋子点.横坐标, 初始棋子点.横坐标)), 2)))
        返回 (假)
    .如果真结束
    .如果真 (不等于 (当前棋盘 [相除 (相加 (初始棋子点.纵坐标, 最终棋子点.纵坐标), 2)] [相除 (相加 (初始棋子点.横坐标, 最终棋子点.横坐标), 2)], 0))
        返回 (假)
    .如果真结束
    
.判断 (等于 (初棋子, 7))
    .如果真 (小于 (最终棋子点.纵坐标, 初始棋子点.纵坐标))
        返回 (假)
    .如果真结束
    .如果真 (并且 (小于 (初始棋子点.纵坐标, 6), 等于 (初始棋子点.纵坐标, 最终棋子点.纵坐标)))
        返回 (假)
    .如果真结束
    .如果真 (大于 (相加 (相减 (最终棋子点.纵坐标, 初始棋子点.纵坐标), 取绝对值 (相减 (初始棋子点.横坐标, 最终棋子点.横坐标))), 1))
        返回 (假)
    .如果真结束
    
.判断 (或者 (等于 (初棋子, 9), 等于 (初棋子, 2)))
    .如果真 (并且 (不等于 (初始棋子点.纵坐标, 最终棋子点.纵坐标), 不等于 (初始棋子点.横坐标, 最终棋子点.横坐标)))
        返回 (假)
    .如果真结束
    .如果 (等于 (初始棋子点.纵坐标, 最终棋子点.纵坐标))
        .如果 (小于 (初始棋子点.横坐标, 最终棋子点.横坐标))
            赋值 (变量1, 相加 (初始棋子点.横坐标, 1))
            .变量循环首 (变量1, 相减 (最终棋子点.横坐标, 1), 1, 变量1)
                .如果真 (不等于 (当前棋盘 [初始棋子点].纵坐标 [变量1], 0))
                    返回 (假)
                .如果真结束
                
            .变量循环尾 ()
        .否则
            赋值 (变量1, 相加 (初始棋子点.横坐标, 1))
            .变量循环首 (变量1, 相减 (初始棋子点.横坐标, 1), 1, 变量1)
                .如果真 (不等于 (当前棋盘 [初始棋子点].纵坐标 [变量1], 0))
                    返回 (假)
                .如果真结束
                
            .变量循环尾 ()
        .如果结束
        
    .否则
        .如果 (小于 (初始棋子点.纵坐标, 最终棋子点.纵坐标))
            赋值 (变量1, 相加 (初始棋子点.纵坐标, 1))
            .变量循环首 (变量1, 相减 (最终棋子点.纵坐标, 1), 1, 变量1)
                .如果真 (不等于 (当前棋盘 [变量1] [初始棋子点].横坐标, 0))
                    返回 (假)
                .如果真结束
                
            .变量循环尾 ()
        .否则
            赋值 (变量1, 相加 (最终棋子点.纵坐标, 1))
            .变量循环首 (变量1, 相减 (初始棋子点.纵坐标, 1), 1, 变量1)
                .如果真 (不等于 (当前棋盘 [变量1] [初始棋子点].横坐标, 0))
                    返回 (假)
                .如果真结束
                
            .变量循环尾 ()
        .如果结束
        
    .如果结束
    
.判断 (或者 (等于 (初棋子, 10), 等于 (初棋子, 3)))
    .如果真 (不等于 (或者 (并且 (等于 (取绝对值 (相减 (初始棋子点.横坐标, 最终棋子点.横坐标)), 1), 等于 (取绝对值 (相减 (初始棋子点.纵坐标, 最终棋子点.纵坐标)), 2)), 并且 (等于 (取绝对值 (相减 (初始棋子点.横坐标, 最终棋子点.横坐标)), 2), 等于 (取绝对值 (相减 (初始棋子点.纵坐标, 最终棋子点.纵坐标)), 1))), 真))
        返回 (假)
    .如果真结束
    .判断开始 (等于 (相减 (最终棋子点.横坐标, 初始棋子点.横坐标), 2))
        赋值 (变量1, 相加 (初始棋子点.横坐标, 1))
        赋值 (变量2, 初始棋子点.纵坐标)
    .判断 (等于 (相减 (初始棋子点.横坐标, 最终棋子点.横坐标), 2))
        赋值 (变量1, 相减 (初始棋子点.横坐标, 1))
        赋值 (变量2, 初始棋子点.纵坐标)
    .判断 (等于 (相减 (最终棋子点.纵坐标, 初始棋子点.纵坐标), 2))
        赋值 (变量1, 初始棋子点.横坐标)
        赋值 (变量2, 相加 (初始棋子点.纵坐标, 1))
    .判断 (等于 (相减 (初始棋子点.纵坐标, 最终棋子点.纵坐标), 2))
        赋值 (变量1, 初始棋子点.横坐标)
        赋值 (变量2, 相减 (初始棋子点.纵坐标, 1))
    .默认
        
    .判断结束
    .如果真 (不等于 (当前棋盘 [变量2] [变量1], 0))
        返回 (假)
    .如果真结束
    
.判断 (或者 (等于 (初棋子, 11), 等于 (初棋子, 4)))
    .如果真 (并且 (不等于 (初始棋子点.纵坐标, 最终棋子点.纵坐标), 不等于 (初始棋子点.横坐标, 最终棋子点.横坐标)))
        返回 (假)
    .如果真结束
    .如果 (等于 (当前棋盘 [最终棋子点].纵坐标 [最终棋子点].横坐标, 0))
        .如果 (等于 (初始棋子点.纵坐标, 最终棋子点.纵坐标))
            .如果 (小于 (初始棋子点.横坐标, 最终棋子点.横坐标))
                赋值 (变量1, 相加 (初始棋子点.横坐标, 1))
                .变量循环首 (变量1, 相减 (最终棋子点.横坐标, 1), 1, 变量1)
                    .如果真 (不等于 (当前棋盘 [初始棋子点].纵坐标 [变量1], 0))
                        返回 (假)
                    .如果真结束
                    
                .变量循环尾 ()
            .否则
                赋值 (变量1, 相加 (最终棋子点.横坐标, 1))
                .变量循环首 (变量1, 相减 (初始棋子点.横坐标, 1), 1, 变量1)
                    .如果真 (不等于 (当前棋盘 [初始棋子点].纵坐标 [变量1], 0))
                        返回 (假)
                    .如果真结束
                    
                .变量循环尾 ()
            .如果结束
            
        .否则
            .如果 (小于 (初始棋子点.纵坐标, 最终棋子点.纵坐标))
                赋值 (变量1, 相加 (初始棋子点.纵坐标, 1))
                .变量循环首 (变量1, 相减 (最终棋子点.纵坐标, 1), 1, 变量1)
                    .如果真 (不等于 (当前棋盘 [变量1] [初始棋子点].横坐标, 0))
                        返回 (假)
                    .如果真结束
                    
                .变量循环尾 ()
            .否则
                赋值 (变量1, 相加 (最终棋子点.纵坐标, 1))
                .变量循环首 (变量1, 相减 (初始棋子点.纵坐标, 1), 1, 变量1)
                    .如果真 (不等于 (当前棋盘 [变量1] [初始棋子点].横坐标, 0))
                        返回 (假)
                    .如果真结束
                    
                .变量循环尾 ()
            .如果结束
            
        .如果结束
        
    .否则
        赋值 (变量2, 0)
        .如果 (等于 (初始棋子点.纵坐标, 最终棋子点.纵坐标))
            .如果 (小于 (初始棋子点.横坐标, 最终棋子点.横坐标))
                赋值 (变量1, 相加 (初始棋子点.横坐标, 1))
                .变量循环首 (变量1, 相减 (最终棋子点.横坐标, 1), 1, 变量1)
                    .如果真 (不等于 (当前棋盘 [初始棋子点].纵坐标 [变量1], 0))
                        赋值 (变量2, 相加 (变量2, 1))
                    .如果真结束
                    
                .变量循环尾 ()
                .如果真 (不等于 (变量2, 1))
                    返回 (假)
                .如果真结束
                
            .否则
                赋值 (变量1, 相加 (最终棋子点.横坐标, 1))
                .变量循环首 (变量1, 相减 (初始棋子点.横坐标, 1), 1, 变量1)
                    .如果真 (不等于 (当前棋盘 [初始棋子点].纵坐标 [变量1], 0))
                        赋值 (变量2, 相加 (变量2, 1))
                    .如果真结束
                    
                .变量循环尾 ()
                .如果真 (不等于 (变量2, 1))
                    返回 (假)
                .如果真结束
                
            .如果结束
            
        .否则
            .如果 (小于 (初始棋子点.纵坐标, 最终棋子点.纵坐标))
                赋值 (变量1, 相加 (初始棋子点.纵坐标, 1))
                .变量循环首 (变量1, 相减 (最终棋子点.纵坐标, 1), 1, 变量1)
                    .如果真 (不等于 (当前棋盘 [变量1] [初始棋子点].横坐标, 0))
                        赋值 (变量2, 相加 (变量2, 1))
                    .如果真结束
                    
                .变量循环尾 ()
                .如果真 (不等于 (变量2, 1))
                    返回 (假)
                .如果真结束
                
            .否则
                赋值 (变量1, 相加 (最终棋子点.纵坐标, 1))
                .变量循环首 (变量1, 相减 (初始棋子点.纵坐标, 1), 1, 变量1)
                    .如果真 (不等于 (当前棋盘 [变量1] [初始棋子点].横坐标, 0))
                        赋值 (变量2, 相加 (变量2, 1))
                    .如果真结束
                    
                .变量循环尾 ()
                .如果真 (不等于 (变量2, 1))
                    返回 (假)
                .如果真结束
                
            .如果结束
            
        .如果结束
        
    .如果结束
    
.判断 (等于 (初棋子, 14))
    .如果真 (大于 (最终棋子点.纵坐标, 初始棋子点.纵坐标))
        返回 (假)
    .如果真结束
    .如果真 (并且 (大于 (初始棋子点.纵坐标, 5), 等于 (初始棋子点.纵坐标, 最终棋子点.纵坐标)))
        返回 (假)
    .如果真结束
    .如果真 (大于 (相加 (相减 (初始棋子点.纵坐标, 最终棋子点.纵坐标), 取绝对值 (相减 (初始棋子点.横坐标, 最终棋子点.横坐标))), 1))
        返回 (假)
    .如果真结束
    
.默认
    返回 (假)
.判断结束
返回 (真)

.子程序 _开局_被单击, 空白型, , 
.局部变量 变量, 空白型, , , 
.局部变量 横坐标, 整数型, , , 
.局部变量 纵坐标, 整数型, , , 

赋值 (是否结束, 假)
棋盘赋值 ()
赋值 (该谁走, 真)
赋值 (步数, 0)
赋值 (起始点.横坐标, 0)
赋值 (起始点.纵坐标, 0)
赋值 (选中, 假)
赋值 (.内容, “”)
赋值 (.内容, “步数:”)
赋值 (.内容, “时间”)
禁止重画 ()
.清除 ()
赋值 (.画笔粗细, 2)
.计次循环首 (10, 变量) ' 画分隔线
    相加 (相乘 (相减 (变量, 1), 48), 24).画直线 (24, 相加 (相乘 (相减 (变量, 1), 48), 24), 216)
    相加 (相乘 (相减 (变量, 1), 48), 24).画直线 (264, 相加 (相乘 (相减 (变量, 1), 48), 24), 相减 (.高度, 28))
    24.画直线 (相加 (相乘 (相减 (变量, 1), 48), 24), 相减 (.宽度, 28), 相加 (相乘 (相减 (变量, 1), 48), 24))
.计次循环尾 ()
24.画直线 (216, 24, 264)
408.画直线 (216, 408, 264)
赋值 (.画笔粗细, 3)
19.画直线 (19, 19, 461)
413.画直线 (19, 413, 461)
19.画直线 (19, 413, 19)
19.画直线 (461, 413, 461)
赋值 (.画笔粗细, 1)
168.画直线 (24, 264, 120)
168.画直线 (120, 264, 24)
168.画直线 (相减 (.高度, 28), 264, 相减 (.高度, 124))
264.画直线 (相减 (.高度, 28), 168, 相减 (.高度, 124))
0.复制 (0, 436, 484, , 0, 0, )
初始化棋盘 ()
允许重画 ()

.子程序 判断棋子颜色, 逻辑型, , TRUE 为红方，FALSE 是黑方
.参数 棋, 短整数型, , 

.如果 (并且 (大于或等于 (棋, 1), 小于或等于 (棋, 7)))
    返回 (假)
.否则
    返回 (真)
.如果结束


.子程序 判断两个棋子是否同色, 逻辑型, , 
.参数 棋1, 短整数型, , 
.参数 棋2, 短整数型, , 

.如果真 (等于 (判断棋子颜色 (棋1), 判断棋子颜色 (棋2)))
    返回 (真)
.如果真结束
返回 (假)

.子程序 棋盘赋值, 空白型, , 
.局部变量 变量1, 整数型, , , 
.局部变量 变量2, 整数型, , , 
.局部变量 数组, 字节型, , "90", 

赋值 (数组, { 2, 3, 6, 5, 1, 5, 6, 3, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4, 0, 0, 0, 0, 0, 4, 0, 7, 0, 7, 0, 7, 0, 7, 0, 7, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 14, 0, 14, 0, 14, 0, 14, 0, 14, 0, 11, 0, 0, 0, 0, 0, 11, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 9, 10, 13, 12, 8, 12, 13, 10, 9 })
.计次循环首 (10, 变量1)
    .计次循环首 (9, 变量2)
        赋值 (棋盘数据 [变量1] [变量2], 数组 [相加 (相乘 (相减 (变量1, 1), 9), 变量2)])
    .计次循环尾 ()
.计次循环尾 ()

.子程序 初始化棋盘, 空白型, , 
.局部变量 横坐标, 短整数型, , , 
.局部变量 纵坐标, 短整数型, , , 
.局部变量 变量1, 整数型, , , 
.局部变量 图片号, 整数型, , , 
.局部变量 变量2, 整数型, , , 

.计次循环首 (10, 变量1)
    .计次循环首 (9, 变量2)
        赋值 (图片号, 对应位图1 (棋盘数据 [变量1] [变量2]))
        .如果 (不等于 (图片号, 0))
            相乘 (相减 (变量2, 1), 48).复制 (相乘 (相减 (变量1, 1), 48), 48, 48, , 0, 0, )
            图片号.画图片 (0, 0, 44, 44, 负 (取颜色值 (255, 255, 255)))
            0.复制 (0, 44, 44, , 相乘 (相减 (变量2, 1), 48), 相乘 (相减 (变量1, 1), 48), )
            卸载图片 (图片号)
        .否则
            
        .如果结束
        
    .计次循环尾 ()
.计次循环尾 ()

.子程序 对应位图1, 整数型, , 
.参数 棋数字, 短整数型, 可空, 


.判断开始 (等于 (棋数字, 0))
    返回 (0)
.判断 (等于 (棋数字, 1))
    返回 (载入图片 (#黑帅))
.判断 (等于 (棋数字, 2))
    返回 (载入图片 (#黑车))
.判断 (等于 (棋数字, 3))
    返回 (载入图片 (#黑马))
.判断 (等于 (棋数字, 4))
    返回 (载入图片 (#黑炮))
.判断 (等于 (棋数字, 5))
    返回 (载入图片 (#黑士))
.判断 (等于 (棋数字, 6))
    返回 (载入图片 (#黑象))
.判断 (等于 (棋数字, 7))
    返回 (载入图片 (#黑兵))
.判断 (等于 (棋数字, 8))
    返回 (载入图片 (#红将))
.判断 (等于 (棋数字, 9))
    返回 (载入图片 (#红车))
.判断 (等于 (棋数字, 10))
    返回 (载入图片 (#红马))
.判断 (等于 (棋数字, 11))
    返回 (载入图片 (#红炮))
.判断 (等于 (棋数字, 12))
    返回 (载入图片 (#红士))
.判断 (等于 (棋数字, 13))
    返回 (载入图片 (#红象))
.判断 (等于 (棋数字, 14))
    返回 (载入图片 (#红兵))
.默认
    返回 (0)
.判断结束


.子程序 移动棋子, 空白型, , 
.参数 初始位置, 棋子点, , 
.参数 终位置, 棋子点, , 

.局部变量 图片号1, 整数型, , , 
.局部变量 图片号2, 整数型, , , 

赋值 (图片号1, 对应位图1 (棋盘数据 [初始位置].纵坐标 [初始位置].横坐标))
相乘 (相减 (终位置.横坐标, 1), 48).复制 (相乘 (相减 (终位置.纵坐标, 1), 48), 48, 48, , 0, 0, )
图片号1.画图片 (0, 0, 44, 44, 负 (取颜色值 (255, 255, 255)))
0.复制 (0, 44, 44, , 相乘 (相减 (终位置.横坐标, 1), 48), 相乘 (相减 (终位置.纵坐标, 1), 48), )
相乘 (相减 (初始位置.横坐标, 1), 48).复制 (相乘 (相减 (初始位置.纵坐标, 1), 48), 48, 48, , 相乘 (相减 (初始位置.横坐标, 1), 48), 相乘 (相减 (初始位置.纵坐标, 1), 48), )

.子程序 插入走法, 整数型, , 
.参数 初始棋子点, 棋子点, , 
.参数 最终棋子点, 棋子点, , 
.参数 层次, 短整数型, , 

赋值 (走法列表 [层次] [相加 (走法数量, 1)].起始位置.横坐标, 初始棋子点.横坐标)
赋值 (走法列表 [层次] [相加 (走法数量, 1)].起始位置.纵坐标, 初始棋子点.纵坐标)
赋值 (走法列表 [层次] [相加 (走法数量, 1)].终点位置.横坐标, 最终棋子点.横坐标)
赋值 (走法列表 [层次] [相加 (走法数量, 1)].终点位置.纵坐标, 最终棋子点.纵坐标)
赋值 (走法数量, 相加 (走法数量, 1))
返回 (走法数量)

.子程序 产生可能的走法, 整数型, , 创建所有走法,返回走法数量,用于搜索引擎
.参数 层次, 短整数型, , 
.参数 哪一方, 逻辑型, , TRUE 为红方，FALSE 是黑方
.参数 当前棋盘, 字节型, 数组, 

.局部变量 变量x, 整数型, , , 
.局部变量 变量y, 整数型, , , 
.局部变量 棋子序号, 短整数型, , , 
.局部变量 初始棋子点, 棋子点, , , 
.局部变量 逻辑变量, 逻辑型, , , 

赋值 (走法数量, 0)
.变量循环首 (1, 10, 1, 变量y)
    .变量循环首 (1, 9, 1, 变量x)
        赋值 (棋子序号, 当前棋盘 [变量y] [变量x])
        .如果真 (不等于 (棋子序号, 0))
            赋值 (初始棋子点.横坐标, 变量x)
            赋值 (初始棋子点.纵坐标, 变量y)
            赋值 (逻辑变量, 判断棋子颜色 (棋子序号))
            .如果真 (等于 (逻辑变量, 取反 (哪一方)))
                 ' 如要产生黑棋走法，跳过红棋
                到循环尾 ()
            .如果真结束
            .判断开始 (或者 (等于 (棋子序号, 1), 等于 (棋子序号, 8)))
                产生将的走法 (初始棋子点, 层次, 当前棋盘)
            .判断 (等于 (棋子序号, 12))
                产生红士的走法 (初始棋子点, 层次, 当前棋盘)
            .判断 (等于 (棋子序号, 5))
                产生黑士的走法 (初始棋子点, 层次, 当前棋盘)
            .判断 (或者 (等于 (棋子序号, 13), 等于 (棋子序号, 6)))
                产生象的走法 (初始棋子点, 层次, 当前棋盘)
            .判断 (或者 (等于 (棋子序号, 10), 等于 (棋子序号, 3)))
                产生马的走法 (初始棋子点, 层次, 当前棋盘)
            .判断 (或者 (等于 (棋子序号, 9), 等于 (棋子序号, 2)))
                产生车的走法 (初始棋子点, 层次, 当前棋盘)
            .判断 (等于 (棋子序号, 14))
                产生红兵的走法 (初始棋子点, 层次, 当前棋盘)
            .判断 (等于 (棋子序号, 7))
                产生黑兵的走法 (初始棋子点, 层次, 当前棋盘)
            .判断 (或者 (等于 (棋子序号, 4), 等于 (棋子序号, 11)))
                产生炮的走法 (初始棋子点, 层次, 当前棋盘)
            .默认
                
            .判断结束
            
        .如果真结束
        
    .变量循环尾 ()
.变量循环尾 ()
返回 (走法数量)

.子程序 棋局是否结束, 整数型, , 
.参数 深度, 短整数型, , 
.参数 当前棋盘, 字节型, 数组, 

.局部变量 红棋活着, 逻辑型, , , 
.局部变量 黑棋活着, 逻辑型, , , 
.局部变量 变量y, 整数型, , , 
.局部变量 变量x, 整数型, , , 
.局部变量 自由变量, 整数型, , , 

.变量循环首 (8, 10, 1, 变量y)
    .变量循环首 (4, 6, 1, 变量x)
        .如果真 (等于 (当前棋盘 [变量y] [变量x], 1))
            赋值 (黑棋活着, 真)
        .如果真结束
        .如果真 (等于 (当前棋盘 [变量y] [变量x], 8))
            赋值 (红棋活着, 真)
        .如果真结束
        
    .变量循环尾 ()
.变量循环尾 ()
.变量循环首 (1, 3, 1, 变量y)
    .变量循环首 (4, 6, 1, 变量x)
        .如果真 (等于 (当前棋盘 [变量y] [变量x], 1))
            赋值 (黑棋活着, 真)
        .如果真结束
        .如果真 (等于 (当前棋盘 [变量y] [变量x], 8))
            赋值 (红棋活着, 真)
        .如果真结束
        
    .变量循环尾 ()
.变量循环尾 ()
赋值 (自由变量, 求余数 (相加 (相减 (最大深度, 深度), 1), 2))
.如果真 (取反 (红棋活着))
    .如果 (等于 (自由变量, 1))
        返回 (相加 (19999, 深度))
    .否则
        返回 (相减 (-19999, 深度))
    .如果结束
    
.如果真结束
.如果真 (取反 (黑棋活着))
    .如果 (等于 (自由变量, 1))
        返回 (相减 (-19999, 深度))
    .否则
        返回 (相加 (19999, 深度))
    .如果结束
    
.如果真结束
返回 (0)

.子程序 产生将的走法, 空白型, , 
.参数 初始棋子点, 棋子点, , 
.参数 层数, 短整数型, , 
.参数 当前棋盘, 字节型, 数组, 

.局部变量 变量y, 整数型, , , 
.局部变量 变量x, 整数型, , , 
.局部变量 最终棋子点, 棋子点, , , 

.变量循环首 (1, 3, 1, 变量y)
    .变量循环首 (4, 6, 1, 变量x)
        赋值 (最终棋子点.横坐标, 变量x)
        赋值 (最终棋子点.纵坐标, 变量y)
        .如果真 (合法走法 (初始棋子点, 最终棋子点, 当前棋盘))
            插入走法 (初始棋子点, 最终棋子点, 层数)
        .如果真结束
        
    .变量循环尾 ()
.变量循环尾 ()
.变量循环首 (8, 10, 1, 变量y)
    .变量循环首 (4, 6, 1, 变量x)
        赋值 (最终棋子点.横坐标, 变量x)
        赋值 (最终棋子点.纵坐标, 变量y)
        .如果真 (合法走法 (初始棋子点, 最终棋子点, 当前棋盘))
            插入走法 (初始棋子点, 最终棋子点, 层数)
        .如果真结束
        
    .变量循环尾 ()
.变量循环尾 ()

.子程序 产生红士的走法, 空白型, , 
.参数 棋子位置, 棋子点, , 
.参数 层数, 短整数型, , 
.参数 当前棋盘, 字节型, 数组, 

.局部变量 变量1, 整数型, , , 
.局部变量 变量2, 整数型, , , 
.局部变量 棋子1, 棋子点, , , 

.变量循环首 (8, 10, 1, 变量1)
    .变量循环首 (4, 6, 1, 变量2)
        赋值 (棋子1.横坐标, 变量2)
        赋值 (棋子1.纵坐标, 变量1)
        .如果真 (合法走法 (棋子位置, 棋子1, 当前棋盘))
            插入走法 (棋子位置, 棋子1, 层数)
        .如果真结束
        
    .变量循环尾 ()
.变量循环尾 ()

.子程序 产生黑士的走法, 空白型, , 
.参数 棋子位置, 棋子点, , 
.参数 层数, 整数型, , 
.参数 当前棋盘, 字节型, 数组, 

.局部变量 变量1, 整数型, , , 
.局部变量 变量2, 整数型, , , 
.局部变量 棋子1, 棋子点, , , 

.变量循环首 (1, 3, 1, 变量1)
    .变量循环首 (4, 6, 1, 变量2)
        赋值 (棋子1.横坐标, 变量2)
        赋值 (棋子1.纵坐标, 变量1)
        .如果真 (合法走法 (棋子位置, 棋子1, 当前棋盘))
            插入走法 (棋子位置, 棋子1, 层数)
        .如果真结束
        
    .变量循环尾 ()
.变量循环尾 ()

.子程序 产生车的走法, 空白型, , CarMove
.参数 初始棋子点, 棋子点, , 
.参数 层数, 短整数型, , 
.参数 当前棋盘, 字节型, 数组, 

.局部变量 变量1, 短整数型, , , 
.局部变量 变量2, 短整数型, , , 
.局部变量 最终棋子点, 棋子点, , , 
.局部变量 逻辑变量, 逻辑型, , , 

赋值 (变量1, 相加 (初始棋子点.横坐标, 1))
赋值 (变量2, 初始棋子点.纵坐标)
.判断循环首 (小于 (变量1, 10))
    .如果 (等于 (当前棋盘 [变量2] [变量1], 0))
        赋值 (最终棋子点.横坐标, 变量1)
        赋值 (最终棋子点.纵坐标, 变量2)
        插入走法 (初始棋子点, 最终棋子点, 层数)
    .否则
        赋值 (逻辑变量, 判断两个棋子是否同色 (当前棋盘 [初始棋子点].纵坐标 [初始棋子点].横坐标, 当前棋盘 [变量2] [变量1]))
        .如果真 (取反 (逻辑变量))
            赋值 (最终棋子点.横坐标, 变量1)
            赋值 (最终棋子点.纵坐标, 变量2)
            插入走法 (初始棋子点, 最终棋子点, 层数)
        .如果真结束
        跳出循环 ()
    .如果结束
    赋值 (变量1, 相加 (变量1, 1))
.判断循环尾 ()
赋值 (变量1, 相减 (初始棋子点.横坐标, 1))
赋值 (变量2, 初始棋子点.纵坐标)
.判断循环首 (大于或等于 (变量1, 1))
    .如果 (等于 (当前棋盘 [变量2] [变量1], 0))
        赋值 (最终棋子点.横坐标, 变量1)
        赋值 (最终棋子点.纵坐标, 变量2)
        插入走法 (初始棋子点, 最终棋子点, 层数)
    .否则
        赋值 (逻辑变量, 判断两个棋子是否同色 (当前棋盘 [初始棋子点].纵坐标 [初始棋子点].横坐标, 当前棋盘 [变量2] [变量1]))
        .如果真 (取反 (逻辑变量))
            赋值 (最终棋子点.横坐标, 变量1)
            赋值 (最终棋子点.纵坐标, 变量2)
            插入走法 (初始棋子点, 最终棋子点, 层数)
        .如果真结束
        跳出循环 ()
    .如果结束
    赋值 (变量1, 相减 (变量1, 1))
.判断循环尾 ()
赋值 (变量1, 初始棋子点.横坐标)
赋值 (变量2, 相加 (初始棋子点.纵坐标, 1))
.判断循环首 (小于 (变量2, 11))
    .如果 (等于 (当前棋盘 [变量2] [变量1], 0))
        赋值 (最终棋子点.横坐标, 变量1)
        赋值 (最终棋子点.纵坐标, 变量2)
        插入走法 (初始棋子点, 最终棋子点, 层数)
    .否则
        赋值 (逻辑变量, 判断两个棋子是否同色 (当前棋盘 [初始棋子点].纵坐标 [初始棋子点].横坐标, 当前棋盘 [变量2] [变量1]))
        .如果真 (取反 (逻辑变量))
            赋值 (最终棋子点.横坐标, 变量1)
            赋值 (最终棋子点.纵坐标, 变量2)
            插入走法 (初始棋子点, 最终棋子点, 层数)
        .如果真结束
        跳出循环 ()
    .如果结束
    赋值 (变量2, 相加 (变量2, 1))
.判断循环尾 ()
赋值 (变量1, 初始棋子点.横坐标)
赋值 (变量2, 相减 (初始棋子点.纵坐标, 1))
.判断循环首 (大于或等于 (变量2, 1))
    .如果 (等于 (当前棋盘 [变量2] [变量1], 0))
        赋值 (最终棋子点.横坐标, 变量1)
        赋值 (最终棋子点.纵坐标, 变量2)
        插入走法 (初始棋子点, 最终棋子点, 层数)
    .否则
        赋值 (逻辑变量, 判断两个棋子是否同色 (当前棋盘 [初始棋子点].纵坐标 [初始棋子点].横坐标, 当前棋盘 [变量2] [变量1]))
        .如果真 (取反 (逻辑变量))
            赋值 (最终棋子点.横坐标, 变量1)
            赋值 (最终棋子点.纵坐标, 变量2)
            插入走法 (初始棋子点, 最终棋子点, 层数)
        .如果真结束
        跳出循环 ()
    .如果结束
    赋值 (变量2, 相减 (变量2, 1))
.判断循环尾 ()

.子程序 产生马的走法, 空白型, , 
.参数 初始棋子点, 棋子点, , 
.参数 层数, 短整数型, , 
.参数 当前棋盘, 字节型, 数组, 

.局部变量 变量1, 短整数型, , , 
.局部变量 变量2, 短整数型, , , 
.局部变量 最终棋子点, 棋子点, , , 

赋值 (变量1, 相加 (初始棋子点.横坐标, 2))
赋值 (变量2, 相加 (初始棋子点.纵坐标, 1))
赋值 (最终棋子点.横坐标, 变量1)
赋值 (最终棋子点.纵坐标, 变量2)
.如果真 (并且 (小于 (变量1, 10), 小于 (变量2, 11), 合法走法 (初始棋子点, 最终棋子点, 当前棋盘)))
    
    插入走法 (初始棋子点, 最终棋子点, 层数)
.如果真结束

赋值 (变量1, 相加 (初始棋子点.横坐标, 2))
赋值 (变量2, 相减 (初始棋子点.纵坐标, 1))
赋值 (最终棋子点.横坐标, 变量1)
赋值 (最终棋子点.纵坐标, 变量2)
.如果真 (并且 (小于 (变量1, 10), 大于或等于 (变量2, 1), 合法走法 (初始棋子点, 最终棋子点, 当前棋盘)))
    插入走法 (初始棋子点, 最终棋子点, 层数)
.如果真结束

赋值 (变量1, 相减 (初始棋子点.横坐标, 2))
赋值 (变量2, 相加 (初始棋子点.纵坐标, 1))
赋值 (最终棋子点.横坐标, 变量1)
赋值 (最终棋子点.纵坐标, 变量2)
.如果真 (并且 (大于或等于 (变量1, 1), 小于 (变量2, 11), 合法走法 (初始棋子点, 最终棋子点, 当前棋盘)))
    插入走法 (初始棋子点, 最终棋子点, 层数)
.如果真结束

赋值 (变量1, 相减 (初始棋子点.横坐标, 2))
赋值 (变量2, 相减 (初始棋子点.纵坐标, 1))
赋值 (最终棋子点.横坐标, 变量1)
赋值 (最终棋子点.纵坐标, 变量2)
.如果真 (并且 (大于或等于 (变量1, 1), 大于或等于 (变量2, 1), 合法走法 (初始棋子点, 最终棋子点, 当前棋盘)))
    插入走法 (初始棋子点, 最终棋子点, 层数)
.如果真结束

赋值 (变量1, 相加 (初始棋子点.横坐标, 1))
赋值 (变量2, 相加 (初始棋子点.纵坐标, 2))
赋值 (最终棋子点.横坐标, 变量1)
赋值 (最终棋子点.纵坐标, 变量2)
.如果真 (并且 (小于 (变量1, 10), 小于 (变量2, 11), 合法走法 (初始棋子点, 最终棋子点, 当前棋盘)))
    插入走法 (初始棋子点, 最终棋子点, 层数)
.如果真结束

赋值 (变量1, 相加 (初始棋子点.横坐标, 1))
赋值 (变量2, 相减 (初始棋子点.纵坐标, 2))
赋值 (最终棋子点.横坐标, 变量1)
赋值 (最终棋子点.纵坐标, 变量2)
.如果真 (并且 (小于 (变量1, 10), 大于或等于 (变量2, 1), 合法走法 (初始棋子点, 最终棋子点, 当前棋盘)))
    插入走法 (初始棋子点, 最终棋子点, 层数)
.如果真结束

赋值 (变量1, 相减 (初始棋子点.横坐标, 1))
赋值 (变量2, 相加 (初始棋子点.纵坐标, 2))
赋值 (最终棋子点.横坐标, 变量1)
赋值 (最终棋子点.纵坐标, 变量2)
.如果真 (并且 (大于或等于 (变量1, 1), 小于 (变量2, 11), 合法走法 (初始棋子点, 最终棋子点, 当前棋盘)))
    插入走法 (初始棋子点, 最终棋子点, 层数)
.如果真结束

赋值 (变量1, 相减 (初始棋子点.横坐标, 1))
赋值 (变量2, 相减 (初始棋子点.纵坐标, 2))
赋值 (最终棋子点.横坐标, 变量1)
赋值 (最终棋子点.纵坐标, 变量2)
.如果真 (并且 (大于或等于 (变量1, 1), 大于或等于 (变量2, 1), 合法走法 (初始棋子点, 最终棋子点, 当前棋盘)))
    插入走法 (初始棋子点, 最终棋子点, 层数)
.如果真结束


.子程序 产生炮的走法, 空白型, , 
.参数 初始棋子点, 棋子点, , 
.参数 层数, 短整数型, , 
.参数 当前棋盘, 字节型, 数组, 

.局部变量 变量1, 短整数型, , , 
.局部变量 变量2, 短整数型, , , 
.局部变量 最终棋子点, 棋子点, , , 
.局部变量 隔子, 逻辑型, , , 
.局部变量 逻辑变量, 逻辑型, , , 

赋值 (隔子, 假)
赋值 (变量1, 相加 (初始棋子点.横坐标, 1))
赋值 (变量2, 初始棋子点.纵坐标)
.判断循环首 (小于 (变量1, 10))
    .如果 (等于 (当前棋盘 [变量2] [变量1], 0))
        .如果真 (等于 (隔子, 假))
            赋值 (最终棋子点.横坐标, 变量1)
            赋值 (最终棋子点.纵坐标, 变量2)
            插入走法 (初始棋子点, 最终棋子点, 层数)
        .如果真结束
        
    .否则
        .如果 (等于 (隔子, 假))
            赋值 (隔子, 真)
        .否则
            赋值 (逻辑变量, 判断两个棋子是否同色 (当前棋盘 [初始棋子点].纵坐标 [初始棋子点].横坐标, 当前棋盘 [变量2] [变量1]))
            .如果真 (取反 (逻辑变量))
                赋值 (最终棋子点.横坐标, 变量1)
                赋值 (最终棋子点.纵坐标, 变量2)
                插入走法 (初始棋子点, 最终棋子点, 层数)
            .如果真结束
            跳出循环 ()
        .如果结束
        
    .如果结束
    赋值 (变量1, 相加 (变量1, 1))
.判断循环尾 ()
赋值 (变量1, 相减 (初始棋子点.横坐标, 1))
赋值 (隔子, 假)
.判断循环首 (大于或等于 (变量1, 1))
    .如果 (等于 (当前棋盘 [变量2] [变量1], 0))
        .如果真 (等于 (隔子, 假))
            赋值 (最终棋子点.横坐标, 变量1)
            赋值 (最终棋子点.纵坐标, 变量2)
            插入走法 (初始棋子点, 最终棋子点, 层数)
        .如果真结束
        
    .否则
        .如果 (等于 (隔子, 假))
            赋值 (隔子, 真)
        .否则
            赋值 (逻辑变量, 判断两个棋子是否同色 (当前棋盘 [初始棋子点].纵坐标 [初始棋子点].横坐标, 当前棋盘 [变量2] [变量1]))
            .如果真 (取反 (逻辑变量))
                赋值 (最终棋子点.横坐标, 变量1)
                赋值 (最终棋子点.纵坐标, 变量2)
                插入走法 (初始棋子点, 最终棋子点, 层数)
            .如果真结束
            跳出循环 ()
        .如果结束
        
    .如果结束
    赋值 (变量1, 相减 (变量1, 1))
.判断循环尾 ()
赋值 (变量1, 初始棋子点.横坐标)
赋值 (变量2, 相加 (初始棋子点.纵坐标, 1))
赋值 (隔子, 假)
.判断循环首 (小于 (变量2, 11))
    .如果 (等于 (当前棋盘 [变量2] [变量1], 0))
        .如果真 (等于 (隔子, 假))
            赋值 (最终棋子点.横坐标, 变量1)
            赋值 (最终棋子点.纵坐标, 变量2)
            插入走法 (初始棋子点, 最终棋子点, 层数)
        .如果真结束
        
    .否则
        .如果 (等于 (隔子, 假))
            赋值 (隔子, 真)
        .否则
            赋值 (逻辑变量, 判断两个棋子是否同色 (当前棋盘 [初始棋子点].纵坐标 [初始棋子点].横坐标, 当前棋盘 [变量2] [变量1]))
            .如果真 (取反 (逻辑变量))
                赋值 (最终棋子点.横坐标, 变量1)
                赋值 (最终棋子点.纵坐标, 变量2)
                插入走法 (初始棋子点, 最终棋子点, 层数)
            .如果真结束
            跳出循环 ()
        .如果结束
        
    .如果结束
    赋值 (变量2, 相加 (变量2, 1))
.判断循环尾 ()
赋值 (变量2, 相减 (初始棋子点.纵坐标, 1))
赋值 (隔子, 假)
.判断循环首 (大于或等于 (变量2, 1))
    .如果 (等于 (当前棋盘 [变量2] [变量1], 0))
        .如果真 (等于 (隔子, 假))
            赋值 (最终棋子点.横坐标, 变量1)
            赋值 (最终棋子点.纵坐标, 变量2)
            插入走法 (初始棋子点, 最终棋子点, 层数)
        .如果真结束
        
    .否则
        .如果 (等于 (隔子, 假))
            赋值 (隔子, 真)
        .否则
            赋值 (逻辑变量, 判断两个棋子是否同色 (当前棋盘 [初始棋子点].纵坐标 [初始棋子点].横坐标, 当前棋盘 [变量2] [变量1]))
            .如果真 (取反 (逻辑变量))
                赋值 (最终棋子点.横坐标, 变量1)
                赋值 (最终棋子点.纵坐标, 变量2)
                插入走法 (初始棋子点, 最终棋子点, 层数)
            .如果真结束
            跳出循环 ()
        .如果结束
        
    .如果结束
    赋值 (变量2, 相减 (变量2, 1))
.判断循环尾 ()


.子程序 产生象的走法, 空白型, , 
.参数 初始棋子点, 棋子点, , 
.参数 层数, 短整数型, , 
.参数 当前棋盘, 字节型, 数组, 

.局部变量 变量1, 短整数型, , , 
.局部变量 变量2, 短整数型, , , 
.局部变量 最终棋子点, 棋子点, , , 

赋值 (变量1, 相加 (初始棋子点.横坐标, 2))
赋值 (变量2, 相加 (初始棋子点.纵坐标, 2))
赋值 (最终棋子点.横坐标, 变量1)
赋值 (最终棋子点.纵坐标, 变量2)
.如果真 (并且 (小于 (变量1, 10), 小于 (变量2, 11), 合法走法 (初始棋子点, 最终棋子点, 当前棋盘)))
    插入走法 (初始棋子点, 最终棋子点, 层数)
.如果真结束

赋值 (变量1, 相加 (初始棋子点.横坐标, 2))
赋值 (变量2, 相减 (初始棋子点.纵坐标, 2))
赋值 (最终棋子点.横坐标, 变量1)
赋值 (最终棋子点.纵坐标, 变量2)
.如果真 (并且 (小于 (变量1, 10), 大于或等于 (变量2, 1), 合法走法 (初始棋子点, 最终棋子点, 当前棋盘)))
    插入走法 (初始棋子点, 最终棋子点, 层数)
.如果真结束

赋值 (变量1, 相减 (初始棋子点.横坐标, 2))
赋值 (变量2, 相加 (初始棋子点.纵坐标, 2))
赋值 (最终棋子点.横坐标, 变量1)
赋值 (最终棋子点.纵坐标, 变量2)
.如果真 (并且 (大于或等于 (变量1, 1), 小于 (变量2, 11), 合法走法 (初始棋子点, 最终棋子点, 当前棋盘)))
    插入走法 (初始棋子点, 最终棋子点, 层数)
.如果真结束

赋值 (变量1, 相减 (初始棋子点.横坐标, 2))
赋值 (变量2, 相减 (初始棋子点.纵坐标, 2))
赋值 (最终棋子点.横坐标, 变量1)
赋值 (最终棋子点.纵坐标, 变量2)
.如果真 (并且 (大于或等于 (变量1, 1), 大于或等于 (变量2, 1), 合法走法 (初始棋子点, 最终棋子点, 当前棋盘)))
    插入走法 (初始棋子点, 最终棋子点, 层数)
.如果真结束


.子程序 产生红兵的走法, 空白型, , 
.参数 初始棋子点, 棋子点, , 
.参数 层数, 短整数型, , 
.参数 当前棋盘, 字节型, 数组, 

.局部变量 变量1, 短整数型, , , 
.局部变量 变量2, 短整数型, , , 
.局部变量 最终棋子点, 棋子点, , , 

赋值 (变量1, 初始棋子点.横坐标)
赋值 (变量2, 相减 (初始棋子点.纵坐标, 1))
赋值 (最终棋子点.横坐标, 变量1)
赋值 (最终棋子点.纵坐标, 变量2)
.如果真 (并且 (大于 (变量2, 0), 等于 (当前棋盘 [变量2] [变量1], 0)))
    插入走法 (初始棋子点, 最终棋子点, 层数)
.如果真结束
.如果真 (并且 (大于 (变量2, 0), 等于 (判断两个棋子是否同色 (当前棋盘 [初始棋子点].纵坐标 [初始棋子点].横坐标, 当前棋盘 [变量2] [变量1]), 假), 不等于 (当前棋盘 [变量2] [变量1], 0)))
    插入走法 (初始棋子点, 最终棋子点, 层数)
.如果真结束
.如果真 (小于 (初始棋子点.纵坐标, 6))
    赋值 (变量2, 初始棋子点.纵坐标)
    赋值 (变量1, 相加 (初始棋子点.横坐标, 1))
    赋值 (最终棋子点.横坐标, 变量1)
    赋值 (最终棋子点.纵坐标, 变量2)
    .如果真 (并且 (小于 (变量1, 10), 等于 (当前棋盘 [变量2] [变量1], 0)))
        插入走法 (初始棋子点, 最终棋子点, 层数)
    .如果真结束
    .如果真 (并且 (小于 (变量1, 10), 等于 (判断两个棋子是否同色 (当前棋盘 [初始棋子点].纵坐标 [初始棋子点].横坐标, 当前棋盘 [变量2] [变量1]), 假), 不等于 (当前棋盘 [变量2] [变量1], 0)))
        插入走法 (初始棋子点, 最终棋子点, 层数)
    .如果真结束
    赋值 (变量1, 相减 (初始棋子点.横坐标, 1))
    赋值 (最终棋子点.横坐标, 变量1)
    赋值 (最终棋子点.纵坐标, 变量2)
    .如果真 (并且 (大于或等于 (变量1, 1), 等于 (当前棋盘 [变量2] [变量1], 0)))
        插入走法 (初始棋子点, 最终棋子点, 层数)
    .如果真结束
    .如果真 (并且 (大于或等于 (变量1, 1), 等于 (判断两个棋子是否同色 (当前棋盘 [初始棋子点].纵坐标 [初始棋子点].横坐标, 当前棋盘 [变量2] [变量1]), 假), 不等于 (当前棋盘 [变量2] [变量1], 0)))
        插入走法 (初始棋子点, 最终棋子点, 层数)
    .如果真结束
    
.如果真结束


.子程序 产生黑兵的走法, 空白型, , 
.参数 初始棋子点, 棋子点, , 
.参数 层数, 短整数型, , 
.参数 当前棋盘, 字节型, 数组, 

.局部变量 变量1, 短整数型, , , 
.局部变量 变量2, 短整数型, , , 
.局部变量 最终棋子点, 棋子点, , , 

赋值 (变量1, 初始棋子点.横坐标)
赋值 (变量2, 相加 (初始棋子点.纵坐标, 1))
赋值 (最终棋子点.横坐标, 变量1)
赋值 (最终棋子点.纵坐标, 变量2)
.如果真 (并且 (小于 (变量2, 11), 等于 (当前棋盘 [变量2] [变量1], 0)))
    插入走法 (初始棋子点, 最终棋子点, 层数)
.如果真结束
.如果真 (并且 (小于 (变量2, 11), 等于 (判断两个棋子是否同色 (当前棋盘 [初始棋子点].纵坐标 [初始棋子点].横坐标, 当前棋盘 [变量2] [变量1]), 假), 不等于 (当前棋盘 [变量2] [变量1], 0)))
    插入走法 (初始棋子点, 最终棋子点, 层数)
.如果真结束
.如果真 (大于 (初始棋子点.纵坐标, 5))
    赋值 (变量2, 初始棋子点.纵坐标)
    赋值 (变量1, 相加 (初始棋子点.横坐标, 1))
    赋值 (最终棋子点.横坐标, 变量1)
    赋值 (最终棋子点.纵坐标, 变量2)
    .如果真 (并且 (小于 (变量1, 10), 等于 (当前棋盘 [变量2] [变量1], 0)))
        插入走法 (初始棋子点, 最终棋子点, 层数)
    .如果真结束
    .如果真 (并且 (小于 (变量1, 10), 等于 (判断两个棋子是否同色 (当前棋盘 [初始棋子点].纵坐标 [初始棋子点].横坐标, 当前棋盘 [变量2] [变量1]), 假), 不等于 (当前棋盘 [变量2] [变量1], 0)))
        插入走法 (初始棋子点, 最终棋子点, 层数)
    .如果真结束
    赋值 (变量1, 相减 (初始棋子点.横坐标, 1))
    赋值 (最终棋子点.横坐标, 变量1)
    赋值 (最终棋子点.纵坐标, 变量2)
    .如果真 (并且 (大于或等于 (变量1, 1), 等于 (当前棋盘 [变量2] [变量1], 0)))
        插入走法 (初始棋子点, 最终棋子点, 层数)
    .如果真结束
    .如果真 (并且 (大于或等于 (变量1, 1), 等于 (判断两个棋子是否同色 (当前棋盘 [初始棋子点].纵坐标 [初始棋子点].横坐标, 当前棋盘 [变量2] [变量1]), 假), 不等于 (当前棋盘 [变量2] [变量1], 0)))
        插入走法 (初始棋子点, 最终棋子点, 层数)
    .如果真结束
    
.如果真结束


.子程序 估值函数, 整数型, , 
.参数 谁走, 逻辑型, , 真为红，假为黑
.参数 当前棋盘, 字节型, 数组, 

.局部变量 棋子灵活性, 整数型, , "10,9", 
.局部变量 被威胁, 整数型, , "10,9", 
.局部变量 被保护, 整数型, , "10,9", 
.局部变量 棋子价值, 整数型, , "10,9", 
.局部变量 变量y, 整数型, , , 
.局部变量 变量x, 整数型, , , 
.局部变量 自由变量, 整数型, , , 
.局部变量 威胁保护增量, 整数型, , , 
.局部变量 黑棋总价值, 整数型, , , 
.局部变量 红棋总价值, 整数型, , , 
.局部变量 棋子, 短整数型, , , 

.变量循环首 (1, 10, 1, 变量y)
    .变量循环首 (1, 9, 1, 变量x)
        赋值 (棋子, 当前棋盘 [变量y] [变量x])
        .如果真 (不等于 (棋子, 0))
            所有相关位置 (变量y, 变量x, 当前棋盘)
            .变量循环首 (1, 相关位置数, 1, 自由变量)
                .如果 (等于 (当前棋盘 [相关位置] [自由变量], 纵坐标 [相关位置] [自由变量], 横坐标, 0)) ' 如果是空白，灵活性增加
                    赋值 (棋子灵活性 [变量y] [变量x], 相加 (棋子灵活性 [变量y] [变量x], 1))
                .否则
                    .如果 (判断两个棋子是否同色 (当前棋盘 [相关位置] [自由变量], 纵坐标 [相关位置] [自由变量], 横坐标, 棋子))
                        赋值 (被保护 [相关位置] [自由变量], 纵坐标 [相关位置] [自由变量], 横坐标, 相加 (被保护 [相关位置] [自由变量], 纵坐标 [相关位置] [自由变量], 横坐标, 1)) ' 己方棋子，目标受保护
                    .否则
                        赋值 (被威胁 [相关位置] [自由变量], 纵坐标 [相关位置] [自由变量], 横坐标, 相加 (被威胁 [相关位置] [自由变量], 纵坐标 [相关位置] [自由变量], 横坐标, 1)) ' 敌方棋子，目标受威胁
                        赋值 (棋子灵活性 [变量y] [变量x], 相加 (棋子灵活性 [变量y] [变量x], 1))
                        .判断开始 (等于 (当前棋盘 [相关位置] [自由变量], 纵坐标 [相关位置] [自由变量], 横坐标, 8))
                            .如果真 (等于 (谁走, 假))
                                返回 (18888)
                            .如果真结束
                            
                        .判断 (等于 (当前棋盘 [相关位置] [自由变量], 纵坐标 [相关位置] [自由变量], 横坐标, 1))
                            .如果真 (等于 (谁走, 真))
                                返回 (18888)
                            .如果真结束
                            
                        .默认
                            赋值 (被威胁 [相关位置] [自由变量], 纵坐标 [相关位置] [自由变量], 横坐标, 相加 (被威胁 [相关位置] [自由变量], 纵坐标 [相关位置] [自由变量], 横坐标, 相除 (相加 (30, 相除 (相减 (棋子基本价值 [当前棋盘] [相关位置] [自由变量], 纵坐标 [相关位置] [自由变量], 横坐标, 棋子基本价值 [棋子]), 10)), 10))) ' 根据威胁的棋子加上威胁分值
                        .判断结束
                        
                    .如果结束
                    
                .如果结束
                
            .变量循环尾 ()
        .如果真结束
        
    .变量循环尾 ()
.变量循环尾 ()
.变量循环首 (1, 10, 1, 变量y)
    .变量循环首 (1, 9, 1, 变量x)
        赋值 (棋子, 当前棋盘 [变量y] [变量x])
        .如果真 (不等于 (棋子, 0))
            赋值 (棋子价值 [变量y] [变量x], 相加 (棋子价值 [变量y] [变量x], 1))
            赋值 (棋子价值 [变量y] [变量x], 相加 (棋子价值 [变量y] [变量x], 相乘 (棋子灵活性价值 [棋子], 棋子灵活性 [变量y] [变量x])))
            .判断开始 (等于 (棋子, 14))
                赋值 (棋子价值 [变量y] [变量x], 相加 (棋子基本价值 [棋子], 红卒的附加值 [变量y] [变量x]))
            .判断 (等于 (棋子, 7))
                赋值 (棋子价值 [变量y] [变量x], 相加 (棋子基本价值 [棋子], 黑兵的附加值 [变量y] [变量x]))
            .默认
                
            .判断结束
            
        .如果真结束
        
    .变量循环尾 ()
.变量循环尾 ()
.变量循环首 (1, 10, 1, 变量y)
    .变量循环首 (1, 9, 1, 变量x)
        赋值 (棋子, 当前棋盘 [变量y] [变量x])
        .如果真 (不等于 (棋子, 0))
            赋值 (威胁保护增量, 相除 (棋子基本价值 [棋子], 16))
            赋值 (棋子价值 [变量y] [变量x], 相加 (棋子价值 [变量y] [变量x], 棋子基本价值 [棋子]))
            .如果 (判断棋子颜色 (棋子))
                .如果 (不等于 (被威胁 [变量y] [变量x], 0))
                    .如果 (等于 (谁走, 真))
                        .如果 (等于 (棋子, 8))
                            赋值 (棋子价值 [变量y] [变量x], 相减 (棋子价值 [变量y] [变量x], 20))
                        .否则
                            赋值 (棋子价值 [变量y] [变量x], 相减 (棋子价值 [变量y] [变量x], 相乘 (2, 威胁保护增量)))
                            .如果真 (不等于 (被保护 [变量y] [变量x], 0))
                                赋值 (棋子价值 [变量y] [变量x], 相加 (棋子价值 [变量y] [变量x], 威胁保护增量))
                            .如果真结束
                            
                        .如果结束
                        
                    .否则
                        .如果真 (等于 (棋子, 8))
                            返回 (18888)
                        .如果真结束
                        赋值 (棋子价值 [变量y] [变量x], 相减 (棋子价值 [变量y] [变量x], 相乘 (10, 威胁保护增量)))
                        .如果真 (不等于 (被保护 [变量y] [变量x], 0))
                            赋值 (棋子价值 [变量y] [变量x], 相加 (棋子价值 [变量y] [变量x], 相乘 (9, 威胁保护增量)))
                        .如果真结束
                        
                    .如果结束
                    赋值 (棋子价值 [变量y] [变量x], 相减 (棋子价值 [变量y] [变量x], 被威胁 [变量y] [变量x]))
                .否则
                    .如果真 (不等于 (被保护 [变量y] [变量x], 0))
                        赋值 (棋子价值 [变量y] [变量x], 相加 (棋子价值 [变量y] [变量x], 5))
                    .如果真结束
                    
                .如果结束
                
            .否则
                .如果 (不等于 (被威胁 [变量y] [变量x], 0))
                    .如果 (等于 (谁走, 假))
                        .如果 (等于 (棋子, 1))
                            赋值 (棋子价值 [变量y] [变量x], 相减 (棋子价值 [变量y] [变量x], 20))
                        .否则
                            赋值 (棋子价值 [变量y] [变量x], 相减 (棋子价值 [变量y] [变量x], 相乘 (2, 威胁保护增量)))
                            .如果真 (不等于 (被保护 [变量y] [变量x], 0))
                                赋值 (棋子价值 [变量y] [变量x], 相加 (棋子价值 [变量y] [变量x], 威胁保护增量))
                            .如果真结束
                            
                        .如果结束
                        
                    .否则
                        .如果真 (等于 (棋子, 1))
                            返回 (18888)
                        .如果真结束
                        赋值 (棋子价值 [变量y] [变量x], 相减 (棋子价值 [变量y] [变量x], 相乘 (10, 威胁保护增量)))
                        .如果真 (不等于 (被保护 [变量y] [变量x], 0))
                            赋值 (棋子价值 [变量y] [变量x], 相加 (棋子价值 [变量y] [变量x], 相乘 (9, 威胁保护增量)))
                        .如果真结束
                        
                    .如果结束
                    赋值 (棋子价值 [变量y] [变量x], 相减 (棋子价值 [变量y] [变量x], 被威胁 [变量y] [变量x]))
                .否则
                    .如果真 (不等于 (被保护 [变量y] [变量x], 0))
                        赋值 (棋子价值 [变量y] [变量x], 相加 (棋子价值 [变量y] [变量x], 5))
                    .如果真结束
                    
                .如果结束
                
            .如果结束
            
        .如果真结束
        
    .变量循环尾 ()
.变量循环尾 ()
.变量循环首 (1, 10, 1, 变量y)
    .变量循环首 (1, 9, 1, 变量x)
        赋值 (棋子, 当前棋盘 [变量y] [变量x])
        .如果真 (不等于 (棋子, 0))
            .如果 (等于 (判断棋子颜色 (棋子), 真))
                赋值 (红棋总价值, 相加 (红棋总价值, 棋子价值 [变量y] [变量x]))
            .否则
                赋值 (黑棋总价值, 相加 (黑棋总价值, 棋子价值 [变量y] [变量x]))
            .如果结束
            
        .如果真结束
        
    .变量循环尾 ()
.变量循环尾 ()
.如果 (等于 (谁走, 真))
    返回 (相减 (红棋总价值, 黑棋总价值))
.否则
    返回 (相减 (黑棋总价值, 红棋总价值))
.如果结束


.子程序 所有相关位置, 整数型, , 
.参数 变量y, 整数型, , 
.参数 变量x, 整数型, , 
.参数 当前棋盘, 字节型, 数组, 

.局部变量 变量1, 整数型, , , x坐标
.局部变量 变量2, 整数型, , , y坐标
.局部变量 初始棋子点, 棋子点, , , 
.局部变量 最终棋子点, 棋子点, , , 
.局部变量 隔子, 逻辑型, , , 

赋值 (相关位置数, 0)
赋值 (初始棋子点.横坐标, 变量x)
赋值 (初始棋子点.纵坐标, 变量y)
.判断开始 (或者 (等于 (当前棋盘 [初始棋子点].纵坐标 [初始棋子点].横坐标, 8), 等于 (当前棋盘 [初始棋子点].纵坐标 [初始棋子点].横坐标, 1)))
    .变量循环首 (1, 3, 1, 变量2)
        .变量循环首 (4, 6, 1, 变量1)
            赋值 (最终棋子点.横坐标, 变量1)
            赋值 (最终棋子点.纵坐标, 变量2)
            .如果真 (能否走到位置 (初始棋子点, 最终棋子点, 当前棋盘))
                插入相关位置 (最终棋子点)
            .如果真结束
            
        .变量循环尾 ()
    .变量循环尾 ()
    .变量循环首 (8, 10, 1, 变量2)
        .变量循环首 (4, 6, 1, 变量1)
            赋值 (最终棋子点.横坐标, 变量1)
            赋值 (最终棋子点.纵坐标, 变量2)
            .如果真 (能否走到位置 (初始棋子点, 最终棋子点, 当前棋盘))
                插入相关位置 (最终棋子点)
            .如果真结束
            
        .变量循环尾 ()
    .变量循环尾 ()
.判断 (等于 (当前棋盘 [初始棋子点].纵坐标 [初始棋子点].横坐标, 12))
    .变量循环首 (8, 10, 1, 变量2)
        .变量循环首 (4, 6, 1, 变量1)
            赋值 (最终棋子点.横坐标, 变量1)
            赋值 (最终棋子点.纵坐标, 变量2)
            .如果真 (能否走到位置 (初始棋子点, 最终棋子点, 当前棋盘))
                插入相关位置 (最终棋子点)
            .如果真结束
            
        .变量循环尾 ()
    .变量循环尾 ()
.判断 (等于 (当前棋盘 [初始棋子点].纵坐标 [初始棋子点].横坐标, 5))
    .变量循环首 (1, 3, 1, 变量2)
        .变量循环首 (4, 6, 1, 变量1)
            赋值 (最终棋子点.横坐标, 变量1)
            赋值 (最终棋子点.纵坐标, 变量2)
            .如果真 (能否走到位置 (初始棋子点, 最终棋子点, 当前棋盘))
                插入相关位置 (最终棋子点)
            .如果真结束
            
        .变量循环尾 ()
    .变量循环尾 ()
.判断 (或者 (等于 (当前棋盘 [初始棋子点].纵坐标 [初始棋子点].横坐标, 13), 等于 (当前棋盘 [初始棋子点].纵坐标 [初始棋子点].横坐标, 6)))
    赋值 (变量1, 相加 (初始棋子点.横坐标, 2))
    赋值 (变量2, 相加 (初始棋子点.纵坐标, 2))
    赋值 (最终棋子点.横坐标, 变量1)
    赋值 (最终棋子点.纵坐标, 变量2)
    .如果真 (并且 (小于 (变量1, 10), 小于 (变量2, 11), 能否走到位置 (初始棋子点, 最终棋子点, 当前棋盘)))
        插入相关位置 (最终棋子点)
    .如果真结束
    赋值 (变量1, 相加 (初始棋子点.横坐标, 2))
    赋值 (变量2, 相减 (初始棋子点.纵坐标, 2))
    赋值 (最终棋子点.横坐标, 变量1)
    赋值 (最终棋子点.纵坐标, 变量2)
    .如果真 (并且 (小于 (变量1, 10), 大于或等于 (变量2, 1), 能否走到位置 (初始棋子点, 最终棋子点, 当前棋盘)))
        插入相关位置 (最终棋子点)
    .如果真结束
    赋值 (变量1, 相减 (初始棋子点.横坐标, 2))
    赋值 (变量2, 相加 (初始棋子点.纵坐标, 2))
    赋值 (最终棋子点.横坐标, 变量1)
    赋值 (最终棋子点.纵坐标, 变量2)
    .如果真 (并且 (大于或等于 (变量1, 1), 小于 (变量2, 11), 能否走到位置 (初始棋子点, 最终棋子点, 当前棋盘)))
        插入相关位置 (最终棋子点)
    .如果真结束
    赋值 (变量1, 相减 (初始棋子点.横坐标, 2))
    赋值 (变量2, 相减 (初始棋子点.纵坐标, 2))
    赋值 (最终棋子点.横坐标, 变量1)
    赋值 (最终棋子点.纵坐标, 变量2)
    .如果真 (并且 (大于或等于 (变量1, 1), 大于或等于 (变量2, 1), 能否走到位置 (初始棋子点, 最终棋子点, 当前棋盘)))
        插入相关位置 (最终棋子点)
    .如果真结束
    
.判断 (或者 (等于 (当前棋盘 [初始棋子点].纵坐标 [初始棋子点].横坐标, 3), 等于 (当前棋盘 [初始棋子点].纵坐标 [初始棋子点].横坐标, 10)))
    赋值 (变量1, 相加 (初始棋子点.横坐标, 2))
    赋值 (变量2, 相加 (初始棋子点.纵坐标, 1))
    赋值 (最终棋子点.横坐标, 变量1)
    赋值 (最终棋子点.纵坐标, 变量2)
    .如果真 (并且 (小于 (变量1, 10), 小于 (变量2, 11), 能否走到位置 (初始棋子点, 最终棋子点, 当前棋盘)))
        插入相关位置 (最终棋子点)
    .如果真结束
    赋值 (变量1, 相加 (初始棋子点.横坐标, 2))
    赋值 (变量2, 相减 (初始棋子点.纵坐标, 1))
    赋值 (最终棋子点.横坐标, 变量1)
    赋值 (最终棋子点.纵坐标, 变量2)
    .如果真 (并且 (小于 (变量1, 10), 大于或等于 (变量2, 1), 能否走到位置 (初始棋子点, 最终棋子点, 当前棋盘)))
        插入相关位置 (最终棋子点)
    .如果真结束
    赋值 (变量1, 相减 (初始棋子点.横坐标, 2))
    赋值 (变量2, 相加 (初始棋子点.纵坐标, 1))
    赋值 (最终棋子点.横坐标, 变量1)
    赋值 (最终棋子点.纵坐标, 变量2)
    .如果真 (并且 (大于或等于 (变量1, 1), 小于 (变量2, 11), 能否走到位置 (初始棋子点, 最终棋子点, 当前棋盘)))
        插入相关位置 (最终棋子点)
    .如果真结束
    赋值 (变量1, 相减 (初始棋子点.横坐标, 2))
    赋值 (变量2, 相减 (初始棋子点.纵坐标, 1))
    赋值 (最终棋子点.横坐标, 变量1)
    赋值 (最终棋子点.纵坐标, 变量2)
    .如果真 (并且 (大于或等于 (变量1, 1), 大于或等于 (变量2, 1), 能否走到位置 (初始棋子点, 最终棋子点, 当前棋盘)))
        插入相关位置 (最终棋子点)
    .如果真结束
    赋值 (变量1, 相加 (初始棋子点.横坐标, 1))
    赋值 (变量2, 相加 (初始棋子点.纵坐标, 2))
    赋值 (最终棋子点.横坐标, 变量1)
    赋值 (最终棋子点.纵坐标, 变量2)
    .如果真 (并且 (小于 (变量1, 10), 小于 (变量2, 11), 能否走到位置 (初始棋子点, 最终棋子点, 当前棋盘)))
        插入相关位置 (最终棋子点)
    .如果真结束
    赋值 (变量1, 相加 (初始棋子点.横坐标, 1))
    赋值 (变量2, 相减 (初始棋子点.纵坐标, 2))
    赋值 (最终棋子点.横坐标, 变量1)
    赋值 (最终棋子点.纵坐标, 变量2)
    .如果真 (并且 (小于 (变量1, 10), 大于或等于 (变量2, 1), 能否走到位置 (初始棋子点, 最终棋子点, 当前棋盘)))
        插入相关位置 (最终棋子点)
    .如果真结束
    赋值 (变量1, 相减 (初始棋子点.横坐标, 1))
    赋值 (变量2, 相加 (初始棋子点.纵坐标, 2))
    赋值 (最终棋子点.横坐标, 变量1)
    赋值 (最终棋子点.纵坐标, 变量2)
    .如果真 (并且 (大于或等于 (变量1, 1), 小于 (变量2, 11), 能否走到位置 (初始棋子点, 最终棋子点, 当前棋盘)))
        插入相关位置 (最终棋子点)
    .如果真结束
    赋值 (变量1, 相减 (初始棋子点.横坐标, 1))
    赋值 (变量2, 相减 (初始棋子点.纵坐标, 2))
    赋值 (最终棋子点.横坐标, 变量1)
    赋值 (最终棋子点.纵坐标, 变量2)
    .如果真 (并且 (大于或等于 (变量1, 1), 大于或等于 (变量2, 1), 能否走到位置 (初始棋子点, 最终棋子点, 当前棋盘)))
        插入相关位置 (最终棋子点)
    .如果真结束
    
.判断 (或者 (等于 (当前棋盘 [初始棋子点].纵坐标 [初始棋子点].横坐标, 2), 等于 (当前棋盘 [初始棋子点].纵坐标 [初始棋子点].横坐标, 9)))
    赋值 (变量1, 相加 (初始棋子点.横坐标, 1))
    赋值 (变量2, 初始棋子点.纵坐标)
    .判断循环首 (小于 (变量1, 10))
        .如果 (等于 (当前棋盘 [变量2] [变量1], 0))
            赋值 (最终棋子点.横坐标, 变量1)
            赋值 (最终棋子点.纵坐标, 变量2)
            插入相关位置 (最终棋子点)
        .否则
            赋值 (最终棋子点.横坐标, 变量1)
            赋值 (最终棋子点.纵坐标, 变量2)
            插入相关位置 (最终棋子点)
            跳出循环 ()
        .如果结束
        赋值 (变量1, 相加 (变量1, 1))
    .判断循环尾 ()
    赋值 (变量1, 相减 (初始棋子点.横坐标, 1))
    赋值 (变量2, 初始棋子点.纵坐标)
    .判断循环首 (大于或等于 (变量1, 1))
        .如果 (等于 (当前棋盘 [变量2] [变量1], 0))
            赋值 (最终棋子点.横坐标, 变量1)
            赋值 (最终棋子点.纵坐标, 变量2)
            插入相关位置 (最终棋子点)
        .否则
            赋值 (最终棋子点.横坐标, 变量1)
            赋值 (最终棋子点.纵坐标, 变量2)
            插入相关位置 (最终棋子点)
            跳出循环 ()
        .如果结束
        赋值 (变量1, 相减 (变量1, 1))
    .判断循环尾 ()
    赋值 (变量1, 初始棋子点.横坐标)
    赋值 (变量2, 相加 (初始棋子点.纵坐标, 1))
    .判断循环首 (小于 (变量2, 11))
        .如果 (等于 (当前棋盘 [变量2] [变量1], 0))
            赋值 (最终棋子点.横坐标, 变量1)
            赋值 (最终棋子点.纵坐标, 变量2)
            插入相关位置 (最终棋子点)
        .否则
            赋值 (最终棋子点.横坐标, 变量1)
            赋值 (最终棋子点.纵坐标, 变量2)
            插入相关位置 (最终棋子点)
            跳出循环 ()
        .如果结束
        赋值 (变量2, 相加 (变量2, 1))
    .判断循环尾 ()
    赋值 (变量1, 初始棋子点.横坐标)
    赋值 (变量2, 相减 (初始棋子点.纵坐标, 1))
    .判断循环首 (大于或等于 (变量2, 1))
        .如果 (等于 (当前棋盘 [变量2] [变量1], 0))
            赋值 (最终棋子点.横坐标, 变量1)
            赋值 (最终棋子点.纵坐标, 变量2)
            插入相关位置 (最终棋子点)
        .否则
            赋值 (最终棋子点.横坐标, 变量1)
            赋值 (最终棋子点.纵坐标, 变量2)
            插入相关位置 (最终棋子点)
            跳出循环 ()
        .如果结束
        赋值 (变量2, 相减 (变量2, 1))
    .判断循环尾 ()
.判断 (等于 (当前棋盘 [初始棋子点].纵坐标 [初始棋子点].横坐标, 14))
    赋值 (变量1, 初始棋子点.横坐标)
    赋值 (变量2, 相减 (初始棋子点.纵坐标, 1))
    .如果真 (大于 (变量2, 0))
        赋值 (最终棋子点.横坐标, 变量1)
        赋值 (最终棋子点.纵坐标, 变量2)
        插入相关位置 (最终棋子点)
    .如果真结束
    .如果真 (小于 (初始棋子点.纵坐标, 6))
        赋值 (变量2, 初始棋子点.纵坐标)
        赋值 (变量1, 相加 (初始棋子点.横坐标, 1))
        .如果真 (小于 (变量1, 10))
            赋值 (最终棋子点.横坐标, 变量1)
            赋值 (最终棋子点.纵坐标, 变量2)
            插入相关位置 (最终棋子点)
        .如果真结束
        赋值 (变量1, 相减 (初始棋子点.横坐标, 1))
        .如果真 (大于或等于 (变量1, 1))
            赋值 (最终棋子点.横坐标, 变量1)
            赋值 (最终棋子点.纵坐标, 变量2)
            插入相关位置 (最终棋子点)
        .如果真结束
        
    .如果真结束
    
.判断 (等于 (当前棋盘 [初始棋子点].纵坐标 [初始棋子点].横坐标, 7))
    赋值 (变量1, 初始棋子点.横坐标)
    赋值 (变量2, 相减 (初始棋子点.纵坐标, 1))
    .如果真 (小于 (变量2, 11))
        赋值 (最终棋子点.横坐标, 变量1)
        赋值 (最终棋子点.纵坐标, 变量2)
        插入相关位置 (最终棋子点)
    .如果真结束
    .如果真 (大于 (初始棋子点.纵坐标, 5))
        赋值 (变量2, 初始棋子点.纵坐标)
        赋值 (变量1, 相加 (初始棋子点.横坐标, 1))
        .如果真 (小于 (变量1, 10))
            赋值 (最终棋子点.横坐标, 变量1)
            赋值 (最终棋子点.纵坐标, 变量2)
            插入相关位置 (最终棋子点)
        .如果真结束
        赋值 (变量1, 相减 (初始棋子点.横坐标, 1))
        .如果真 (大于或等于 (变量1, 1))
            赋值 (最终棋子点.横坐标, 变量1)
            赋值 (最终棋子点.纵坐标, 变量2)
            插入相关位置 (最终棋子点)
        .如果真结束
        
    .如果真结束
    
.判断 (或者 (等于 (当前棋盘 [初始棋子点].纵坐标 [初始棋子点].横坐标, 4), 等于 (当前棋盘 [初始棋子点].纵坐标 [初始棋子点].横坐标, 11)))
    赋值 (隔子, 假)
    赋值 (变量1, 相加 (初始棋子点.横坐标, 1))
    赋值 (变量2, 初始棋子点.纵坐标)
    .判断循环首 (小于 (变量1, 10))
        .如果 (等于 (当前棋盘 [变量2] [变量1], 0))
            .如果真 (等于 (隔子, 假))
                赋值 (最终棋子点.横坐标, 变量1)
                赋值 (最终棋子点.纵坐标, 变量2)
                插入相关位置 (最终棋子点)
            .如果真结束
            
        .否则
            .如果 (等于 (隔子, 假))
                赋值 (隔子, 真)
            .否则
                赋值 (最终棋子点.横坐标, 变量1)
                赋值 (最终棋子点.纵坐标, 变量2)
                插入相关位置 (最终棋子点)
                跳出循环 ()
            .如果结束
            
        .如果结束
        赋值 (变量1, 相加 (变量1, 1))
    .判断循环尾 ()
    赋值 (变量1, 相减 (初始棋子点.横坐标, 1))
    赋值 (隔子, 假)
    .判断循环首 (大于或等于 (变量1, 1))
        .如果 (等于 (当前棋盘 [变量2] [变量1], 0))
            .如果真 (等于 (隔子, 假))
                赋值 (最终棋子点.横坐标, 变量1)
                赋值 (最终棋子点.纵坐标, 变量2)
                插入相关位置 (最终棋子点)
            .如果真结束
            
        .否则
            .如果 (等于 (隔子, 假))
                赋值 (隔子, 真)
            .否则
                赋值 (最终棋子点.横坐标, 变量1)
                赋值 (最终棋子点.纵坐标, 变量2)
                插入相关位置 (最终棋子点)
                跳出循环 ()
            .如果结束
            
        .如果结束
        赋值 (变量1, 相减 (变量1, 1))
    .判断循环尾 ()
    赋值 (变量1, 初始棋子点.横坐标)
    赋值 (变量2, 相加 (初始棋子点.纵坐标, 1))
    赋值 (隔子, 假)
    .判断循环首 (小于 (变量2, 11))
        .如果 (等于 (当前棋盘 [变量2] [变量1], 0))
            .如果真 (等于 (隔子, 假))
                赋值 (最终棋子点.横坐标, 变量1)
                赋值 (最终棋子点.纵坐标, 变量2)
                插入相关位置 (最终棋子点)
            .如果真结束
            
        .否则
            .如果 (等于 (隔子, 假))
                赋值 (隔子, 真)
            .否则
                赋值 (最终棋子点.横坐标, 变量1)
                赋值 (最终棋子点.纵坐标, 变量2)
                插入相关位置 (最终棋子点)
                跳出循环 ()
            .如果结束
            
        .如果结束
        赋值 (变量2, 相加 (变量2, 1))
    .判断循环尾 ()
    赋值 (变量2, 相减 (初始棋子点.纵坐标, 1))
    赋值 (隔子, 假)
    .判断循环首 (大于或等于 (变量2, 1))
        .如果 (等于 (当前棋盘 [变量2] [变量1], 0))
            .如果真 (等于 (隔子, 假))
                赋值 (最终棋子点.横坐标, 变量1)
                赋值 (最终棋子点.纵坐标, 变量2)
                插入相关位置 (最终棋子点)
            .如果真结束
            
        .否则
            .如果 (等于 (隔子, 假))
                赋值 (隔子, 真)
            .否则
                赋值 (最终棋子点.横坐标, 变量1)
                赋值 (最终棋子点.纵坐标, 变量2)
                插入相关位置 (最终棋子点)
                跳出循环 ()
            .如果结束
            
        .如果结束
        赋值 (变量2, 相减 (变量2, 1))
    .判断循环尾 ()
.默认
    
.判断结束
返回 (相关位置数)

.子程序 能否走到位置, 逻辑型, , 
.参数 初始棋子点, 棋子点, , 
.参数 最终棋子点, 棋子点, , 
.参数 当前棋盘, 字节型, 数组, 

.局部变量 变量1, 整数型, , , 
.局部变量 变量2, 整数型, , , 
.局部变量 起始棋子, 短整数型, , , 
.局部变量 目标棋子, 短整数型, , , 

赋值 (起始棋子, 当前棋盘 [初始棋子点].纵坐标 [初始棋子点].横坐标)
赋值 (目标棋子, 当前棋盘 [最终棋子点].纵坐标 [最终棋子点].横坐标)
.如果真 (并且 (等于 (最终棋子点.横坐标, 初始棋子点.横坐标), 等于 (最终棋子点.纵坐标, 初始棋子点.纵坐标)))
    返回 (假)
.如果真结束
.判断开始 (等于 (起始棋子, 1))
    .如果 (等于 (目标棋子, 8))
        .如果真 (不等于 (最终棋子点.横坐标, 初始棋子点.横坐标))
            返回 (假)
        .如果真结束
        赋值 (变量1, 相加 (初始棋子点.纵坐标, 1))
        .变量循环首 (变量1, 最终棋子点.纵坐标, 1, 变量1)
            .如果真 (不等于 (当前棋盘 [变量1] [初始棋子点].横坐标, 0))
                返回 (假)
            .如果真结束
            
        .变量循环尾 ()
        
    .否则
        .如果真 (或者 (大于 (最终棋子点.纵坐标, 3), 大于 (最终棋子点.横坐标, 6), 小于 (最终棋子点.横坐标, 4)))
            返回 (假)
        .如果真结束
        .如果真 (大于 (相加 (取绝对值 (相减 (最终棋子点.纵坐标, 初始棋子点.纵坐标)), 取绝对值 (相减 (最终棋子点.横坐标, 初始棋子点.横坐标))), 1))
            返回 (假)
        .如果真结束
        
    .如果结束
    
.判断 (等于 (起始棋子, 12))
    .如果真 (或者 (小于 (最终棋子点.纵坐标, 8), 小于 (最终棋子点.横坐标, 4), 大于 (最终棋子点.横坐标, 6)))
        返回 (假)
    .如果真结束
    .如果真 (或者 (不等于 (取绝对值 (相减 (最终棋子点.纵坐标, 初始棋子点.纵坐标)), 1), 不等于 (取绝对值 (相减 (最终棋子点.横坐标, 初始棋子点.横坐标)), 1)))
        返回 (假)
    .如果真结束
    
.判断 (等于 (起始棋子, 5))
    .如果真 (或者 (大于 (最终棋子点.纵坐标, 3), 小于 (最终棋子点.横坐标, 4), 大于 (最终棋子点.横坐标, 6)))
        返回 (假)
    .如果真结束
    .如果真 (或者 (不等于 (取绝对值 (相减 (最终棋子点.纵坐标, 初始棋子点.纵坐标)), 1), 不等于 (取绝对值 (相减 (最终棋子点.横坐标, 初始棋子点.横坐标)), 1)))
        返回 (假)
    .如果真结束
    
.判断 (等于 (起始棋子, 13))
    .如果真 (小于 (最终棋子点.纵坐标, 6))
        返回 (假)
    .如果真结束
    .如果真 (或者 (不等于 (取绝对值 (相减 (最终棋子点.纵坐标, 初始棋子点.纵坐标)), 2), 不等于 (取绝对值 (相减 (最终棋子点.纵坐标, 初始棋子点.纵坐标)), 2)))
        返回 (假)
    .如果真结束
    .如果真 (不等于 (当前棋盘 [相除 (相加 (初始棋子点.纵坐标, 最终棋子点.纵坐标), 2)] [相除 (相加 (初始棋子点.横坐标, 最终棋子点.横坐标), 2)], 0))
        返回 (假)
    .如果真结束
    
.判断 (等于 (起始棋子, 6))
    .如果真 (大于 (最终棋子点.纵坐标, 5))
        返回 (假)
    .如果真结束
    .如果真 (或者 (不等于 (取绝对值 (相减 (最终棋子点.纵坐标, 初始棋子点.纵坐标)), 2), 不等于 (取绝对值 (相减 (最终棋子点.纵坐标, 初始棋子点.纵坐标)), 2)))
        返回 (假)
    .如果真结束
    .如果真 (不等于 (当前棋盘 [相除 (相加 (初始棋子点.纵坐标, 最终棋子点.纵坐标), 2)] [相除 (相加 (初始棋子点.横坐标, 最终棋子点.横坐标), 2)], 0))
        返回 (假)
    .如果真结束
    
.判断 (等于 (起始棋子, 7))
    .如果真 (小于 (最终棋子点.纵坐标, 初始棋子点.纵坐标))
        返回 (假)
    .如果真结束
    .如果真 (并且 (小于 (初始棋子点.纵坐标, 6), 等于 (初始棋子点.纵坐标, 最终棋子点.纵坐标)))
        返回 (假)
    .如果真结束
    .如果真 (大于 (相加 (相减 (最终棋子点.纵坐标, 初始棋子点.纵坐标), 取绝对值 (相减 (初始棋子点.横坐标, 最终棋子点.横坐标))), 1))
        返回 (假)
    .如果真结束
    
.判断 (或者 (等于 (起始棋子, 9), 等于 (起始棋子, 2)))
    .如果真 (并且 (不等于 (初始棋子点.纵坐标, 最终棋子点.纵坐标), 不等于 (初始棋子点.横坐标, 最终棋子点.横坐标)))
        返回 (假)
    .如果真结束
    .如果 (等于 (初始棋子点.纵坐标, 最终棋子点.纵坐标))
        .如果 (小于 (初始棋子点.横坐标, 最终棋子点.横坐标))
            赋值 (变量1, 相加 (初始棋子点.横坐标, 1))
            .变量循环首 (变量1, 相减 (最终棋子点.横坐标, 1), 1, 变量1)
                .如果真 (不等于 (当前棋盘 [初始棋子点].纵坐标 [变量1], 0))
                    返回 (假)
                .如果真结束
                
            .变量循环尾 ()
        .否则
            赋值 (变量1, 相加 (初始棋子点.横坐标, 1))
            .变量循环首 (变量1, 相减 (初始棋子点.横坐标, 1), 1, 变量1)
                .如果真 (不等于 (当前棋盘 [初始棋子点].纵坐标 [变量1], 0))
                    返回 (假)
                .如果真结束
                
            .变量循环尾 ()
        .如果结束
        
    .否则
        .如果 (小于 (初始棋子点.纵坐标, 最终棋子点.纵坐标))
            赋值 (变量1, 相加 (初始棋子点.纵坐标, 1))
            .变量循环首 (变量1, 相减 (最终棋子点.纵坐标, 1), 1, 变量1)
                .如果真 (不等于 (当前棋盘 [变量1] [初始棋子点].横坐标, 0))
                    返回 (假)
                .如果真结束
                
            .变量循环尾 ()
        .否则
            赋值 (变量1, 相加 (最终棋子点.纵坐标, 1))
            .变量循环首 (变量1, 相减 (初始棋子点.纵坐标, 1), 1, 变量1)
                .如果真 (不等于 (当前棋盘 [变量1] [初始棋子点].横坐标, 0))
                    返回 (假)
                .如果真结束
                
            .变量循环尾 ()
        .如果结束
        
    .如果结束
    
.判断 (或者 (等于 (起始棋子, 10), 等于 (起始棋子, 3)))
    .如果真 (不等于 (或者 (并且 (等于 (取绝对值 (相减 (初始棋子点.横坐标, 最终棋子点.横坐标)), 1), 等于 (取绝对值 (相减 (初始棋子点.纵坐标, 最终棋子点.纵坐标)), 2)), 并且 (等于 (取绝对值 (相减 (初始棋子点.横坐标, 最终棋子点.横坐标)), 2), 等于 (取绝对值 (相减 (初始棋子点.纵坐标, 最终棋子点.纵坐标)), 1))), 真))
        返回 (假)
    .如果真结束
    .判断开始 (等于 (相减 (最终棋子点.横坐标, 初始棋子点.横坐标), 2))
        赋值 (变量1, 相加 (初始棋子点.横坐标, 1))
        赋值 (变量2, 初始棋子点.纵坐标)
    .判断 (等于 (相减 (初始棋子点.横坐标, 最终棋子点.横坐标), 2))
        赋值 (变量1, 相减 (初始棋子点.横坐标, 1))
        赋值 (变量2, 初始棋子点.纵坐标)
    .判断 (等于 (相减 (最终棋子点.纵坐标, 初始棋子点.纵坐标), 2))
        赋值 (变量1, 初始棋子点.横坐标)
        赋值 (变量2, 相加 (初始棋子点.纵坐标, 1))
    .判断 (等于 (相减 (初始棋子点.纵坐标, 最终棋子点.纵坐标), 2))
        赋值 (变量1, 初始棋子点.横坐标)
        赋值 (变量2, 相减 (初始棋子点.纵坐标, 1))
    .默认
        
    .判断结束
    .如果真 (不等于 (当前棋盘 [变量2] [变量1], 0))
        返回 (假)
    .如果真结束
    
.判断 (或者 (等于 (起始棋子, 11), 等于 (起始棋子, 4)))
    .如果真 (并且 (不等于 (初始棋子点.纵坐标, 最终棋子点.纵坐标), 不等于 (初始棋子点.横坐标, 最终棋子点.横坐标)))
        返回 (假)
    .如果真结束
    .如果 (等于 (目标棋子, 0))
        .如果 (等于 (初始棋子点.纵坐标, 最终棋子点.纵坐标))
            .如果 (小于 (初始棋子点.横坐标, 最终棋子点.横坐标))
                赋值 (变量1, 相加 (初始棋子点.横坐标, 1))
                .变量循环首 (变量1, 相减 (最终棋子点.横坐标, 1), 1, 变量1)
                    .如果真 (不等于 (当前棋盘 [初始棋子点].纵坐标 [变量1], 0))
                        返回 (假)
                    .如果真结束
                    
                .变量循环尾 ()
            .否则
                赋值 (变量1, 相加 (最终棋子点.横坐标, 1))
                .变量循环首 (变量1, 相减 (初始棋子点.横坐标, 1), 1, 变量1)
                    .如果真 (不等于 (当前棋盘 [初始棋子点].纵坐标 [变量1], 0))
                        返回 (假)
                    .如果真结束
                    
                .变量循环尾 ()
            .如果结束
            
        .否则
            .如果 (小于 (初始棋子点.纵坐标, 最终棋子点.纵坐标))
                赋值 (变量1, 相加 (初始棋子点.纵坐标, 1))
                .变量循环首 (变量1, 相减 (最终棋子点.纵坐标, 1), 1, 变量1)
                    .如果真 (不等于 (当前棋盘 [变量1] [初始棋子点].横坐标, 0))
                        返回 (假)
                    .如果真结束
                    
                .变量循环尾 ()
            .否则
                赋值 (变量1, 相加 (最终棋子点.纵坐标, 1))
                .变量循环首 (变量1, 相减 (初始棋子点.纵坐标, 1), 1, 变量1)
                    .如果真 (不等于 (当前棋盘 [变量1] [初始棋子点].纵坐标, 0))
                        返回 (假)
                    .如果真结束
                    
                .变量循环尾 ()
            .如果结束
            
        .如果结束
        
    .否则
        赋值 (变量2, 0)
        .如果 (等于 (初始棋子点.纵坐标, 最终棋子点.纵坐标))
            .如果 (小于 (初始棋子点.横坐标, 最终棋子点.横坐标))
                赋值 (变量1, 相加 (初始棋子点.横坐标, 1))
                .变量循环首 (变量1, 相减 (最终棋子点.横坐标, 1), 1, 变量1)
                    .如果真 (不等于 (当前棋盘 [初始棋子点].纵坐标 [变量1], 0))
                        赋值 (变量2, 相加 (变量2, 1))
                    .如果真结束
                    
                .变量循环尾 ()
                .如果真 (不等于 (变量2, 1))
                    返回 (假)
                .如果真结束
                
            .否则
                赋值 (变量1, 相加 (最终棋子点.横坐标, 1))
                .变量循环首 (变量1, 相减 (初始棋子点.横坐标, 1), 1, 变量1)
                    .如果真 (不等于 (当前棋盘 [初始棋子点].纵坐标 [变量1], 0))
                        赋值 (变量2, 相加 (变量2, 1))
                    .如果真结束
                    
                .变量循环尾 ()
                .如果真 (不等于 (变量2, 1))
                    返回 (假)
                .如果真结束
                
            .如果结束
            
        .否则
            .如果 (小于 (初始棋子点.纵坐标, 最终棋子点.纵坐标))
                赋值 (变量1, 相加 (初始棋子点.纵坐标, 1))
                .变量循环首 (变量1, 相减 (最终棋子点.纵坐标, 1), 1, 变量1)
                    .如果真 (不等于 (当前棋盘 [变量1] [初始棋子点].横坐标, 0))
                        赋值 (变量2, 相加 (变量2, 1))
                    .如果真结束
                    
                .变量循环尾 ()
                .如果真 (不等于 (变量2, 1))
                    返回 (假)
                .如果真结束
                
            .否则
                赋值 (变量1, 相加 (最终棋子点.纵坐标, 1))
                .变量循环首 (变量1, 相减 (初始棋子点.纵坐标, 1), 1, 变量1)
                    .如果真 (不等于 (当前棋盘 [变量1] [初始棋子点].横坐标, 0))
                        赋值 (变量2, 相加 (变量2, 1))
                    .如果真结束
                    
                .变量循环尾 ()
                .如果真 (不等于 (变量2, 1))
                    返回 (假)
                .如果真结束
                
            .如果结束
            
        .如果结束
        
    .如果结束
    
.判断 (等于 (起始棋子, 14))
    .如果真 (大于 (最终棋子点.纵坐标, 初始棋子点.纵坐标))
        返回 (假)
    .如果真结束
    .如果真 (并且 (大于 (初始棋子点.纵坐标, 5), 等于 (初始棋子点.纵坐标, 最终棋子点.纵坐标)))
        返回 (假)
    .如果真结束
    .如果真 (大于 (相加 (相减 (初始棋子点.纵坐标, 最终棋子点.纵坐标), 取绝对值 (相减 (初始棋子点.横坐标, 最终棋子点.横坐标))), 1))
        返回 (假)
    .如果真结束
    
.判断 (等于 (起始棋子, 8))
    .如果 (等于 (目标棋子, 1))
        .如果真 (不等于 (初始棋子点.横坐标, 最终棋子点.横坐标))
            返回 (假)
        .如果真结束
        赋值 (变量1, 相减 (初始棋子点.纵坐标, 1))
        .变量循环首 (变量1, 相加 (最终棋子点.纵坐标, 1), -1, 变量1)
            .如果真 (不等于 (当前棋盘 [变量1] [初始棋子点].横坐标, 0))
                返回 (假)
            .如果真结束
            
        .变量循环尾 ()
    .否则
        .如果真 (或者 (小于 (最终棋子点.纵坐标, 8), 小于 (最终棋子点.横坐标, 4), 大于 (最终棋子点.横坐标, 6)))
            返回 (假)
        .如果真结束
        .如果真 (大于 (相加 (取绝对值 (相减 (最终棋子点.纵坐标, 初始棋子点.纵坐标)), 取绝对值 (相减 (初始棋子点.横坐标, 最终棋子点.横坐标))), 1))
            返回 (假)
        .如果真结束
        
    .如果结束
    
.默认
    
.判断结束
返回 (真)

.子程序 插入相关位置, 空白型, , 
.参数 位置点, 棋子点, , 

赋值 (相关位置 [相加 (相关位置数, 1)], 位置点)
赋值 (相关位置数, 相加 (相关位置数, 1))

.子程序 负极大值搜索函数, 整数型, , 
.参数 深度, 短整数型, , 

.局部变量 极大值, 整数型, , , 
.局部变量 分数, 整数型, , , 
.局部变量 计数, 整数型, , , 
.局部变量 变量1, 整数型, , , 
.局部变量 那一方, 逻辑型, , , 
.局部变量 棋子, 整数型, , , 
.局部变量 时间, 整数型, , , 

赋值 (极大值, -20000)

.如果 (等于 (求余数 (相减 (最大深度, 深度), 2), 1))
    赋值 (那一方, 真)
.否则
    赋值 (那一方, 假)
.如果结束
赋值 (变量1, 棋局是否结束 (深度, 当前节点棋盘状态))
.如果真 (不等于 (变量1, 0))
    返回 (变量1)
.如果真结束
.如果真 (小于或等于 (深度, 0))
    返回 (估值函数 (那一方, 当前节点棋盘状态))
.如果真结束
赋值 (时间, 取启动时间 ())
赋值 (计数, 产生可能的走法 (深度, 那一方, 当前节点棋盘状态))
赋值 (时间, 相减 (取启动时间 (), 时间))
.变量循环首 (1, 计数, 1, 变量1)
    赋值 (棋子, 要进行的走法 (走法列表 [深度] [变量1]))
    赋值 (分数, 负 (负极大值搜索函数 (相减 (深度, 1))))
    要恢复的走法 (走法列表 [深度] [变量1], 棋子)
    .如果真 (大于 (分数, 极大值))
        赋值 (极大值, 分数)
        .如果真 (等于 (深度, 最大深度))
            赋值 (最佳走法, 走法列表 [深度] [变量1])
        .如果真结束
        
    .如果真结束
    
.变量循环尾 ()
返回 (极大值)

.子程序 要进行的走法, 整数型, , 
.参数 走法参数, 走法, , 

.局部变量 终点棋子类型, 短整数型, , , 

赋值 (终点棋子类型, 当前节点棋盘状态 [走法参数].终点位置.纵坐标 [走法参数].终点位置.横坐标)
赋值 (当前节点棋盘状态 [走法参数].终点位置.纵坐标 [走法参数].终点位置.横坐标, 当前节点棋盘状态 [走法参数].起始位置.纵坐标 [走法参数].起始位置.横坐标)
赋值 (当前节点棋盘状态 [走法参数].起始位置.纵坐标 [走法参数].起始位置.横坐标, 0)
返回 (终点棋子类型)


.子程序 要恢复的走法, 空白型, , 
.参数 走法参数, 走法, , 
.参数 棋子, 字节型, , 

赋值 (当前节点棋盘状态 [走法参数].起始位置.纵坐标 [走法参数].起始位置.横坐标, 当前节点棋盘状态 [走法参数].终点位置.纵坐标 [走法参数].终点位置.横坐标)
赋值 (当前节点棋盘状态 [走法参数].终点位置.纵坐标 [走法参数].终点位置.横坐标, 棋子)

.子程序 一步最佳走法, 空白型, , 
.局部变量 变量y, 整数型, , , 
.局部变量 变量x, 整数型, , , 
.局部变量 变量, 短整数型, , , 
.局部变量 红棋活着, 逻辑型, , , 
.局部变量 黑棋活着, 逻辑型, , , 
.局部变量 时间, 整数型, , , 

赋值 (时间, 取启动时间 ())
赋值 (该谁走, 取反 (该谁走))
.如果 (等于 (该谁走, 真))
    赋值 (.内容, “到你了...”)
.否则
    赋值 (.内容, “电脑思考中...”)
.如果结束
.变量循环首 (1, 3, 1, 变量y)
    .变量循环首 (4, 6, 1, 变量x)
        .如果真 (等于 (棋盘数据 [变量y] [变量x], 1))
            赋值 (变量, 1)
        .如果真结束
        
    .变量循环尾 ()
.变量循环尾 ()
.如果真 (等于 (变量, 0))
    赋值 (是否结束, 真)
.如果真结束
.如果 (等于 (是否结束, 假))
    复制数组 (当前节点棋盘状态, 棋盘数据)
    alphabeta搜索函数 (-20000, 20000, 最大深度)
    要进行的走法 (最佳走法)
    移动棋子 (最佳走法.起始位置, 最佳走法.终点位置)
    复制数组 (棋盘数据, 当前节点棋盘状态)
    重定义数组 (历史走法, 真, 步数)
    赋值 (历史走法 [步数], 黑走法, 最佳走法)
.否则
    
.如果结束
赋值 (时间, 相减 (取启动时间 (), 时间))
赋值 (.内容, 相加 (“时间”, 到文本 (时间), “毫秒”))
赋值 (该谁走, 取反 (该谁走))
.如果 (等于 (是否结束, 假))
    .如果 (等于 (该谁走, 真))
        赋值 (.内容, “到你了...”)
    .否则
        赋值 (.内容, “电脑思考中...”)
    .如果结束
    
.否则
    
.如果结束

.变量循环首 (8, 10, 1, 变量y)
    .变量循环首 (4, 6, 1, 变量x)
        .如果真 (等于 (棋盘数据 [变量y] [变量x], 1))
            赋值 (黑棋活着, 真)
        .如果真结束
        .如果真 (等于 (棋盘数据 [变量y] [变量x], 8))
            赋值 (红棋活着, 真)
        .如果真结束
        
    .变量循环尾 ()
.变量循环尾 ()
.变量循环首 (1, 3, 1, 变量y)
    .变量循环首 (4, 6, 1, 变量x)
        .如果真 (等于 (棋盘数据 [变量y] [变量x], 1))
            赋值 (黑棋活着, 真)
        .如果真结束
        .如果真 (等于 (棋盘数据 [变量y] [变量x], 8))
            赋值 (红棋活着, 真)
        .如果真结束
        
    .变量循环尾 ()
.变量循环尾 ()
.如果真 (并且 (等于 (黑棋活着, 真), 等于 (红棋活着, 假)))
    赋值 (是否结束, 真)
    赋值 (.内容, “你输了”)
.如果真结束
.如果真 (并且 (等于 (黑棋活着, 假), 等于 (红棋活着, 真)))
    赋值 (是否结束, 真)
    赋值 (.内容, “你赢了”)
.如果真结束
.如果真 (并且 (等于 (黑棋活着, 真), 等于 (红棋活着, 真)))
    赋值 (是否结束, 假)
    
.如果真结束



.子程序 _保存棋局_被单击, 空白型, , 
.局部变量 临时字节集, 字节集, , , 
.局部变量 标志, 字节集, , , 
.局部变量 数据, 整数型, , , 
.局部变量 变量1, 整数型, , , 
.局部变量 变量2, 整数型, , , 
.局部变量 变量, 整数型, , , 

赋值 (.类型, 1)
赋值 (.标题, “保存棋局”)
赋值 (.文件必须存在, 真)
赋值 (.文件覆盖提示, 真)
.如果真 (等于 (打开 (), 真))
    赋值 (临时字节集, {  })
    .计次循环首 (10, 变量1)
        .计次循环首 (9, 变量2)
            赋值 (临时字节集, 相加 (临时字节集, 到字节集 (棋盘数据 [变量1] [变量2])))
        .计次循环尾 ()
    .计次循环尾 ()
    赋值 (标志, 到字节集 (“象棋棋局”))
    写到文件 (.文件名, 相加 (标志, 临时字节集))
.如果真结束


.子程序 _读取棋局_被单击, 空白型, , 
.局部变量 标志, 文本型, , , 
.局部变量 临时字节集, 字节集, , , 
.局部变量 记次变量, 整数型, , , 
.局部变量 数据, 字节集, , , 
.局部变量 变量, 整数型, , , 
.局部变量 数组, 字节型, , "0", 
.局部变量 变量1, 整数型, , , 
.局部变量 变量2, 整数型, , , 

赋值 (.类型, 0)
赋值 (.标题, “打开象棋棋局”)
赋值 (.文件必须存在, 真)
赋值 (.文件覆盖提示, 真)
.如果真 (等于 (打开 (), 真))
    赋值 (临时字节集, 读入文件 (.文件名))
    .如果真 (大于或等于 (取字节集长度 (临时字节集), 8))
        赋值 (标志, 取字节集数据 (取字节集左边 (临时字节集, 8), #文本型))
        .如果真 (等于 (标志, “象棋棋局”))
            赋值 (数据, 取字节集中间 (临时字节集, 9, 相减 (取字节集长度 (临时字节集), 8)))
            赋值 (记次变量, 取字节集长度 (数据))
            .如果真 (大于 (记次变量, 0))
                .计次循环首 (记次变量, 变量)
                    加入成员 (数组, 取字节集数据 (取字节集中间 (数据, 变量, 1), #字节型))
                .计次循环尾 ()
                .计次循环首 (10, 变量1)
                    .计次循环首 (9, 变量2)
                        赋值 (棋盘数据 [变量1] [变量2], 数组 [相加 (相乘 (相减 (变量1, 1), 9), 变量2)])
                    .计次循环尾 ()
                .计次循环尾 ()
                赋值 (.可视, 假)
                清空棋子 ()
                初始化棋盘 ()
                赋值 (.可视, 真)
            .如果真结束
            
        .如果真结束
        
    .如果真结束
    
.如果真结束


.子程序 清空棋子, 空白型, , 
.局部变量 变量1, 整数型, , , 
.局部变量 变量2, 整数型, , , 

.计次循环首 (10, 变量1)
    .计次循环首 (9, 变量2)
        相乘 (相减 (变量2, 1), 48).复制 (相乘 (相减 (变量1, 1), 48), 48, 48, , 0, 0, )
        0.复制 (0, 48, 48, , 相乘 (相减 (变量2, 1), 48), 相乘 (相减 (变量1, 1), 48), )
    .计次循环尾 ()
.计次循环尾 ()

.子程序 alphabeta搜索函数, 整数型, , 
.参数 上边界, 整数型, , 
.参数 下边界, 整数型, , 
.参数 深度, 短整数型, , 

.局部变量 分数, 整数型, , , 
.局部变量 计数, 短整数型, , , 
.局部变量 变量1, 整数型, , , 
.局部变量 那一方, 逻辑型, , , 
.局部变量 棋子, 字节型, , , 

.如果 (等于 (求余数 (相减 (最大深度, 深度), 2), 1))
    赋值 (那一方, 真)
.否则
    赋值 (那一方, 假)
.如果结束
赋值 (变量1, 棋局是否结束 (深度, 当前节点棋盘状态))
.如果真 (不等于 (变量1, 0))
    返回 (变量1)
.如果真结束
.如果真 (小于或等于 (深度, 0))
    返回 (估值函数 (那一方, 当前节点棋盘状态))
.如果真结束
赋值 (计数, 产生可能的走法 (深度, 那一方, 当前节点棋盘状态))
.变量循环首 (1, 计数, 1, 变量1)
    赋值 (棋子, 要进行的走法 (走法列表 [深度] [变量1]))
    赋值 (分数, 负 (alphabeta搜索函数 (负 (下边界), 负 (上边界), 相减 (深度, 1))))
    要恢复的走法 (走法列表 [深度] [变量1], 棋子)
    .如果真 (等于 (深度, 相减 (最大深度, 1)))
    .如果真结束
    .如果真 (等于 (深度, 最大深度))
    .如果真结束
    .如果真 (大于 (分数, 上边界))
        赋值 (上边界, 分数)
        .如果真 (等于 (深度, 最大深度))
            赋值 (最佳走法, 走法列表 [深度] [变量1])
        .如果真结束
        
    .如果真结束
    .如果真 (大于或等于 (上边界, 下边界))
        跳出循环 ()
    .如果真结束
    
.变量循环尾 ()
返回 (上边界)

.子程序 选中棋子, 空白型, , 
.参数 棋子, 棋子点, , 

.局部变量 图片号, 整数型, , , 

.如果 (等于 (选中, 真))
    赋值 (图片号, 对应位图1 (前棋子类型))
    .如果 (不等于 (图片号, 0))
        相乘 (相减 (前棋子点.横坐标, 1), 48).复制 (相乘 (相减 (前棋子点.纵坐标, 1), 48), 44, 44, , 0, 0, )
        图片号.画图片 (0, 0, 44, 44, 负 (取颜色值 (255, 255, 255)))
        0.复制 (0, 44, 44, , 相乘 (相减 (前棋子点.横坐标, 1), 48), 相乘 (相减 (前棋子点.纵坐标, 1), 48), )
        卸载图片 (图片号)
    .否则
        
    .如果结束
    
    赋值 (图片号, 对应位图2 (棋盘数据 [棋子].纵坐标 [棋子].横坐标))
    .如果 (不等于 (图片号, 0))
        相乘 (相减 (棋子.横坐标, 1), 48).复制 (相乘 (相减 (棋子.纵坐标, 1), 48), 44, 44, , 0, 0, )
        图片号.画图片 (0, 0, 44, 44, 负 (取颜色值 (255, 255, 255)))
        0.复制 (0, 44, 44, , 相乘 (相减 (棋子.横坐标, 1), 48), 相乘 (相减 (棋子.纵坐标, 1), 48), )
        卸载图片 (图片号)
    .否则
        
    .如果结束
    
    赋值 (前棋子点.横坐标, 棋子.横坐标)
    赋值 (前棋子点.纵坐标, 棋子.纵坐标)
    赋值 (前棋子类型, 棋盘数据 [棋子].纵坐标 [棋子].横坐标)
    
.否则
    赋值 (前棋子点.横坐标, 棋子.横坐标)
    赋值 (前棋子点.纵坐标, 棋子.纵坐标)
    赋值 (前棋子类型, 棋盘数据 [棋子].纵坐标 [棋子].横坐标)
    赋值 (图片号, 对应位图2 (棋盘数据 [棋子].纵坐标 [棋子].横坐标))
    .如果 (不等于 (图片号, 0))
        相乘 (相减 (棋子.横坐标, 1), 48).复制 (相乘 (相减 (棋子.纵坐标, 1), 48), 44, 44, , 0, 0, )
        图片号.画图片 (0, 0, 44, 44, 负 (取颜色值 (255, 255, 255)))
        0.复制 (0, 44, 44, , 相乘 (相减 (棋子.横坐标, 1), 48), 相乘 (相减 (棋子.纵坐标, 1), 48), )
        卸载图片 (图片号)
    .否则
        
    .如果结束
    
.如果结束


.子程序 对应位图2, 整数型, , 
.参数 棋数字, 短整数型, 可空, 


.判断开始 (等于 (棋数字, 0))
    返回 (0)
.判断 (等于 (棋数字, 1))
    返回 (载入图片 (#黑帅1))
.判断 (等于 (棋数字, 2))
    返回 (载入图片 (#黑车1))
.判断 (等于 (棋数字, 3))
    返回 (载入图片 (#黑马1))
.判断 (等于 (棋数字, 4))
    返回 (载入图片 (#黑炮1))
.判断 (等于 (棋数字, 5))
    返回 (载入图片 (#黑士1))
.判断 (等于 (棋数字, 6))
    返回 (载入图片 (#黑象1))
.判断 (等于 (棋数字, 7))
    返回 (载入图片 (#黑兵1))
.判断 (等于 (棋数字, 8))
    返回 (载入图片 (#红将1))
.判断 (等于 (棋数字, 9))
    返回 (载入图片 (#红车1))
.判断 (等于 (棋数字, 10))
    返回 (载入图片 (#红马1))
.判断 (等于 (棋数字, 11))
    返回 (载入图片 (#红炮1))
.判断 (等于 (棋数字, 12))
    返回 (载入图片 (#红士1))
.判断 (等于 (棋数字, 13))
    返回 (载入图片 (#红象1))
.判断 (等于 (棋数字, 14))
    返回 (载入图片 (#红兵1))
.默认
    返回 (0)
.判断结束


.子程序 _退出_被单击, 空白型, , 
销毁 ()

.子程序 _关于_被单击, 空白型, , 
载入 (关于, , 真)

.子程序 行棋步骤, 空白型, , 


.窗口程序集 窗口程序集2, , , 

.子程序 _关于_创建完毕, 空白型, , 
赋值 (.标题, “    国内外类似的象棋软件已经很多,编写一个出色的人机博弈程序不是一件简单的事情.大家都知道这个编程原理网络上是有的,易语言给了我这次机会,用易的方式来表示.谢谢易为国人做的贡献.                由于时间紧张水平有限,自认为有很多不足和漏洞,使得棋力不高.希望能抛砖引玉.首先运行效率较低,还要在数据结构和代码效率上改进.没有建立开局和残局库.最重要的是估值函数太简单了.一个好的象棋软件需要全面的估值,我会继续努力完善她.希望对她感兴趣,愿一起开发和支持E的朋友与我讨论技术问题.                                            liheng994@sina.com                    022-81344116”)

.类模块 着法, , , 

.程序集变量 起始位置, 字节型, , , 
.程序集变量 目标位置, 字节型, , , 
.程序集变量 吃掉棋子, 字节型, , , 
.程序集变量 是否将军, 字节型, , , 
.子程序 _初始化, 空白型, , 当基于本类的对象被创建后，此方法会被自动调用


.子程序 _销毁, 空白型, , 当基于本类的对象被销毁前，此方法会被自动调用


.类模块 象棋位置, , , 

.程序集变量 玩家, 字节型, , , 0 = Red and 1 = Black
.程序集变量 估值, 短整数型, , "2", 
.程序集变量 棋盘格子, 字节型, , "90", Piece Indexes of each square, 0 = Unoccupied, 16-31 = Red, 32-47 = Black
.程序集变量 棋子, 字节型, , "48", Square Indexes of each piece, -1 = Captured
.程序集变量 ZobristKey, 长整数型, , , 
.程序集变量 ZobristLock, 长整数型, , , 
.程序集变量 着法列表, 着法, , "256", 
.子程序 _初始化, 空白型, , 当基于本类的对象被创建后，此方法会被自动调用


.子程序 _销毁, 空白型, , 当基于本类的对象被销毁前，此方法会被自动调用


.类模块 位棋盘, , , 

.程序集变量 低位, 长整数型, , , 
.程序集变量 中位, 长整数型, , , 
.程序集变量 高位, 长整数型, , , 
.子程序 _初始化, 空白型, , 当基于本类的对象被创建后，此方法会被自动调用


.子程序 _销毁, 空白型, , 当基于本类的对象被销毁前，此方法会被自动调用


.程序集 象棋, , , 

.子程序 初始化数据, 空白型, , 
.局部变量 匿名局部变量_1482, 空白型, , , 




 ' 不属于任何一个程序集、类模块的函数：
